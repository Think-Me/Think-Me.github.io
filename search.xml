<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æªå‡ºéšè—çš„ç—…æ¯’è¿›ç¨‹</title>
      <link href="/post/2024/05/31/56177/"/>
      <url>/post/2024/05/31/56177/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åšä¸»åœ¨è®¿é—®pve webç«¯æ—¶å¶ç„¶å‘ç°æœ‰ä¸ªè™šæ‹ŸæœºCPUå ç”¨æŒç»­100%ï¼ï¼ï¼äºæ˜¯è¿æ¥åˆ°è™šæ‹Ÿæœºä¸­ä½¿ç”¨topæŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼Œä½†æ˜¯CPUå ç”¨ç‡æ˜¾ç¤º100%è€Œä¸‹æ–¹çš„è¿›ç¨‹åˆ—è¡¨ä¸­æŒ‰CPUå ç”¨æ’åºå¹¶æ²¡æœ‰é«˜å ç”¨è¿›ç¨‹ã€‚æ‰€ä»¥åˆ¤æ–­åº”è¯¥æ˜¯ç—…æ¯’ç¨‹åºä½¿ç”¨äº†æŸäº›éšè—æ‰‹æ®µï¼</p><h3 id="1-ä½¿ç”¨unhideæ‰¾å‡ºéšè—è¿›ç¨‹"><a href="#1-ä½¿ç”¨unhideæ‰¾å‡ºéšè—è¿›ç¨‹" class="headerlink" title="1. ä½¿ç”¨unhideæ‰¾å‡ºéšè—è¿›ç¨‹"></a>1. ä½¿ç”¨unhideæ‰¾å‡ºéšè—è¿›ç¨‹</h3><p>å…ˆå®‰è£…unhide <code>apt install unhide</code> ç„¶åæ‰§è¡Œ <code>unhide proc</code> </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu-template:~# unhide proc</span><br><span class="line">Unhide 20130526</span><br><span class="line">Copyright Â© 2013 Yago Jesus &amp; Patrick Gouin</span><br><span class="line">License GPLv3+ : GNU GPL version 3 or later</span><br><span class="line">http://www.unhide-forensics.info</span><br><span class="line"></span><br><span class="line">NOTE : This version of unhide is for systems using Linux &gt;= 2.6 </span><br><span class="line"></span><br><span class="line">Used options: </span><br><span class="line">[*]Searching for Hidden processes through /proc stat scanning</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1072</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1074</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1075</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1076</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1077</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1078</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br><span class="line"></span><br><span class="line">Found HIDDEN PID: 1081</span><br><span class="line">        Cmdline: &quot;-bash&quot;</span><br><span class="line">        Executable: &quot;/usr/bin/-bash (deleted)&quot;</span><br><span class="line">        Command: &quot;-bash&quot;</span><br><span class="line">        $USER=root</span><br><span class="line">        $PWD=/root</span><br></pre></td></tr></table></figure><p>å¥½å®¶ä¼™ï¼è¿™ä¹ˆå¤šéšè—è¿›ç¨‹ï¼</p><p>ç°åœ¨æ¥çœ‹è¿™äº›éšè—è¿›ç¨‹çš„ç»†èŠ‚éƒ½æ˜¯å¹²å˜›çš„ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu-template:~# systemctl status 1072</span><br><span class="line">â— session-1.scope - Session 1 of user root</span><br><span class="line">     Loaded: loaded (/run/systemd/transient/session-1.scope; transient)</span><br><span class="line">  Transient: yes</span><br><span class="line">     Active: active (running) since Fri 2024-05-31 16:40:58 CST; 22s ago</span><br><span class="line">      Tasks: 11</span><br><span class="line">     Memory: 29.7M</span><br><span class="line">     CGroup: /user.slice/user-0.slice/session-1.scope</span><br><span class="line">             â”œâ”€ 862 sshd: root@pts/0</span><br><span class="line">             â”œâ”€1000 -bash</span><br><span class="line">             â”œâ”€1072 -bash</span><br><span class="line">             â”œâ”€1470 systemctl status 1072</span><br><span class="line">             â””â”€1472 pager</span><br></pre></td></tr></table></figure><h3 id="2-æ¸…ç†éšè—è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶å’ŒæœåŠ¡"><a href="#2-æ¸…ç†éšè—è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶å’ŒæœåŠ¡" class="headerlink" title="2. æ¸…ç†éšè—è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶å’ŒæœåŠ¡"></a>2. æ¸…ç†éšè—è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶å’ŒæœåŠ¡</h3><p>æ ¹æ®<code>unhide</code>å’Œ<code>systemctl status</code>çš„ç»“æœï¼Œæ¸…ç†éšè—è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶å’ŒæœåŠ¡ã€‚</p><h3 id="3-ä½¿ç”¨æ€æ¯’è½¯ä»¶æ‰«æç³»ç»Ÿç¡®è®¤æ˜¯å¦è¿˜æœ‰å¯ç–‘æ–‡ä»¶"><a href="#3-ä½¿ç”¨æ€æ¯’è½¯ä»¶æ‰«æç³»ç»Ÿç¡®è®¤æ˜¯å¦è¿˜æœ‰å¯ç–‘æ–‡ä»¶" class="headerlink" title="3. ä½¿ç”¨æ€æ¯’è½¯ä»¶æ‰«æç³»ç»Ÿç¡®è®¤æ˜¯å¦è¿˜æœ‰å¯ç–‘æ–‡ä»¶"></a>3. ä½¿ç”¨æ€æ¯’è½¯ä»¶æ‰«æç³»ç»Ÿç¡®è®¤æ˜¯å¦è¿˜æœ‰å¯ç–‘æ–‡ä»¶</h3><p>è¿™é‡Œå¯ä»¥ä½¿ç”¨<a href="https://www.clamav.net/"><code>ClamAV</code></a>å’Œ<a href="https://www.chkrootkit.org/"><code>Chkrootkit</code></a> ã€<a href="https://rkhunter.sourceforge.net/"><code>Rootkit Hunter</code></a>ç­‰æ€æ¯’è½¯ä»¶æ¥æ‰«æç³»ç»Ÿï¼Œç¡®è®¤æ˜¯å¦è¿˜æœ‰å¯ç–‘æ–‡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ã€å¯é€‰ã€‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ã€å¯é€‰ã€‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ä½¿ç”¨GitHub Pagesè‡ªå®šä¹‰åŸŸååæ— æ³•æ­£å¸¸ç”³è¯·é€šé…ç¬¦è¯ä¹¦çš„é—®é¢˜</title>
      <link href="/post/2024/01/02/33430/"/>
      <url>/post/2024/01/02/33430/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>ä¾‹å¦‚ï¼šæˆ‘å°† eber.vip è®¾ç½®ä¸ºGitHub Pagesçš„è‡ªå®šä¹‰åŸŸåï¼Œå¹¶ä½¿ç”¨CNAMEæ–¹å¼æ¥å…¥ã€‚åœ¨ä½¿ç”¨acme.shæˆ–å…¶ä»–å·¥å…·ç”³è¯·é€šé…ç¬¦è¯ä¹¦æ—¶ï¼Œå‡ºç°äº†â€CAA record for eber.vip prevents issuanceâ€çš„é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•ç”³è¯·sslè¯ä¹¦ã€‚<br><img src="/../img/acme/errorimg.png" alt="errorimg.png"></p><h3 id="é—®é¢˜åŸå› "><a href="#é—®é¢˜åŸå› " class="headerlink" title="é—®é¢˜åŸå› "></a>é—®é¢˜åŸå› </h3><p>å½“ CA æœºæ„æŸ¥è¯¢ eber.vip çš„ CAA è®°å½•æ—¶ï¼Œå¦‚æœè¯¥åŸŸåæœ‰ CNAME è®°å½•ä¼šä¼˜å…ˆæŸ¥è¯¢ CNAME æŒ‡å‘çš„åœ°å€æ˜¯å¦æœ‰ CAA è®°å½•ï¼Œæ°å·§github.ioé…ç½®äº† CAA, å¹¶ä¸”å…è®¸ Letâ€™s Encrypt é¢å‘å•åŸŸåè¯ä¹¦ä»¥åŠå…è®¸ Digi Cert é¢å‘å•åŸŸåä¸é€šé…ç¬¦è¯ä¹¦ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å»ç”³è¯· Letâ€™s Encrypt å…è´¹çš„é€šé…ç¬¦è¯ä¹¦æ—¶ä¼šè¢«é©³å›ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>ä¸€å…±æœ‰å¤šç§è§£å†³æ–¹æ¡ˆï¼Œæˆ‘è¿™é‡Œåˆ—ä¸¾ä¸¤ä¸ªæ¯”è¾ƒå¥½æ“ä½œçš„æ–¹å¼ï¼Œä»»é€‰å…¶ä¸€å³å¯ï¼</p><ol><li>ä¸ä½¿ç”¨æ ¹åŸŸä½œä¸º GitHub Pages çš„è‡ªå®šä¹‰åŸŸåã€‚</li><li>ç”¨Aè®°å½•æ¥å…¥ GitHub Pages è€Œä¸ç”¨ CNAMEï¼Œ<a href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain">å‚è€ƒæ–‡æ¡£</a>ã€‚</li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://letsencrypt.org/zh-cn/docs/caa/">è¯ä¹¦é¢å‘æœºæ„æˆæƒï¼ˆCAAï¼‰</a></li><li><a href="https://zh.wikipedia.org/wiki/DNS%E8%AF%81%E4%B9%A6%E9%A2%81%E5%8F%91%E6%9C%BA%E6%9E%84%E6%8E%88%E6%9D%83">CAAè®°å½•</a></li><li><a href="https://cloud.tencent.com/document/product/400/88117">è…¾è®¯äº‘æ–‡æ¡£</a></li><li><a href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain-and-the-www-subdomain-variant">GitHubæ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acme.sh </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Overlayæ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/post/2023/12/25/14212/"/>
      <url>/post/2023/12/25/14212/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>OverlayFSæ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œç”±Miklos Szerediå¼€å‘ï¼Œä¸»è¦ç›®çš„æ˜¯åœ¨å…±åŒçš„åŸºç¡€æ–‡ä»¶ç³»ç»Ÿä¸Šå»ºç«‹è™šæ‹ŸåŒ–ç³»ç»Ÿã€‚å…¶ä¸»è¦ç‰¹æ€§æ˜¯ï¼šå åˆä¸¤ç§ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¸€ä¸ªæ˜¯åªè¯»ï¼Œå¦ä¸€ä¸ªå¯å†™ã€‚è¿™æ ·çš„ç‰¹æ€§å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œä½¿ç³»ç»Ÿèƒ½æ”¯æŒæ¢å¤å‡ºå‚é…ç½®ç­‰åŠŸèƒ½ã€‚OverlayFSåœ¨2014å¹´12æœˆ3.18ç‰ˆæœ¬ä¸­è¢«åˆå¹¶åˆ°Linux kernelä¸»çº¿ä¸­ã€‚è‘—åçš„OpenWrtå’ŒDockeréƒ½é‡‡ç”¨äº†OverlayæŠ€æœ¯ã€‚</p><h3 id="2-åŸç†"><a href="#2-åŸç†" class="headerlink" title="2. åŸç†"></a>2. åŸç†</h3><p><img src="/../img/Overlay%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/overlay1.png" alt="overlay1.png"></p><p>Overlayè¡¨ç¤ºå åŠ å’Œè¦†ç›–çš„æ„æ€ã€‚OverlayFSæ–‡ä»¶ç³»ç»Ÿåˆ™å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šOverlayFSçš„å®ç°æ–¹å¼æ˜¯ä½¿ç”¨ä¸€ä¸ªlowerå±‚å’Œä¸€ä¸ªupperå±‚å åŠ æˆä¸ºworkï¼Œå…¶ä¸­loweræ˜¯åŸºç¡€æ–‡ä»¶ç³»ç»Ÿï¼ˆæ‰€æœ‰æ–‡ä»¶ç›´æ¥å‘ˆç°åˆ°workï¼‰ï¼Œupperæ˜¯å åŠ åœ¨lowerä¹‹ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆæ‰€æœ‰æ–‡ä»¶ä¹Ÿå‘ˆç°åˆ°workï¼Œä½†æ˜¯å¦‚æœæŸä¸ªæ–‡ä»¶åä¸lowerä¸­ä¸€è‡´åˆ™ä½¿ç”¨upperä¸­çš„æ–‡ä»¶ï¼‰ã€‚</p><h3 id="3-å®è·µ"><a href="#3-å®è·µ" class="headerlink" title="3. å®è·µ"></a>3. å®è·µ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@hk:~# mkdir -p /overlay/overlaydemo</span><br><span class="line">root@hk:~# cd !$</span><br><span class="line">root@hk:/overlay/overlaydemo# mkdir -p lower upper work merged</span><br><span class="line">root@hk:/overlay/overlaydemo# mkdir -p lower/d1 upper/d1</span><br><span class="line">root@hk:/overlay/overlaydemo# touch lower/f1 upper/f1</span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;lower f1&quot;&gt; lower/f1</span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;upper f1&quot;&gt; upper/f1</span><br><span class="line">root@hk:/overlay/overlaydemo# touch lower/d1/d1f1 upper/d1/d1f1</span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;lower d1 d1f1&quot;&gt; lower/d1/d1f1 </span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;upper d1 d1f1&quot;&gt; upper/d1/d1f1</span><br><span class="line">root@hk:/overlay/overlaydemo# touch lower/d1/d1fa upper/d1/d1fb</span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;lower d1 d1fa&quot;&gt; lower/d1/d1fa</span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;upper d1 d1fb&quot;&gt; upper/d1/d1fb</span><br><span class="line">root@hk:/overlay/overlaydemo# tree # æ•´ä¸ªç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤º</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ lower</span><br><span class="line">â”‚   â”œâ”€â”€ d1</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ d1f1</span><br><span class="line">â”‚   â”‚   â””â”€â”€ d1fa</span><br><span class="line">â”‚   â””â”€â”€ f1</span><br><span class="line">â”œâ”€â”€ merged</span><br><span class="line">â”‚   â”œâ”€â”€ d1</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ d1f1</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ d1fa</span><br><span class="line">â”‚   â”‚   â””â”€â”€ d1fb</span><br><span class="line">â”‚   â””â”€â”€ f1</span><br><span class="line">â”œâ”€â”€ upper</span><br><span class="line">â”‚   â”œâ”€â”€ d1</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ d1f1</span><br><span class="line">â”‚   â”‚   â””â”€â”€ d1fb</span><br><span class="line">â”‚   â””â”€â”€ f1</span><br><span class="line">â””â”€â”€ work</span><br><span class="line">    â””â”€â”€ work</span><br><span class="line"></span><br><span class="line">8 directories, 10 files</span><br><span class="line">root@hk:/overlay/overlaydemo# mount -t overlay ol -o lowerdir=lower,upperdir=upper,workdir=work merged</span><br><span class="line">root@hk:/overlay/overlaydemo# df</span><br><span class="line">Filesystem     1K-blocks    Used Available Use% Mounted on</span><br><span class="line">udev              461724       0    461724   0% /dev</span><br><span class="line">tmpfs              94388   11348     83040  13% /run</span><br><span class="line">/dev/sda1       64860904 2411580  62432940   4% /</span><br><span class="line">tmpfs             471928       0    471928   0% /dev/shm</span><br><span class="line">tmpfs               5120       0      5120   0% /run/lock</span><br><span class="line">tmpfs             471928       0    471928   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda15        106858    3195    103664   3% /boot/efi</span><br><span class="line">/dev/sdb1        4060864    8188   3826680   1% /mnt</span><br><span class="line">tmpfs              94388       0     94388   0% /run/user/0</span><br><span class="line">ol              64860904 2411580  62432940   4% /overlay/overlaydemo/merged</span><br><span class="line">root@hk:/overlay/overlaydemo# tree merged/</span><br><span class="line">merged/</span><br><span class="line">â”œâ”€â”€ d1</span><br><span class="line">â”‚   â”œâ”€â”€ d1f1</span><br><span class="line">â”‚   â”œâ”€â”€ d1fa</span><br><span class="line">â”‚   â””â”€â”€ d1fb</span><br><span class="line">â””â”€â”€ f1</span><br><span class="line"></span><br><span class="line">1 directory, 4 files</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”±ä¸Šå¯çŸ¥ åˆšæ‰çš„f1å’Œd1f1è¿™é‡Œåªæœ‰ä¸€ä»½è€Œd1faå’Œd1fbéƒ½å­˜åœ¨ã€‚</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat merged/d1/d1f1 </span><br><span class="line">upper d1 d1f1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹d1f1æ–‡ä»¶å‘ç°æ˜¯upperçš„d1f1å†…å®¹</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat merged/d1/d1fa</span><br><span class="line">lower d1 d1fa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹d1faæ–‡ä»¶å‘ç°æ˜¯lowerçš„d1faå†…å®¹</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat merged/d1/d1fb</span><br><span class="line">upper d1 d1fb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹d1fbæ–‡ä»¶å‘ç°æ˜¯upperçš„d1fbå†…å®¹</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat merged/f1 </span><br><span class="line">upper f1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹f1æ–‡ä»¶å‘ç°æ˜¯upperçš„f1å†…å®¹</span></span><br><span class="line">root@hk:/overlay/overlaydemo# echo &quot;update it...&quot;&gt;&gt; merged/d1/d1fa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç°åœ¨ä¿®æ”¹ æœ€åˆåªåœ¨lowerä¸­çš„æ–‡ä»¶ -- merged/d1/d1fa</span> </span><br><span class="line">root@hk:/overlay/overlaydemo# cat merged/d1/d1fa </span><br><span class="line">lower d1 d1fa</span><br><span class="line">update it...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç° mergedä¸­ æ–‡ä»¶å†…å®¹å·²ç»æ›´æ–°äº†</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat lower/d1/d1fa </span><br><span class="line">lower d1 d1fa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è€Œlowerä¸­ æ–‡ä»¶å†…å®¹ æ²¡æœ‰æ›´æ–°</span></span><br><span class="line">root@hk:/overlay/overlaydemo# cat upper/d1/d1fa </span><br><span class="line">lower d1 d1fa</span><br><span class="line">update it...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°upperä¸­ å¤šäº†ä¸€ä¸ªåŒåæ–‡ä»¶d1fa å¹¶ä¸”å†…å®¹ä¸ºä¿®æ”¹åçš„å†…å®¹ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="4-å…¶ä»–"><a href="#4-å…¶ä»–" class="headerlink" title="4. å…¶ä»–"></a>4. å…¶ä»–</h3><ul><li>-t overlayä»£è¡¨ä½¿ç”¨overlayæ–‡ä»¶ç³»ç»Ÿ</li><li>olä»£è¡¨æ–‡ä»¶ç³»ç»Ÿåç§°å¯ä»¥éšæ„æŒ‡å®š</li><li>lowerdirå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨:åˆ†éš”</li><li>upperdirå’Œworkdiråªèƒ½æœ‰ä¸€ä¸ª</li><li>workdirå¿…é¡»æ˜¯ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥ä¸åˆ›å»ºä¼šè‡ªåŠ¨ç”Ÿæˆ</li><li>mergedæ˜¯æœ€ç»ˆçš„æŒ‚è½½ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ˜¯å½“å‰æ–‡ä»¶å¤¹çš„mergedç›®å½•</li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸Šæœ€å¼ºè™šæ‹ŸæœºParallels Desktopç ´è§£ç‰ˆ</title>
      <link href="/post/2023/09/21/21181/"/>
      <url>/post/2023/09/21/21181/</url>
      
        <content type="html"><![CDATA[<h3 id=""><a href="#" class="headerlink" title=""></a><blockquote><p>Parallels Desktop 19 ç ´è§£ç‰ˆ</p></blockquote></h3><p><img src="https://up.eber.vip/Think-Me/img/main/2023/09/1695287042-202309211704100.png"></p><h3 id="-1"><a href="#-1" class="headerlink" title=""></a><blockquote><p>å±æ€§</p></blockquote></h3><ul><li>åç§°ï¼šParallels Desktop</li><li>ç‰ˆæœ¬ï¼š19.0.0</li><li>å‚å•†ï¼šParallels International GmbH</li><li>ç³»ç»Ÿï¼šmacOS 10.14.6 and later</li><li>æ¶æ„ï¼šARM, x86(64-bit)</li></ul><h3 id="-2"><a href="#-2" class="headerlink" title=""></a><blockquote><p>è¯´æ˜</p></blockquote></h3><ul><li>è§£å‹ä¹‹åæ ¹æ® Crack_Parallels æ–‡ä»¶å¤¹ä¸­ Read-me.txt æ–‡ä»¶è¿›è¡Œæ“ä½œ</li><li>åœ¨æ‰§è¡Œ Install_Patch.command æ—¶å¯èƒ½ä¼šé‡åˆ°æƒé™é—®é¢˜ï¼Œç›´æ¥åœ¨å½“å‰ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯æ‰§è¡Œ <code>chmod -R 777 *</code> ç»™äºˆå…¨éƒ¨æƒé™å³å¯</li></ul><h3 id="-3"><a href="#-3" class="headerlink" title=""></a><blockquote><p>ä¸‹è½½</p></blockquote></h3><ul><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/Ali189/public/MAC%E8%BD%AF%E4%BB%B6/ParallelsDesktop-19_0_0-54570.zip?sign=CmtXU6AYyfse9XEgX8UFn-llypvbLnc4yIbzYeOvfV8=:1710839279"   title="V19.0.0"><i class="far fa-hand-point-right"></i><span>V19.0.0</span></a></li><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/189Cloud/app/ParallelsDesktop-19_0_0-54570.zip?sign=5EI4iGtcyA3hclyAUsPVBkWPn9a__VQRyaV2Dx5aRh4=:1710839254"   title="V19.0.0"><i class="far fa-hand-point-right"></i><span>V19.0.0</span></a></li><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/Ali189/public/MAC%E8%BD%AF%E4%BB%B6/ParallelsDesktop-18_1_0-53311_2.tgz?sign=A2p8QNHxTxNq5RK9p9_cadhOcm54p8m-TverIZKf-ck=:1710839313"   title="V18.1.0"><i class="far fa-hand-point-right"></i><span>V18.1.0</span></a></li></ul>]]></content>
      
      
      <categories>
          
          <category> èµ„æºåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Macè½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Navicat Premium 16 Macç ´è§£ç‰ˆ</title>
      <link href="/post/2023/09/21/39935/"/>
      <url>/post/2023/09/21/39935/</url>
      
        <content type="html"><![CDATA[<h3 id=""><a href="#" class="headerlink" title=""></a><blockquote><p>Navicat Premium 16.2.5 Macç ´è§£ç‰ˆ</p></blockquote></h3><p><img src="https://up.eber.vip/Think-Me/img/main/2023/09/1695282851-202309211554264.png"></p><h3 id="-1"><a href="#-1" class="headerlink" title=""></a><blockquote><p>å±æ€§</p></blockquote></h3><ul><li>åç§°ï¼šNavicat Premium</li><li>ç‰ˆæœ¬ï¼š16.2.5</li><li>å‚å•†ï¼šPremiumSoft</li><li>ç³»ç»Ÿï¼šmacOS 10.14 and later</li><li>æ¶æ„ï¼šx86(64-bit)</li></ul><h3 id="-2"><a href="#-2" class="headerlink" title=""></a><blockquote><p>è¯´æ˜</p></blockquote></h3><ul><li>æ— éœ€é¢å¤–æ¿€æ´»æ“ä½œï¼Œç›´æ¥å®‰è£…å³å¯ä½¿ç”¨</li><li>16ç‰ˆæœ¬ç›®å‰æœ‰æ— æ³•ä¿å­˜å¯†ç çš„é—®é¢˜ï¼Œä»‹æ„çš„è¯å¯ä»¥ä½¿ç”¨15ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥å…ˆç”¨15ç‰ˆæœ¬ä¿å­˜å®Œè¿æ¥é…ç½®ç„¶åå†å®‰è£…16ä¹Ÿæ˜¯å¯ä»¥çš„</li><li>ç ´è§£è½¯ä»¶å¯èƒ½éœ€è¦å…³é—­SIPæ‰èƒ½ä½¿ç”¨ï¼Œä¸è¿‡ä¸æ¨èå…³é—­SIPï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œè®©æŒ‡å®šè½¯ä»¶ç»•å¼€å¼€å‘è€…å…¬è¯æ£€æŸ¥  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo xattr -r -d com.apple.quarantine /Applications/Navicat\ Premium.app</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/Applications/Navicat\ Premium.appæ›¿æ¢æˆä½ è‡ªå·±çš„è½¯ä»¶è·¯å¾„è¾“å…¥å¯†ç å›è½¦åå³å¯ã€‚</span></span><br><span class="line">sudo spctl --master-disable</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤º è®¾ç½® -&gt; éšç§ä¸å®‰å…¨æ€§ -&gt; å…è®¸ä»»ä½•æ¥æºçš„åº”ç”¨ç¨‹åº é€‰é¡¹</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="-3"><a href="#-3" class="headerlink" title=""></a><blockquote><p>ä¸‹è½½</p></blockquote></h3><ul><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/Ali189/public/MAC%E8%BD%AF%E4%BB%B6/Navicat_Premium_16_2_5.dmg?sign=e6VlXeAo-paPEgN_a9019_ps8F4XqUe190epeKSM5ss=:1710836630"   title="V16.2.5"><i class="far fa-hand-point-right"></i><span>V16.2.5</span></a></li><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/189Cloud/app/Navicat_Premium_16_2_5.dmg?sign=3sbiq3GyjnE4mEnGPahjr2oEMMAIY1R7EMZw1Db7xEg=:1710837459"   title="V16.2.5"><i class="far fa-hand-point-right"></i><span>V16.2.5</span></a></li><li><a class="btn-beautify outline green larger" href="https://list.eber.vip:60443/d/Ali189/public/MAC%E8%BD%AF%E4%BB%B6/Navicat_Premium_15_0_36_TNT.dmg?sign=980XJDp7mPTbW-9risvteiTe14WzdzOixQpS3dYznl8=:1710917604"   title="V15.0.36"><i class="far fa-hand-point-right"></i><span>V15.0.36</span></a></li></ul>]]></content>
      
      
      <categories>
          
          <category> èµ„æºåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Macè½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis bitmapså­¦ä¹ ç¬”è®°</title>
      <link href="/post/2023/09/17/49693/"/>
      <url>/post/2023/09/17/49693/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Bitmaps are not an actual data type, but a set of bit-oriented operations defined on the String type which is treated like a bit vector. Since strings are binary safe blobs and their maximum length is 512 MB, they are suitable to set up to 2^32 different bits.</p><p>å¼•ç”¨è‡ª<a href="https://redis.io/docs/data-types/bitmaps/">å®˜æ–¹æ–‡æ¡£</a>ã€‚ç®€å•æ¥è¯´å°±æ˜¯è¿™ä¸ªbitmapsä¸æ˜¯ä¸€ä¸ªå®é™…çš„æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯å­—ç¬¦ä¸²ç±»å‹ä¸Šå®šä¹‰çš„ä¸€ç»„é¢å‘bitä½æ“ä½œï¼Œæœ€å¤§é•¿åº¦ä¸º512MBï¼Œå¯ä»¥å­˜å‚¨2^32ä¸ªä¸åŒçš„ä½ã€‚</p><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><p>æ ¹æ®<a href="https://redis.io/commands/?group=bitmap">æ–‡æ¡£</a>å¾—çŸ¥Bitmapsä¸€å…±æœ‰7ä¸ªæ“ä½œå‘½ä»¤ï¼Œåˆ†åˆ«æ˜¯ï¼šBITCOUNT BITFIELD BITFIELD_RO BITOP BITPOS GETBIT SETBITï¼Œè¿™é‡Œå…ˆè¯¦ç»†ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ã€‚</p><ol><li><mark class="hl-label orange">âœ¨SETBIT</mark> <ul><li>è¯­æ³•ï¼šSETBIT key offset value</li><li>ç”¨é€”ï¼šå°†keyçš„bitä¸‹æ ‡ä¸ºoffsetçš„å€¼è®¾ä¸ºvalue</li><li>æ–‡æ¡£ï¼š<a href="https://redis.io/commands/setbit/">redis.io</a> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- å°†key1çš„bitä¸‹æ ‡ä¸º3ä½(åé¢ç®€ç§°ç¬¬0ä½ï¼Œç¬¬3ä½...)è®¾å€¼ä¸º1</span><br><span class="line">SETBIT key1 3 1</span><br><span class="line">(integer) 0</span><br><span class="line">-- è¿™é‡Œå›æ˜¾çš„æ˜¯è¯¥ä½ä¿®æ”¹ä¹‹å‰çš„æ•°æ®å€¼</span><br></pre></td></tr></table></figure> <img src="https://up.eber.vip/Think-Me/img/main/2023/09/1694591592-202309131553442.png"><br> å¯ä»¥çœ‹åˆ°ä»å·¦åˆ°å³ç¬¬3ä½çš„å€¼ä¸º1ï¼Œå…¶ä½™ä½ä¸º0</li></ul><p> å¦‚æœæ­¤æ—¶<code>setbit key1 8 1</code>ï¼Œåˆ™ä¼šè‡ªåŠ¨æ‰©å®¹ä¸€ä¸ªå­—èŠ‚ï¼Œæ‰©å®¹åçš„å€¼ä¸ºï¼š<br> <img src="https://up.eber.vip/Think-Me/img/main/2023/09/1694591820-202309131557218.png"></p></li><li><mark class="hl-label orange">âœ¨GETBIT</mark> <ul><li>è¯­æ³•ï¼šGETBIT key offset</li><li>ç”¨é€”ï¼šè·å–keyçš„bitä¸‹æ ‡ä½offsetçš„å€¼</li><li>æ–‡æ¡£ï¼š<a href="https://redis.io/commands/getbit/">redis.io</a> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- è·å–ç¬¬3ä½çš„å€¼</span><br><span class="line">[db15] &gt; getbit key1 3</span><br><span class="line">(integer) 1</span><br><span class="line">-- è·å–ç¬¬8ä½çš„å€¼</span><br><span class="line">[db15] &gt; getbit key1 8</span><br><span class="line">(integer) 1</span><br><span class="line">-- è·å–ç¬¬0ä½çš„å€¼</span><br><span class="line">[db15] &gt; getbit key1 0</span><br><span class="line">(integer) 0</span><br></pre></td></tr></table></figure></li></ul></li><li><mark class="hl-label orange">âœ¨BITCOUNT</mark> <ul><li>è¯­æ³•ï¼šBITCOUNT key [start end [BYTE | BIT]]</li><li>ç”¨é€”ï¼šç»Ÿè®¡æ‰€æœ‰æˆ–æŒ‡å®šåŒºé—´åŒºé—´å†…1çš„æ•°é‡</li><li>æ–‡æ¡£ï¼š<a href="https://redis.io/commands/bitcount/">redis.io</a> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- å†è®¾ç½®å‡ ä½ï¼Œä¾¿äºä¸¾ä¾‹</span><br><span class="line">[db15] &gt; setbit key1 2 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 9 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 12 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 18 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 19 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 20 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 28 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 34 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit key1 36 1</span><br><span class="line">(integer) 0</span><br><span class="line">-- ç°åœ¨key1çš„äºŒè¿›åˆ¶å€¼ä¸º 00110000 11001000 00111000 00001000 00101000 ä¾¿äºæŸ¥çœ‹æ¯ä¸ªå­—èŠ‚ä¸­é—´æœ‰ç©ºæ ¼éš”å¼€</span><br><span class="line">-- ç¬¬ä¸€å­—èŠ‚æœ‰2ä¸ª1ï¼Œç¬¬äºŒå­—èŠ‚æœ‰3ä¸ª1ï¼Œç¬¬ä¸‰å­—èŠ‚æœ‰3ä¸ª1ï¼Œç¬¬å››ä¸ªå­—èŠ‚æœ‰1ä¸ª1ï¼Œç¬¬äº”ä¸ªå­—èŠ‚æœ‰2ä¸ª1ï¼Œæ‰€ä»¥æ€»å…±æœ‰11ä¸ª1</span><br><span class="line">-- è·å–æ‰€æœ‰1çš„æ•°é‡</span><br><span class="line">[db15] &gt; bitcount key1</span><br><span class="line">(integer) 11</span><br><span class="line">-- è·å–ç¬¬ä¸€å­—èŠ‚ä¸­1çš„æ•°é‡ ç­‰åŒäº bitcount key1 0 0 byte</span><br><span class="line">[db15] &gt; bitcount key1 0 0</span><br><span class="line">(integer) 2</span><br><span class="line">[db15] &gt; bitcount key1 0 0 byte</span><br><span class="line">(integer) 2</span><br><span class="line">-- è·å–ç¬¬0ä½åˆ°ç¬¬7ä½çš„1çš„æ•°é‡</span><br><span class="line">[db15] &gt; bitcount key1 0 7 bit</span><br><span class="line">(integer) 2</span><br><span class="line">-- è·å–å€’æ•°ç¬¬äºŒå­—èŠ‚åˆ°å€’æ•°ç¬¬ä¸€å­—èŠ‚1çš„æ•°é‡ æ³¨æ„ï¼šä¸€å®šè¦æ˜¯ä»å·¦å¾€å³çš„é¡ºåº</span><br><span class="line">[db15] &gt; bitcount key1 -2 -1</span><br><span class="line">(integer) 3</span><br><span class="line">-- è·å–å€’æ•°ç¬¬4ä½åˆ°å€’æ•°ç¬¬1ä½1çš„æ•°é‡  ç”±æ­¤å¯å¾— æ­£å‘ä¸‹æ ‡æ˜¯ä»0å¼€å§‹è®¡æ•°ï¼Œè€Œå€’æ•°æ˜¯ä»1å¼€å§‹è®¡æ•°</span><br><span class="line">[db15] &gt; bitcount key1 -4 -1 bit</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure></li></ul></li><li><mark class="hl-label orange">âœ¨BITPOS</mark> <ul><li>è¯­æ³•ï¼šBITPOS key bit [start [end [BYTE | BIT]]]</li><li>ç”¨é€”ï¼šè·å–æ‰€æœ‰æˆ–æŒ‡å®šåŒºé—´å†…ç¬¬ä¸€ä¸ªæŒ‡å®šbitå€¼[0 | 1]çš„ä¸‹æ ‡</li><li>æ–‡æ¡£ï¼š<a href="https://redis.io/commands/bitpos/">redis.io</a> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- key1: 00110000 11001000 00111000 00001000 00101000</span><br><span class="line">-- è·å–ç¬¬ä¸€ä¸ª0å€¼çš„ä¸‹æ ‡</span><br><span class="line">[db15] &gt; bitpos key1 0</span><br><span class="line">(integer) 0</span><br><span class="line">-- è·å–ç¬¬ä¸€ä¸ª1å€¼çš„ä¸‹æ ‡</span><br><span class="line">[db15] &gt; bitpos key1 1</span><br><span class="line">(integer) 2</span><br><span class="line">-- ä»ç¬¬1ä½å¼€å§‹åˆ°ç¬¬å››ä½çš„ç¬¬ä¸€ä¸ª1çš„ä¸‹æ ‡ è¿™é‡Œçš„ä¸‹æ ‡è¿˜æ˜¯æ€»æ•°æ®çš„ä¸‹æ ‡</span><br><span class="line">[db15] &gt; bitpos key1 1 1 4 bit</span><br><span class="line">(integer) 2</span><br><span class="line">-- å¦‚æœæ²¡æœ‰åˆ™è¿”å›-1 å¦‚æœkeyä¸å­˜åœ¨ä¹Ÿè¿”å›-1</span><br><span class="line">[db15] &gt; bitpos key1 1 4 6 bit</span><br><span class="line">(integer) -1</span><br><span class="line">-- ä»ç¬¬äºŒå­—èŠ‚åˆ°ç¬¬äºŒå­—èŠ‚çš„ç¬¬ä¸€ä¸ª1çš„ä¸‹æ ‡</span><br><span class="line">[db15] &gt; bitpos key1 1 2 2 byte</span><br><span class="line">(integer) 18</span><br></pre></td></tr></table></figure></li></ul></li><li><mark class="hl-label orange">âœ¨BITOP</mark> <ul><li>è¯­æ³•ï¼šBITOP &lt;AND | OR | XOR | NOT&gt; destkey key [key â€¦]</li><li>ç”¨é€”ï¼šå¯¹å¤šä¸ªkeyè¿›è¡Œä½è¿ç®—(ä¸ &amp;ï¼Œæˆ– |ï¼Œå¼‚æˆ– ^ï¼Œéæˆ–è€…å«å–å ~)ï¼Œç»“æœä¿å­˜åˆ°destkeyä¸­</li><li>æ–‡æ¡£ï¼š<a href="https://redis.io/commands/bitop/">redis.io</a> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[db15] &gt; setbit op1 1 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit op1 3 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit op1 5 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit op2 4 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; setbit op2 6 1</span><br><span class="line">(integer) 0</span><br><span class="line">[db15] &gt; bitop and d1 op1 op2</span><br><span class="line">(integer) 1</span><br><span class="line">-- op1: 01010100</span><br><span class="line">-- op2: 00001010</span><br><span class="line">-- d1:  00000000</span><br><span class="line">[db15] &gt; bitop or d2 op1 op2</span><br><span class="line">(integer) 1</span><br><span class="line">-- d2: 01011110</span><br><span class="line">[db15] &gt; bitop xor d3 op1 op2</span><br><span class="line">(integer) 1</span><br><span class="line">-- d3: 01011110</span><br><span class="line">[db15] &gt; bitop not d4 op1</span><br><span class="line">(integer) 1</span><br><span class="line">-- d4: 10101011</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="å®é™…åº”ç”¨"><a href="#å®é™…åº”ç”¨" class="headerlink" title="å®é™…åº”ç”¨"></a>å®é™…åº”ç”¨</h3><p>ç”±ä¸Šè¿°çš„æ“ä½œå‘½ä»¤å¯ä»¥çœ‹å‡ºï¼ŒBitmapsçš„åº”ç”¨åœºæ™¯ä¸»è¦æ˜¯ç»Ÿè®¡å’Œåˆ¤æ–­ï¼Œæ¯”å¦‚ç­¾åˆ°ï¼Œæ´»è·ƒç”¨æˆ·ï¼Œç”¨æˆ·åœ¨çº¿çŠ¶æ€ç­‰ç­‰ã€‚è¿™é‡Œä»¥ç­¾åˆ°ä¸ºä¾‹ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç”¨æˆ·idä¸º1ï¼Œæ¯å¤©ç­¾åˆ°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸€ä¸ªkeyæ¥å­˜å‚¨ç”¨æˆ·çš„ç­¾åˆ°æƒ…å†µï¼Œæ¯”å¦‚keyä¸ºsign:1ï¼Œå¯ä»¥å¤„ç†çš„åœºæ™¯å¤§æ¦‚æœ‰ï¼š</p><ul><li>ç”¨æˆ·ç­¾åˆ°</li><li>æŸ¥è¯¢ç”¨æˆ·æŸå¤©æ˜¯å¦ç­¾åˆ°</li><li>ç»Ÿè®¡æŒ‡å®šç”¨æˆ·çš„ç´¯è®¡ç­¾åˆ°å¤©æ•°</li><li>â€¦â€¦ è‡ªå·±å‘æŒ¥æƒ³è±¡<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- ç”¨æˆ·ç­¾åˆ°  è®°å½•ç”¨æˆ·IDä¸º1çš„ç”¨æˆ·ç¬¬ä¸€å¤©ç­¾åˆ°</span><br><span class="line">[db15] &gt; setbit sign:1 0 1</span><br><span class="line">-- ç”¨æˆ·ç­¾åˆ°  è®°å½•ç”¨æˆ·IDä¸º1çš„ç”¨æˆ·ç¬¬äºŒå¤©ç­¾åˆ° åé¢ä»¥æ­¤ç±»æ¨</span><br><span class="line">[db15] &gt; setbit sign:1 1 1</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢ç”¨æˆ·IDä¸º1çš„ç”¨æˆ·ç¬¬ä¸€å¤©æ˜¯å¦ç­¾åˆ°</span><br><span class="line">[db15] &gt; getbit sign:1 0</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡ç”¨æˆ·IDä¸º1çš„ç”¨æˆ·çš„ç´¯è®¡ç­¾åˆ°å¤©æ•°</span><br><span class="line">[db15] &gt; bitcount sign:1</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡ç”¨æˆ·IDä¸º1çš„ç”¨æˆ·åœ¨å‰ä¸ƒå¤©çš„ç­¾åˆ°æƒ…å†µ</span><br><span class="line">[db15] &gt; bitcount sign:1 0 6</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="ç•™ä¸ªå‘ç­‰åé¢å¡«"><a href="#ç•™ä¸ªå‘ç­‰åé¢å¡«" class="headerlink" title="ç•™ä¸ªå‘ç­‰åé¢å¡«"></a>ç•™ä¸ªå‘ç­‰åé¢å¡«</h3><p>BITFIELD å’Œ BITFIELD_RO çš„è¯¦ç»†ä½¿ç”¨æš‚æ—¶æ²¡æœ‰ä»‹ç»ï¼Œç­‰åç»­æœ‰æ—¶é—´å†è¡¥å……ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>brewå®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶</title>
      <link href="/post/2023/08/09/41685/"/>
      <url>/post/2023/08/09/41685/</url>
      
        <content type="html"><![CDATA[<h2 id="brewå®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶"><a href="#brewå®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶" class="headerlink" title="brewå®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶"></a>brewå®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶</h2><ul><li>è¯¥æ•™ç¨‹ä¸€å…±å°±ä¸¤æ­¥ï¼Œéå¸¸ç®€å•ï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½ä¸çŸ¥é“ï¼Œæ‰€ä»¥å†™ä¸‹æ¥ï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥é˜…ã€‚è¿™é‡Œç”¨tailscaleä¸ºä¾‹ï¼Œå…¶ä»–è½¯ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</li></ul><ol><li><p>æ‰¾åˆ°è½¯ä»¶å¯¹åº”ç‰ˆæœ¬çš„rbæ–‡ä»¶</p><p> è®¿é—®<a href="https://formulae.brew.sh/">brew</a>å®˜ç½‘ï¼Œåœ¨æœç´¢æ¡†é‡Œæœè½¯ä»¶åç§°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/../img/brew/1691566585-202308091536730.png" alt="1691566585-202308091536730.png"><br> ç‚¹å‡»ä¸Šå›¾ä¸­çº¢æ¡†åœˆèµ·æ¥çš„<mark class="hl-label pink">tailscale.rb</mark> ï¼Œè¿›å…¥githubï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/../img/brew/1691566704-202308091538628.png" alt="1691566704-202308091538628.png"><br> ç‚¹å‡»ä¸Šå›¾ä¸­çº¢æ¡†åœˆèµ·æ¥çš„<mark class="hl-label pink">History</mark> ï¼Œè¿›å…¥rbæ–‡ä»¶çš„æäº¤å†å²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/../img/brew/1691566855-202308091540352.png" alt="1691566855-202308091540352.png"><br> æ¯”å¦‚ç°åœ¨tailscaleçš„æœ€æ–°ç‰ˆæœ¬æ˜¯1.46.1ï¼Œæˆ‘æƒ³å®‰è£…1.44.2ã€‚é‚£ä¹ˆå°±å»ç‚¹å‡»ä¸Šå›¾ä¸­çº¢æ¡†åœˆèµ·æ¥çš„æŒ‰é’®ï¼Œè¿›å…¥è¯¥ç‰ˆæœ¬rbæ–‡ä»¶é¢„è§ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/../img/brew/1691566998-202308091543075.png" alt="1691566998-202308091543075.png"><br> ç‚¹å‡»ä¸Šå›¾ä¸­çº¢æ¡†åœˆèµ·æ¥çš„ä¸‹è½½æŒ‰é’®å³å¯å¾—åˆ°è¯¥ç‰ˆæœ¬çš„rbæ–‡ä»¶ã€‚</p></li><li><p>å®‰è£…rbæ–‡ä»¶å¯¹åº”ç‰ˆæœ¬çš„è½¯ä»¶</p><p> æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ<code>brew install --formula /path/to/tailscale.rb</code>å³å¯å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„è½¯ä»¶ã€‚</p></li></ol><ul><li>æ³¨æ„ï¼štailscale.rbçš„è·¯å¾„ä¸€å®šä¸è¦æé”™ï¼Œå¹¶ä¸”rbæ–‡ä»¶åå¿…é¡»ä¸ºè½¯ä»¶åŒ…çš„åç§°ï¼Œä¸èƒ½è‡ªå·±éšæ„ä¿®æ”¹åç§°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> brew </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†ChatGPTå¯¹æ¥åˆ°é£ä¹¦æˆ–é’‰é’‰2-åˆ›å»ºæ¨¡å‹å¹¶å¯¹æ¥</title>
      <link href="/post/2023/08/08/49000/"/>
      <url>/post/2023/08/08/49000/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€-åˆ›å»ºAzure-OpenAIæ¨¡å‹"><a href="#ä¸€ã€-åˆ›å»ºAzure-OpenAIæ¨¡å‹" class="headerlink" title="ä¸€ã€ åˆ›å»ºAzure OpenAIæ¨¡å‹"></a>ä¸€ã€ åˆ›å»ºAzure OpenAIæ¨¡å‹</h2><ol><li>åœ¨æœç´¢æ¡†ä¸­ç›´æ¥æœopenaiï¼Œç„¶åç‚¹å‡»è¿›å…¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054260-202308031717925.png"></li><li>ç‚¹å‡»ä¸Šå›¾é¡µé¢ä¸Šçš„åˆ›å»ºAzure OpenAIæŒ‰é’®è·³è½¬åˆ°å¦‚ä¸‹é¡µé¢ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691483756-202308081635082.png"></li><li>ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ï¼Œè·³è½¬åˆ°å¦‚ä¸‹é¡µé¢ï¼šè¿™é‡Œé€‰æ‹©æ‰€æœ‰ç½‘ç»œå³å¯<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691549015-202308091043852.png"></li><li>åé¢çš„éƒ½æ˜¯é»˜è®¤çš„ï¼Œæœ€åç‚¹å‡»åˆ›å»ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691549133-202308091045549.png"></li><li>éƒ¨ç½²å®Œæˆåï¼Œç‚¹å‡»â€è½¬åˆ°èµ„æºâ€åˆ°å¦‚ä¸‹é¡µé¢ï¼šè®°å½•ä¸€ä¸‹<mark class="hl-label pink">ç»ˆç»“ç‚¹</mark> å’Œç†å¯†é’¥ä¸­<mark class="hl-label pink">å¯†é’¥1æˆ–å¯†é’¥2</mark> ï¼Œåé¢ä¼šç”¨åˆ°<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691549539-202308091052043.png"><br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691549643-202308091054146.png"></li><li>å†ç‚¹å‡»ä¸Šå›¾å·¦ä¾§â€æ¨¡å‹éƒ¨ç½²â€è¿›å…¥Azure OpenAI Studioé¡µé¢ï¼šè¿™é‡Œè®°å½•ä¸€ä¸‹<mark class="hl-label pink">éƒ¨ç½²å</mark> åé¢è¦ç”¨åˆ°<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691549845-202308091057363.png"></li><li>åˆ›å»ºå®Œæˆä¹‹åç‚¹å‡»å·¦ä¾§â€èŠå¤©â€èœå•ï¼Œéšä¾¿è¾“å‡ºä¸€å¥è¯ç‚¹å‡»â€å‘é€â€ï¼Œç„¶åç‚¹å‡»â€æŸ¥çœ‹ä»£ç â€ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691550170-202308091102357.png"><br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691550247-202308091104331.png"></li><li>è®°å½•ä¸€ä¸‹ä»£ç ä¸­çš„openai.api_versionçš„å€¼ï¼Œæˆ‘è¿™é‡Œæ˜¯<mark class="hl-label pink">2023-03-15-preview</mark> </li><li>OKï¼Œç°åœ¨éœ€è¦çš„å‚æ•°éƒ½å·²ç»è·å–å®Œæ¯•ï¼ä¸‹é¢å°±æ˜¯æ­£å¼å¯¹æ¥é£ä¹¦æˆ–é’‰é’‰äº†ã€‚</li></ol><h2 id="äºŒã€-å¯¹æ¥é£ä¹¦"><a href="#äºŒã€-å¯¹æ¥é£ä¹¦" class="headerlink" title="äºŒã€ å¯¹æ¥é£ä¹¦"></a>äºŒã€ å¯¹æ¥é£ä¹¦</h2><ol><li>é£ä¹¦å¼€å‘è€…å¹³å°çš„æ“ä½œåœ¨<a href="https://github.com/ConnectAI-E/Feishu-OpenAI#%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4">GitHub</a>ä¸Šå·²ç»æœ‰æ•™ç¨‹äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</li><li>ä½¿ç”¨dockeræ–¹å¼éƒ¨ç½²ConnectAI-E&#x2F;Feishu-OpenAIé¡¹ç›®ï¼Œç”±äºä½œè€…æ²¡æœ‰æ‰“é•œåƒï¼Œè¿™é‡Œä½¿ç”¨æˆ‘æ„å»ºçš„é•œåƒå³å¯ã€‚æŠŠ{}ä¸­çš„å†…å®¹æ›¿æ¢æˆä½ è‡ªå·±çš„å³å¯ã€‚<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d --name feishu-chatgpt -p 9000:9000 \</span><br><span class="line">--env APP_ID=&#123;é£ä¹¦åº”ç”¨å‡­è¯ä¸­çš„ App Id&#125; \</span><br><span class="line">--env APP_SECRET=&#123;é£ä¹¦åº”ç”¨å‡­è¯ä¸­çš„ App Secret&#125; \</span><br><span class="line">--env APP_ENCRYPT_KEY=&#123;é£ä¹¦åº”ç”¨-äº‹ä»¶è®¢é˜…ä¸­çš„ Encrypt Key&#125; \</span><br><span class="line">--env APP_VERIFICATION_TOKEN=&#123;é£ä¹¦åº”ç”¨-äº‹ä»¶è®¢é˜…ä¸­çš„ Verification Token&#125; \</span><br><span class="line">--env BOT_NAME=&#123;é£ä¹¦åº”ç”¨-æœºå™¨äººçš„åå­—&#125; \</span><br><span class="line">--env AZURE_ON=true \</span><br><span class="line">--env AZURE_API_VERSION=&#123;å‰é¢ç¬¬8æ­¥è·å–çš„openai.api_version æˆ‘çš„æ˜¯2023-03-15-preview&#125; \</span><br><span class="line">--env AZURE_RESOURCE_NAME=&#123;å‰é¢ç¬¬5æ­¥è·å–çš„ç»ˆç»“ç‚¹åŸŸåçš„å‰ç¼€ æˆ‘çš„æ˜¯eber-test1&#125; \</span><br><span class="line">--env AZURE_DEPLOYMENT_NAME=&#123;å‰é¢ç¬¬6æ­¥è·å–çš„éƒ¨ç½²å æˆ‘çš„æ˜¯ebervip&#125; \</span><br><span class="line">--env AZURE_OPENAI_TOKEN=&#123;å‰é¢ç¬¬5æ­¥è·å–çš„å¯†é’¥1æˆ–å¯†é’¥2&#125; \</span><br><span class="line">717160040/openai:feishu.v1 # è¿™é‡Œé•œåƒåé»˜è®¤æ˜¯armçš„ï¼Œå¦‚æœæ˜¯amd64çš„è¯·ä½¿ç”¨717160040/openai:feishu_amd64_v1</span><br></pre></td></tr></table></figure></li></ol><ul><li>å…¨éƒ¨æå®šåï¼Œå¯ä»¥åœ¨é£ä¹¦ç¾¤ä¸­å°†æœºå™¨äººæ‹‰å…¥ç¾¤ï¼Œç„¶å@æœºå™¨äººè§¦å‘ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691551529-202308091125102.png"></li><li>ä¹Ÿå¯ä»¥ç§èŠã€‚æ³¨æ„è¿ç»­å¯¹è¯éœ€è¦ç”¨å›å¤çš„æ–¹å¼å›å¤æœºå™¨äººï¼Œå¦åˆ™æœºå™¨äººä¼šè®¤ä¸ºæ˜¯æ–°çš„å¯¹è¯ã€‚</li><li>å‘é€å¸®åŠ©åˆ™å¯ä»¥æŸ¥çœ‹ä¸€äº›ç‰¹å®šæŒ‡ä»¤ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691551684-202308091128584.png"></li></ul><h2 id="ä¸‰ã€-å¯¹æ¥é’‰é’‰"><a href="#ä¸‰ã€-å¯¹æ¥é’‰é’‰" class="headerlink" title="ä¸‰ã€ å¯¹æ¥é’‰é’‰"></a>ä¸‰ã€ å¯¹æ¥é’‰é’‰</h2><ol><li>åŒæ ·é’‰é’‰å¼€å‘è€…å¹³å°çš„æ“ä½œåœ¨<a href="https://github.com/ConnectAI-E/Dingtalk-OpenAI#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E6%B7%BB%E5%8A%A0%E5%BA%94%E7%94%A8">GitHub</a>ä¸Šå·²ç»æœ‰æ•™ç¨‹äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</li><li>ç‚¹å‡»è¿™é‡Œä¸‹è½½<a href="https://raw.githubusercontent.com/ConnectAI-E/Dingtalk-OpenAI/main/docker-compose.yml">docker-compose.yml</a>ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨docker-composeæ–¹å¼éƒ¨ç½²ConnectAI-E&#x2F;Dingtalk-OpenAIé¡¹ç›®ã€‚å‚ç…§ä¸‹é¢çš„æè¿°å»ä¿®æ”¹ä¸‹è½½çš„ymlæ–‡ä»¶ï¼Œä¸‹é¢æˆ‘åªåˆ—å‡ºéœ€è¦ä¿®æ”¹çš„é…ç½®é¡¹ï¼Œç‰¹åˆ«è¦æ³¨æ„å¸¦âš ï¸çš„é…ç½®é¡¹ã€‚<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">   <span class="attr">chatgpt:</span></span><br><span class="line">      <span class="attr">container_name:</span> <span class="string">chatgpt</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/ali_eryajf/chatgpt-dingtalk</span></span><br><span class="line">      <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">      <span class="attr">environment:</span></span><br><span class="line">         <span class="attr">APIKEY:</span>   <span class="comment"># âš ï¸æˆ‘ä»¬ç”¨çš„æ˜¯azureï¼Œè¿™é‡Œç›´æ¥ç•™ç©º</span></span><br><span class="line">         <span class="attr">RUN_MODE:</span> <span class="string">&quot;stream&quot;</span>  <span class="comment"># è¿è¡Œæ¨¡å¼ï¼Œhttp æˆ–è€… stream ï¼Œå¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨streamæ¨¡å¼ï¼Œé€šè¿‡æ­¤é“¾æ¥äº†è§£ï¼šhttps://open.dingtalk.com/document/isvapp/stream</span></span><br><span class="line">         <span class="attr">BASE_URL:</span> <span class="string">&quot;&quot;</span>  <span class="comment"># âš ï¸æˆ‘ä»¬ç”¨çš„æ˜¯azureï¼Œè¿™é‡Œç›´æ¥ç•™ç©º</span></span><br><span class="line">         <span class="attr">MODEL:</span> <span class="string">&quot;&quot;</span> <span class="comment"># âš ï¸æˆ‘ä»¬ç”¨çš„æ˜¯azureï¼Œè¿™é‡Œç›´æ¥ç•™ç©º</span></span><br><span class="line">         <span class="attr">DEFAULT_MODE:</span> <span class="string">&quot;ä¸²èŠ&quot;</span> <span class="comment"># æŒ‡å®šé»˜è®¤çš„å¯¹è¯æ¨¡å¼ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä¸ºå•èŠï¼Œå³æ— ä¸Šä¸‹æ–‡å…³è”çš„å¯¹è¯æ¨¡å¼</span></span><br><span class="line">         <span class="attr">PORT:</span> <span class="number">8090</span> <span class="comment"># æŒ‡å®šæœåŠ¡å¯åŠ¨ç«¯å£ï¼Œé»˜è®¤ä¸º 8090ï¼Œå®¹å™¨åŒ–éƒ¨ç½²æ—¶ï¼Œä¸éœ€è¦è°ƒæ•´ï¼Œä¸€èˆ¬åœ¨äºŒè¿›åˆ¶å®¿ä¸»æœºéƒ¨ç½²æ—¶ï¼Œé‡åˆ°ç«¯å£å†²çªæ—¶ä½¿ç”¨ï¼Œå¦‚æœrun_modeä¸ºstreamæ¨¡å¼ï¼Œåˆ™å¯ä»¥å¿½ç•¥è¯¥é…ç½®é¡¹</span></span><br><span class="line">         <span class="attr">SERVICE_URL:</span> <span class="string">&quot;http://1.1.1.1:8090&quot;</span>  <span class="comment"># âš ï¸æœåŠ¡çš„åœ°å€ ä¾‹å¦‚ä½ æœåŠ¡å™¨IPæ˜¯1.1.1.1 åˆ™ä¸ºhttp://1.1.1.1:8090</span></span><br><span class="line">         <span class="attr">CHAT_TYPE:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">         <span class="attr">APP_SECRETS:</span> <span class="string">&quot;&#123;é’‰é’‰æœºå™¨äººåœ¨åº”ç”¨ä¿¡æ¯ä¸­çš„AppSecret&#125;&quot;</span> <span class="comment"># é’‰é’‰æœºå™¨äººåœ¨åº”ç”¨ä¿¡æ¯ä¸­çš„AppSecretï¼Œä¸ºäº†æ ¡éªŒå›è°ƒçš„è¯·æ±‚æ˜¯å¦åˆæ³•ï¼Œå¦‚æœç•™ç©ºï¼Œå°†ä¼šå¿½ç•¥æ ¡éªŒï¼Œåˆ™è¯¥æ¥å£å°†ä¼šå­˜åœ¨å…¶ä»–äººä¹Ÿèƒ½éšæ„è°ƒç”¨çš„å®‰å…¨éšæ‚£ï¼Œå› æ­¤å¼ºçƒˆå»ºè®®é…ç½®æ­£ç¡®çš„secretï¼Œå¦‚æœä½ çš„æœåŠ¡å¯¹æ¥ç»™å¤šä¸ªæœºå™¨äººï¼Œè¿™é‡Œå¯ä»¥é…ç½®å¤šä¸ªæœºå™¨äººçš„secretï¼Œæ¯”å¦‚ &quot;xxxx,yyyy&quot;</span></span><br><span class="line">         <span class="attr">SENSITIVE_WORDS:</span> <span class="string">&quot;&quot;</span> <span class="comment"># æ•æ„Ÿè¯ï¼Œæé—®æ—¶è§¦å‘ï¼Œåˆ™ä¸å…è®¸æé—®ï¼Œå›ç­”çš„å†…å®¹ä¸­è§¦å‘ï¼Œåˆ™ä»¥ ğŸš« ä»£æ›¿</span></span><br><span class="line">         <span class="attr">AZURE_ON:</span> <span class="string">&quot;true&quot;</span> <span class="comment"># âš ï¸æ˜¯å¦èµ°Azure OpenAi API, é»˜è®¤false ,å¦‚æœä¸ºtrueï¼Œåˆ™éœ€è¦é…ç½®ä¸‹è¾¹çš„å››ä¸ªå‚æ•°</span></span><br><span class="line">         <span class="attr">AZURE_API_VERSION:</span> <span class="string">&quot;&quot;</span> <span class="comment"># âš ï¸å‚è€ƒä¸Šé¢é£ä¹¦çš„é…ç½®è¯´æ˜</span></span><br><span class="line">         <span class="attr">AZURE_RESOURCE_NAME:</span> <span class="string">&quot;&quot;</span> <span class="comment"># âš ï¸å‚è€ƒä¸Šé¢é£ä¹¦çš„é…ç½®è¯´æ˜</span></span><br><span class="line">         <span class="attr">AZURE_DEPLOYMENT_NAME:</span> <span class="string">&quot;&quot;</span> <span class="comment"># âš ï¸å‚è€ƒä¸Šé¢é£ä¹¦çš„é…ç½®è¯´æ˜</span></span><br><span class="line">         <span class="attr">AZURE_OPENAI_TOKEN:</span> <span class="string">&quot;&quot;</span> <span class="comment"># âš ï¸å‚è€ƒä¸Šé¢é£ä¹¦çš„é…ç½®è¯´æ˜</span></span><br><span class="line">         <span class="attr">DINGTALK_CREDENTIALS:</span> <span class="string">&quot;xxx:xxxxxxxxxxxxxx&quot;</span> <span class="comment"># âš ï¸ # é’‰é’‰åº”ç”¨è®¿é—®å‡­è¯ï¼Œæ¯”å¦‚ client_id1:secret1 æ˜¯éœ€è¦æŠŠè¿™ä¿©æ‹¼ä¸€èµ·çš„ï¼Œä¸­é—´ç”¨å†’å·éš”å¼€ï¼Œå¦‚æœä½ çš„æœåŠ¡å¯¹æ¥ç»™å¤šä¸ªæœºå™¨äººï¼Œè¿™é‡Œå¯ä»¥é…ç½®å¤šä¸ªæœºå™¨äººçš„å‡­è¯ï¼Œæ¯”å¦‚ &quot;client_id1:secret1,client_id2:secret2&quot;</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">./data:/app/data</span></span><br><span class="line">      <span class="attr">ports:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">&quot;8090:8090&quot;</span></span><br><span class="line">      <span class="attr">extra_hosts:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">host.docker.internal:host-gateway</span></span><br></pre></td></tr></table></figure></li></ol><ul><li>åŒæ ·ï¼Œå…¨éƒ¨æå®šåï¼Œå¯ä»¥åœ¨é’‰é’‰ç¾¤ä¸­å°†æœºå™¨äººæ‹‰å…¥ç¾¤ï¼Œç„¶å@æœºå™¨äººè§¦å‘æˆ–è€…ç§èŠè§¦å‘ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691552985-202308091149467.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> çæŠ˜è…¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
            <tag> OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†ChatGPTå¯¹æ¥åˆ°é£ä¹¦æˆ–é’‰é’‰1-ç”³è¯·Azure OpenAI</title>
      <link href="/post/2023/08/03/49000/"/>
      <url>/post/2023/08/03/49000/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€-æ³¨å†ŒAzureè´¦å·"><a href="#ä¸€ã€-æ³¨å†ŒAzureè´¦å·" class="headerlink" title="ä¸€ã€ æ³¨å†ŒAzureè´¦å·"></a>ä¸€ã€ æ³¨å†ŒAzureè´¦å·</h2><p>ç‚¹å‡»è¿™é‡Œ <a href="https://portal.azure.com/">Azure</a> è¿›å…¥Azureå®˜ç½‘ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ³¨å†Œæ—¶éœ€è¦ç»‘å®šä¸€å¼ ä¿¡ç”¨å¡ï¼Œä½†æ˜¯ä¸ä¼šæ‰£è´¹ï¼Œåªæ˜¯ä¸ºäº†éªŒè¯ä½ çš„èº«ä»½ã€‚</p><ul><li>å¦‚æœä½ æ²¡æœ‰ä¿¡ç”¨å¡ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://privacy.com/">Privacy</a> ç”Ÿæˆä¸€å¼ è™šæ‹Ÿä¿¡ç”¨å¡ï¼Œç„¶åç»‘å®šåˆ°Azureè´¦å·ä¸Šã€‚</li><li>å¦‚æœä½ æœ‰Azure100ç¾åˆ€çš„å­¦ç”Ÿè®¢é˜…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­¦ç”Ÿè®¢é˜…çš„è´¦å·ã€‚</li></ul><h2 id="äºŒã€-å‡†å¤‡ç”³è¯·"><a href="#äºŒã€-å‡†å¤‡ç”³è¯·" class="headerlink" title="äºŒã€ å‡†å¤‡ç”³è¯·"></a>äºŒã€ å‡†å¤‡ç”³è¯·</h2><ol><li>åœ¨æœç´¢æ¡†ä¸­ç›´æ¥æœopenaiï¼Œç„¶åç‚¹å‡»è¿›å…¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054260-202308031717925.png"></li><li>ç‚¹å‡»ä¸Šå›¾é¡µé¢ä¸Šçš„åˆ›å»ºAzure OpenAIæŒ‰é’®è·³è½¬åˆ°å¦‚ä¸‹é¡µé¢ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054450-202308031720387.png"></li><li>ç‚¹å‡»â€å•å‡»æ­¤å¤„è¯·æ±‚è®¿é—®Azure OpenAIæœåŠ¡â€ï¼Œè·³è½¬åˆ°å¦‚ä¸‹é¡µé¢ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054655-202308031724685.png"></li><li>å¡«å†™å¯¹åº”ä¿¡æ¯å³å¯ç”³è¯·</li><li>æäº¤ç”³è¯·åï¼Œä¼šæ”¶åˆ°ä¸€å°é‚®ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691055022-202308031730342.png"></li><li>å¤§æ¦‚ä¸€ä¸ªå·¥ä½œæ—¥å°±ä¼šæ”¶åˆ°ç»“æœï¼ŒæˆåŠŸçš„é‚®ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691055165-202308031732786.png"></li></ol><h2 id="ä¸‰ã€-ç”³è¯·æ³¨æ„äº‹é¡¹"><a href="#ä¸‰ã€-ç”³è¯·æ³¨æ„äº‹é¡¹" class="headerlink" title="ä¸‰ã€ ç”³è¯·æ³¨æ„äº‹é¡¹"></a>ä¸‰ã€ ç”³è¯·æ³¨æ„äº‹é¡¹</h2><ol><li>å¤§éƒ¨åˆ†é—®é¢˜éƒ½éšä¾¿å¡«å†™å³å¯ï¼Œåªè¦ä¸æ˜¯å¤ªç¦»è°±å°±è¡Œã€‚</li><li>è®¢é˜…IDä¸€å®šä¸€å®šä¸€å®šä¸è¦å¡«å†™é”™è¯¯ï¼<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054970-202308031729943.png"></li><li>è¿™é‡Œçš„é‚®ç®±ä¸€å®šè¦å¡«å†™ä¼ä¸šé‚®ç®±(å¯ä»¥æ˜¯è‡ªå·±æ­å»ºçš„åŸŸåé‚®ç®±)<br><img src="https://up.eber.vip/Think-Me/img/main/2023/08/1691054790-202308031726926.png"></li></ol>]]></content>
      
      
      <categories>
          
          <category> çæŠ˜è…¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
            <tag> OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Actionä½¿ç”¨è‡ªæœ‰æœåŠ¡å™¨è·‘ä»»åŠ¡</title>
      <link href="/post/2023/06/30/43308/"/>
      <url>/post/2023/06/30/43308/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>æ¥ä¸Šå›ä¹¦ <a href="https://eber.vip/post/2023/04/14/17500/">ã€ŠGitHub Actionç¬”è®°ã€‹</a> ï¼Œå®˜æ–¹æ˜¯æœ‰ä¸€å®šå…è´¹é¢åº¦çš„ï¼Œå¦‚æœè¿™ä¸ªé¢åº¦ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿæˆ–è€…æ˜¯è‡ªå·±æƒ³è¦ä¸€ä¸ªæ»¡è¶³è‡ªå·±ç‰¹å®šéœ€æ±‚çš„å®šåˆ¶åŒ–workflowæœåŠ¡å™¨æ€ä¹ˆåŠï¼Ÿ</p><p>æœ¬æ¬¡æˆ‘ä»¬å°±ä¸»è¦è®²è¿°å¦‚ä½•ä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨è·‘GitHub Actionä»»åŠ¡ã€‚æœ¬æ–‡å‚ç…§çš„æ˜¯ <a href="https://docs.github.com/zh/actions/hosting-your-own-runners/managing-self-hosted-runners/adding-self-hosted-runners">å®˜æ–¹æ–‡æ¡£-æ·»åŠ è‡ªæ‰˜ç®¡çš„è¿è¡Œå™¨</a>ã€‚</p><h3 id="æœåŠ¡å™¨é…ç½®"><a href="#æœåŠ¡å™¨é…ç½®" class="headerlink" title="æœåŠ¡å™¨é…ç½®"></a>æœåŠ¡å™¨é…ç½®</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€å°æœåŠ¡å™¨ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ <mark class="hl-label pink">Oracleæ–°åŠ å¡</mark>  X86_64æ¶æ„çš„æœåŠ¡å™¨ï¼Œé…ç½®ä¸º2C1Gã€‚</p><p>æ ¹æ®æ–‡æ¡£ä»‹ç»æˆ‘ä»¬éœ€è¦åˆ°å¯¹åº”çš„ä»“åº“çš„è®¾ç½®ä¸­æ‰¾åˆ° <code>Actions</code>ï¼Œç„¶åç‚¹å‡» <code>runner</code>ï¼Œç„¶åæ ¹æ®æç¤ºä¸‹è½½å¯¹åº”çš„è¿è¡Œå™¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688109001-202306301510042.png"></p><p>æ¥ä¸‹æ¥å°±æ˜¯æ— è„‘æ‰§è¡Œæç¤ºçš„å‘½ä»¤å°±è¡Œäº†[ä¸è¦ç…§æŠ„æˆ‘çš„ï¼Œä¸è¦ç…§æŠ„æˆ‘çš„ï¼Œä¸è¦ç…§æŠ„æˆ‘çš„] ç”¨ä½ è‡ªå·±é¡µé¢ä¸Šå®é™…æ˜¾ç¤ºçš„å‘½ä»¤</p><ul><li><p>ä¸‹è½½è§£å‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">mkdir</span> actions-runner &amp;&amp; <span class="built_in">cd</span> actions-runner</span><br><span class="line"><span class="comment"># ä¸‹è½½æœ€æ–°çš„runneråŒ…</span></span><br><span class="line">curl -o actions-runner-linux-x64-2.305.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.305.0/actions-runner-linux-x64-2.305.0.tar.gz</span><br><span class="line"><span class="comment"># æ ¡éªŒæ–‡ä»¶hashå€¼ ä¸€èˆ¬å¦‚æœç½‘ç»œæ²¡å•¥é—®é¢˜ç›´æ¥é¡ºåˆ©ä¸‹è½½å®Œæˆå¯è·³è¿‡è¿™ä¸€æ­¥</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;737bdcef6287a11672d6a5a752d70a7c96b4934de512b7eb283be6f51a563f2f  actions-runner-linux-x64-2.305.0.tar.gz&quot;</span> | <span class="built_in">sha256sum</span> -c</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar xzf ./actions-runner-linux-x64-2.305.0.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºrunnerå¹¶é…ç½®  è¿™é‡Œæ³¨æ„ä¸èƒ½ä½¿ç”¨rootæƒé™çš„è´¦æˆ·è¿è¡Œ XXXæ˜¯ä½ é¡µé¢ä¸Šæ˜¾ç¤ºçš„token</span></span><br><span class="line">./config.sh --url https://github.com/Think-Me/hexo --token XXX</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šæœ‰ä¸‹é¢çš„äº¤äº’æé†’ æ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„è¯ç›´æ¥å…¨å›è½¦ç”¨é»˜è®¤å°±è¡Œäº†</span></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">|        ____ _ _   _   _       _          _        _   _                      |</span><br><span class="line">|       / ___(_) |_| | | |_   _| |__      / \   ___| |_(_) ___  _ __  ___      |</span><br><span class="line">|      | |  _| | __| |_| | | | | <span class="string">&#x27;_ \    / _ \ / __| __| |/ _ \| &#x27;</span>_ \/ __|     |</span><br><span class="line">|      | |_| | | |_|  _  | |_| | |_) |  / ___ \ (__| |_| | (_) | | | \__ \     |</span><br><span class="line">|       \____|_|\__|_| |_|\__,_|_.__/  /_/   \_\___|\__|_|\___/|_| |_|___/     |</span><br><span class="line">|                                                                              |</span><br><span class="line">|                       Self-hosted runner registration                        |</span><br><span class="line">|                                                                              |</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment"># Authentication</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">âˆš Connected to GitHub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Runner Registration</span></span><br><span class="line"></span><br><span class="line">Enter the name of the runner group to add this runner to: [press Enter <span class="keyword">for</span> Default] </span><br><span class="line"></span><br><span class="line">Enter the name of runner: [press Enter <span class="keyword">for</span> debian] debian11 </span><br><span class="line"></span><br><span class="line">This runner will have the following labels: <span class="string">&#x27;self-hosted&#x27;</span>, <span class="string">&#x27;Linux&#x27;</span>, <span class="string">&#x27;X64&#x27;</span> </span><br><span class="line">Enter any additional labels (ex. label-1,label-2): [press Enter to skip] </span><br><span class="line"></span><br><span class="line">âˆš Runner successfully added</span><br><span class="line">âˆš Runner connection is good</span><br><span class="line"></span><br><span class="line"><span class="comment"># Runner settings</span></span><br><span class="line"></span><br><span class="line">Enter name of work folder: [press Enter <span class="keyword">for</span> _work] </span><br><span class="line"></span><br><span class="line">âˆš Settings Saved.</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œrunner</span></span><br><span class="line">./run.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›æ˜¾å¦‚ä¸‹å³ä¸ºå¯åŠ¨æˆåŠŸ</span></span><br><span class="line">? Connected to GitHub</span><br><span class="line"></span><br><span class="line">Current runner version: <span class="string">&#x27;2.305.0&#x27;</span></span><br><span class="line">2023-06-30 07:57:15Z: Listening <span class="keyword">for</span> Jobs</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ·æ–°GitHubä¸­runnersé¡µé¢ä¹Ÿä¼šå‘ç°è¿™ä¸ªèŠ‚ç‚¹å·²ç»æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p></li></ul><p><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688111932-202306301558897.png"></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä½¿ç”¨è¯¥èŠ‚ç‚¹çš„æ—¶å€™åªéœ€è¦åœ¨workflowé…ç½®æ–‡ä»¶ä¸­è®¾ç½® runs-on: [self-hosted, Linux, X64] ï¼ˆæ ¹æ®ä½ è‡ªå·±çš„èŠ‚ç‚¹æ ‡ç­¾å¡«å†™ï¼‰å³å¯ã€‚</p><p>æˆ‘è¿™é‡Œä¸ºäº†è§£å†³ServerStatusæ¯æ¬¡å¢åŠ æ–°çš„ç›‘æ§èŠ‚ç‚¹éƒ½éœ€è¦æœåŠ¡ç«¯æ”¹é…ç½®æ–‡ä»¶ç„¶åå†æ‰‹åŠ¨é‡å¯çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘åœ¨GitHub Actionä¸­ä½¿ç”¨äº†è‡ªå·±çš„èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å¯ä»¥å°†æœåŠ¡ç«¯çš„æ“ä½œè‡ªåŠ¨åŒ–äº†ï¼ˆåªè¦æˆ‘ideaä¸­æäº¤ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶GitHub Actionä¼šè‡ªåŠ¨å®Œæˆé…ç½®æ–‡ä»¶æ‹‰å–å’Œé‡å¯æœåŠ¡ç«¯ï¼‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">è‡ªåŠ¨æ‹‰å–ServerStatusé…ç½®æ–‡ä»¶å¹¶é‡å¯æœåŠ¡ç«¯</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ServerStatus</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">è¿æ¥vpsè¿›è¡Œæ–‡ä»¶æ‹‰å–å¹¶é‡å¯æœåŠ¡ç«¯</span></span><br><span class="line">    <span class="attr">runs-on:</span> [<span class="string">self-hosted</span>, <span class="string">Linux</span>, <span class="string">X64</span>]</span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SSH</span> <span class="string">Command</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">appleboy/ssh-action@v0.1.10</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.VPS_OCIN_HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">port:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.VPS_OCIN_PORT</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.VPS_OCIN_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.VPS_OCIN_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">script:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            cd /opt/ServerStatus/hexo/ &amp;&amp; git pull origin ServerStatus</span></span><br><span class="line"><span class="string">            cp -f /opt/ServerStatus/hexo/config.toml /opt/ServerStatus/config.toml</span></span><br><span class="line"><span class="string">            systemctl restart stat_server.service</span></span><br></pre></td></tr></table></figure><h3 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><ol><li><p>æˆ‘è¿™é‡Œåˆšå…´å†²å†²çš„å°è¯•ç¬¬ä¸€æ¬¡æ„å»ºçš„æ—¶å€™å°±å¤±è´¥äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p> <img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688112527-202306301608600.png"></p><p> å› ä¸ºæˆ‘è¿™é‡Œç”¨åˆ°äº†ä¸€äº›ä¾èµ–dockerçš„stepsï¼Œæ‰€ä»¥éœ€è¦å®‰è£…dockerï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥å®‰è£…äº†docker.ioã€‚ <code>apt install docker.io</code></p></li><li><p>æˆ‘åˆæ»¡æ€€æœŸå¾…çš„å°è¯•äº†ä¸€æ¬¡ï¼Œç»“æœè¿˜æ˜¯å¤±è´¥äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688112652-202306301610311.png"></p><p> è¿™æ¬¡æ˜¯æç¤ºæ²¡æœ‰ä½¿ç”¨dockerçš„æƒé™ï¼Œè¿™é‡Œæˆ‘åˆå°†debianç”¨æˆ·åŠ å…¥åˆ°äº†dockerç”¨æˆ·ç»„ä¸­ã€‚ <code>gpasswd -a debian docker</code></p></li><li><p>okï¼Œæˆ‘åˆèµ¶ç´§æäº¤ä¸€ä¸‹ä»£ç æµ‹è¯•ï¼Œæœ€ç»ˆæˆåŠŸå°†ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼</p><p> GitHubæ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688112732-202306301612554.png"></p><p> æœåŠ¡å™¨æ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1688113403-202306301623947.png"></p></li></ol><h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>åˆ°è¿™é‡Œå…¶å®å·²ç»èƒ½ä½¿ç”¨äº†ï¼Œè¿™é‡Œä¸»è¦è®²ä¸€ä¸‹ä¼˜åŒ–æªæ–½ï¼ˆæ ¹æ®ä½ çš„éœ€æ±‚ä»»é€‰å…¶ä¸€å³å¯ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code>1. ä½¿ç”¨screenæˆ–å…¶ä»–å·¥å…·æ”¾åˆ°åå°è¿è¡Œã€‚2. ä½¿ç”¨supervisorã€pm2æˆ–å…¶ä»–å·¥å…·æ¥ç®¡ã€‚3. è‡ªå·±å°è£…æˆserviceç”¨systemctlæ¥ç®¡ã€‚</code></pre><p>å…·ä½“å¯å‚è€ƒ <a href="https://blog.eber.vip/post/2020/07/04/30705/">è¿™ç¯‡æ–‡ç« </a> !</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub Actions </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNSåå°„æ”¾å¤§æ”»å‡»1(Golangç‰ˆ)-äº†è§£å¹¶æ„å»ºDNSè¯·æ±‚</title>
      <link href="/post/2023/06/10/7837/"/>
      <url>/post/2023/06/10/7837/</url>
      
        <content type="html"><![CDATA[<h2 id="DNSè¯·æ±‚æ•°æ®åŒ…è§£æ"><a href="#DNSè¯·æ±‚æ•°æ®åŒ…è§£æ" class="headerlink" title="DNSè¯·æ±‚æ•°æ®åŒ…è§£æ"></a>DNSè¯·æ±‚æ•°æ®åŒ…è§£æ</h2><p><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1686290159-202306091355193.png" alt="DNSè¯·æ±‚æ•°æ®åŒ…å›¾ç¤º"></p><ol><li>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒDNSæ•°æ®åŒ…ç”±DNSå¤´éƒ¨å’ŒDNSæ•°æ®éƒ¨åˆ†ç»„æˆï¼ŒDNSå¤´éƒ¨åŒ…å«äº†DNSæ•°æ®åŒ…çš„åŸºæœ¬ä¿¡æ¯ï¼ŒDNSæ•°æ®éƒ¨åˆ†åŒ…å«äº†DNSæ•°æ®åŒ…çš„å…·ä½“æ•°æ®ã€‚</li><li>DNSå¤´éƒ¨(åœ¨æˆªå›¾å·¦ä¾§ä¸Šçº¢æ¡†å†…)åŒ…å«äº†12ä¸ªå­—èŠ‚ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<ol><li>2å­—èŠ‚çš„æ ‡è¯†ç¬¦(Transaction Id)ï¼Œç”¨äºæ ‡è¯†DNSè¯·æ±‚å’Œå“åº”æ•°æ®åŒ…ï¼Œå“åº”æ•°æ®åŒ…çš„æ ‡è¯†ç¬¦å’Œè¯·æ±‚æ•°æ®åŒ…çš„æ ‡è¯†ç¬¦ä¸€è‡´ã€‚</li><li>2å­—èŠ‚çš„æ ‡å¿—ä½(Flags)ï¼Œç”¨äºæ ‡è¯†DNSæ•°æ®åŒ…çš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š<br>   <img src="https://up.eber.vip/Think-Me/img/main/2023/06/1686290497-202306091401219.png" alt="Flagsæ ‡å¿—ä½æˆªå›¾"><ol><li>QR(1bit) æŸ¥è¯¢åº”ç­”æ ‡å¿—ï¼Œ0è¡¨ç¤ºè¿™æ˜¯æŸ¥è¯¢æŠ¥æ–‡ï¼Œ1è¡¨ç¤ºè¿™æ˜¯åº”ç­”æŠ¥æ–‡ã€‚</li><li>opcode(4bit) æŸ¥è¯¢åº”ç­”ç±»å‹ï¼Œ0è¡¨ç¤ºæ ‡å‡†æŸ¥è¯¢ï¼Œ1è¡¨ç¤ºåå‘æŸ¥è¯¢ï¼Œ2è¡¨ç¤ºè¯·æ±‚æœåŠ¡å™¨çŠ¶æ€ã€‚</li><li>AA(1bit) è¡¨ç¤ºæƒå¨å›ç­”( authoritative answer )ï¼Œæ„å‘³ç€å½“å‰æŸ¥è¯¢ç»“æœæ˜¯ç”±åŸŸåçš„æƒå¨æœåŠ¡å™¨ç»™å‡ºçš„ï¼Œä»…ç”±åº”ç­”æŠ¥æ–‡ä½¿ç”¨ã€‚</li><li>TC(1bit) ä½è¡¨ç¤ºæˆªæ–­( truncated )ï¼Œä½¿ç”¨ UDP æ—¶ï¼Œå¦‚æœåº”ç­”è¶…è¿‡ 512 å­—èŠ‚ï¼Œåªè¿”å›å‰ 512 ä¸ªå­—èŠ‚ï¼Œä»…å½“DNSæŠ¥æ–‡ä½¿ç”¨UDPæœåŠ¡æ—¶ä½¿ç”¨ã€‚DNS åè®®ä½¿ç”¨UDPæœåŠ¡ï¼Œä½†ä¹Ÿæ˜ç¡®äº† ã€å½“ DNS æŸ¥è¯¢è¢«æˆªæ–­æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ TCP åè®®è¿›è¡Œé‡è¯•ã€ è¿™ä¸€è§„èŒƒã€‚</li><li>RD(1bit) è¡¨ç¤ºé€’å½’æŸ¥è¯¢æ ‡å¿— ( recursion desired )ï¼Œåœ¨è¯·æ±‚ä¸­è®¾ç½®ï¼Œå¹¶åœ¨åº”ç­”ä¸­è¿”å›ã€‚è¯¥ä½ä¸º 1 æ—¶ï¼ŒæœåŠ¡å™¨å¿…é¡»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼šå¦‚æœæœåŠ¡å™¨æ²¡æœ‰æˆæƒå›ç­”ï¼Œå®ƒå¿…é¡»æ›¿å®¢æˆ·ç«¯è¯·æ±‚å…¶ä»– DNS æœåŠ¡å™¨ï¼Œè¿™ä¹Ÿæ˜¯æ‰€è°“çš„ é€’å½’æŸ¥è¯¢ï¼› è¯¥ä½ä¸º 0 æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰æˆæƒå›ç­”ï¼Œå®ƒå°±è¿”å›ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†è¯¥æŸ¥è¯¢çš„æœåŠ¡å™¨åˆ—è¡¨ç»™å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯è‡ªå·±è¿›è¡Œ è¿­ä»£æŸ¥è¯¢ã€‚</li><li>RA(1bit) ä½è¡¨ç¤ºå¯é€’å½’ ( recursion available )ï¼Œå¦‚æœæœåŠ¡å™¨æ”¯æŒé€’å½’æŸ¥è¯¢ï¼Œå°±ä¼šåœ¨åº”ç­”ä¸­è®¾ç½®è¯¥ä½ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯ã€‚ä»…ç”±åº”ç­”æŠ¥æ–‡ä½¿ç”¨ã€‚</li><li>zero(3bit) è¿™ä¸‰ä½æœªä½¿ç”¨ï¼Œå›ºå®šä¸º0ã€‚</li><li>rcode(4bit) è¡¨ç¤ºè¿”å›ç ï¼ˆreply codeï¼‰ï¼Œç”¨æ¥è¿”å›åº”ç­”çŠ¶æ€ï¼Œå¸¸ç”¨è¿”å›ç ï¼š0è¡¨ç¤ºæ— é”™è¯¯ï¼Œ2è¡¨ç¤ºæ ¼å¼é”™è¯¯ï¼Œ3è¡¨ç¤ºåŸŸåä¸å­˜åœ¨ã€‚</li></ol></li><li>2å­—èŠ‚çš„DNSè¯·æ±‚æŸ¥è¯¢åŸŸåæ•°é‡ï¼Œæ ‡è¯†DNSè¯·æ±‚æ•°æ®åŒ…ä¸­çš„é—®é¢˜æ•°ï¼Œé€šå¸¸ä¸€æ¬¡æŸ¥è¯¢æŸ¥ä¸€ä¸ªåŸŸå(ä¸º1)ã€‚</li><li>2å­—èŠ‚çš„DNSå“åº”è®°å½•æ•°ï¼Œæ ‡è¯†DNSå“åº”æ•°æ®åŒ…ä¸­çš„èµ„æºè®°å½•æ•°ï¼Œä¸€èˆ¬ä¸º1ï¼Œåˆ†åŒºåŸŸè§£ææˆ–è´Ÿè½½å‡è¡¡ç­‰æƒ…å†µä¸‹ä¼šæœ‰å¤šä¸ªç»“æœã€‚</li><li>2å­—èŠ‚çš„æˆæƒèµ„æºè®°å½•æ•°ï¼Œæ ‡è¯†DNSå“åº”æ•°æ®åŒ…ä¸­çš„æˆæƒèµ„æºè®°å½•æ•°ï¼Œé€šå¸¸ä¸º0ã€‚</li><li>2å­—èŠ‚çš„é¢å¤–èµ„æºè®°å½•æ•°ï¼Œæ ‡è¯†DNSå“åº”æ•°æ®åŒ…ä¸­çš„é¢å¤–èµ„æºè®°å½•æ•°ï¼Œé€šå¸¸ä¸º0ã€‚</li></ol></li></ol><h2 id="DNSå“åº”æ•°æ®åŒ…è§£æ"><a href="#DNSå“åº”æ•°æ®åŒ…è§£æ" class="headerlink" title="DNSå“åº”æ•°æ®åŒ…è§£æ"></a>DNSå“åº”æ•°æ®åŒ…è§£æ</h2><p>å“åº”åŒ…å’Œè¯·æ±‚åŒ…æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«</p><ol><li>å“åº”åŒ…ä¸­çš„Answer RRsä¼šæ ¹æ®å®é™…ç»“æœå±•ç¤ºæ•°é‡ï¼Œè¿™ä¸ªå€¼åœ¨è¯·æ±‚åŒ…ä¸­æ˜¯ã€‚</li><li>å“åº”åŒ…ä¸­çš„å°¾éƒ¨è¿½åŠ äº†å“åº”æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2023/06/1686290856-202306091407376.png" alt="DNSå“åº”æ•°æ®åŒ…å›¾ç¤º"></li></ol><p>ç”±ä¸Šè¿°è¯·æ±‚åŒ…å’Œå“åº”åŒ…æè¿°å¯çŸ¥ï¼šå“åº”åŒ…å› ä¸ºå«æœ‰å“åº”æ•°æ®ï¼Œæ‰€ä»¥ä¼šæ¯”è¯·æ±‚åŒ…å¤§ã€‚å¹¶ä¸”å“åº”ç»“æœè¶Šå¤šçš„åŸŸåç›¸åº”çš„å“åº”åŒ…çš„å¤§å°ä¹Ÿä¼šè¶Šå¤§ã€‚è¿™é‡Œå°±æ˜¯DNSåå°„æ”¾å¤§æ”»å‡»çš„<mark class="hl-label red">æ”¾å¤§</mark> åŸç†ï¼Œé€šè¿‡æ„é€ ä¸€ä¸ªå°çš„è¯·æ±‚åŒ…ï¼Œç„¶åé€šè¿‡DNSæœåŠ¡å™¨å“åº”ä¸€ä¸ªå¤§çš„å“åº”åŒ…ï¼Œä»è€Œè¾¾åˆ°æ”¾å¤§çš„æ•ˆæœã€‚</p><h2 id="DNSè¯·æ±‚æ•°æ®åŒ…æ„é€ "><a href="#DNSè¯·æ±‚æ•°æ®åŒ…æ„é€ " class="headerlink" title="DNSè¯·æ±‚æ•°æ®åŒ…æ„é€ "></a>DNSè¯·æ±‚æ•°æ®åŒ…æ„é€ </h2><mark class="hl-label orange">âœ¨æ¸©é¦¨æç¤ºï¼š</mark> <p><strong>é…åˆåšæ–‡é…å¥—<a href="https://github.com/Think-Me/blackhat-tools/tree/main/dns">é¡¹ç›®</a>é£Ÿç”¨æ›´ä½³ï¼</strong></p><p><strong>DNSè¯·æ±‚æ•°æ®åŒ…çš„æ„é€ ï¼Œä¸»è¦æ˜¯æŒ‰ç…§DNSåè®®çš„è§„å®šæ„é€ å‡ºDNSå¤´éƒ¨å’ŒDNSè¯·æ±‚æ•°æ®éƒ¨åˆ†ã€‚</strong></p><ol><li>æ„é€ DNSæ•°æ®åŒ…éœ€è¦çš„ç»“æ„ä½“ <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// DNSData DNSæ•°æ®åŒ…ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> DNSData <span class="keyword">struct</span> &#123;</span><br><span class="line">    TransactionId <span class="type">uint16</span> <span class="comment">// å±äºheader å®¢æˆ·ç«¯éšæœºç”Ÿæˆçš„ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´æ˜¯0~2^16(0~65536)ã€‚åœ¨å“åº”å¤´é‡Œé¢ä¹Ÿä¼šè¿”å›è¿™ä¸ªå€¼ä½œç”¨æ˜¯æ ¡éªŒã€‚å¦‚æœå€¼ä¸ç›¸ç­‰ï¼Œä¸¢å¼ƒå“åº”å†…å®¹ã€‚</span></span><br><span class="line">    Flags         <span class="type">uint16</span> <span class="comment">// å±äºheader 16ä½æ ‡å¿—ä½ï¼ŒåŒ…å«QRã€opcodeã€AAã€TCã€RDã€RAã€zeroã€rcodeã€‚ä¸€èˆ¬æŸ¥è¯¢flagsä¸º 00000001 00000000</span></span><br><span class="line">    Queries []dnsQuestion <span class="comment">// æœ¬èº«ä¸å±äºheader è¡¨ç¤ºæŸ¥è¯¢è¯·æ±‚è®°å½•å†…å®¹æ•°æ®ï¼Œä»–çš„ç»„æ•°é•¿åº¦å€¼ä¸ºQuestions(å±äºheader)</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢å‡ ä¸ªæ˜¯åº”ç­”è®°å½•ä¸­çš„å†…å®¹ï¼Œåªæœ‰åœ¨åº”ç­”æ¶ˆæ¯ä¸­æ‰ä¼šå‡ºç°</span></span><br><span class="line">    Answers       []dnsAnswer <span class="comment">// æœ¬èº«ä¸å±äºheader åº”ç­”èµ„æºè®°å½•æ•°æ®ï¼ˆanswer resource record, answer RRï¼‰æ­¤é¡¹åªåœ¨DNSåº”ç­”æ¶ˆæ¯ä¸­å­˜åœ¨ï¼Œä»–çš„æ•°ç»„é•¿åº¦å€¼ä¸ºAnswerRRs(å±äºheader)</span></span><br><span class="line">    AuthorityRRs  <span class="type">uint16</span>      <span class="comment">// å±äºheader æˆæƒèµ„æºè®°å½•æ•°é‡ï¼ˆauthority resource record, authority RRï¼‰æ­¤é¡¹åªåœ¨DNSåº”ç­”æ¶ˆæ¯ä¸­å­˜åœ¨</span></span><br><span class="line">    AdditionalRRs <span class="type">uint16</span>      <span class="comment">// å±äºheader é™„åŠ èµ„æºè®°å½•æ•°é‡ï¼ˆadditional resource record, additional RRï¼‰æ­¤é¡¹åªåœ¨DNSåº”ç­”æ¶ˆæ¯ä¸­å­˜åœ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flagsèµ‹å€¼æ–¹æ³•  å› ä¸ºzeroè¿™3bitä½å›ºå®šä¸º0ï¼Œæ‰€ä»¥ä¸éœ€è¦èµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dDNSData *DNSData)</span></span> SetFlag(QR <span class="type">uint16</span>, Opcode <span class="type">uint16</span>, AA <span class="type">uint16</span>, TC <span class="type">uint16</span>, RD <span class="type">uint16</span>, RA <span class="type">uint16</span>, Rcode <span class="type">uint16</span>) &#123;</span><br><span class="line">    dDNSData.Flags = QR&lt;&lt;<span class="number">15</span> + Opcode&lt;&lt;<span class="number">11</span> + AA&lt;&lt;<span class="number">10</span> + TC&lt;&lt;<span class="number">9</span> + RD&lt;&lt;<span class="number">8</span> + RA&lt;&lt;<span class="number">7</span> + Rcode <span class="comment">// é‡‡ç”¨ä½è¿ç®—ç¬¦è¿›è¡Œèµ‹å€¼åˆ°å¯¹åº”bitä½</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¯·æ±‚æ•°æ®çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> dnsQuestion <span class="keyword">struct</span> &#123;</span><br><span class="line">    QueriesName  <span class="type">string</span> <span class="string">`net:&quot;domain-name&quot;`</span> <span class="comment">// è¦æŸ¥è¯¢çš„åŸŸå</span></span><br><span class="line">    QueriesType  <span class="type">uint16</span> <span class="comment">// æŸ¥è¯¢ç±»å‹ 1:A 2:NS 5:CNAME 6:SOA 12:PTR 15:MX 16:TXT 28:AAAA</span></span><br><span class="line">    QueriesClass <span class="type">uint16</span> <span class="comment">// æŸ¥è¯¢ç±» 1:IN 2:CS 3:CH 4:HS é€šå¸¸ä¸º1è¡¨ç¤ºä¸ºTCP/IPäº’è”ç½‘åœ°å€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å“åº”æ•°æ®çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> dnsAnswer <span class="keyword">struct</span> &#123;</span><br><span class="line">    AnswerName       <span class="type">uint16</span> <span class="comment">// åŒdnsQuestion.QueriesName è¦æŸ¥è¯¢çš„åŸŸå</span></span><br><span class="line">    AnswerType       <span class="type">uint16</span> <span class="comment">// åº”ç­”è®°å½•çš„ç±»å‹ 1:A 2:NS 5:CNAME 6:SOA 12:PTR 15:MX 16:TXT 28:AAAA</span></span><br><span class="line">    AnswerClass      <span class="type">uint16</span> <span class="comment">// åŒdnsQuestion.QueriesClass</span></span><br><span class="line">    AnswerTTL        <span class="type">uint32</span> <span class="comment">// 32ä½ç”Ÿå­˜æ—¶é—´(æœ‰æ•ˆæœŸ)å•ä½æ˜¯ç§’</span></span><br><span class="line">    AnswerDataLength <span class="type">uint16</span> <span class="comment">// 16ä½æ— ç¬¦å·æ•´æ•°ï¼Œè¡¨ç¤ºåº”ç­”èµ„æºè®°å½•ä¸­æ•°æ®çš„é•¿åº¦</span></span><br><span class="line">    AnswerCNAME      <span class="type">string</span> <span class="string">`net:&quot;domain-name&quot;`</span> <span class="comment">// åˆ«å</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å†™å…¥DNSå¤´éƒ¨æ•°æ® <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å†™å…¥DNSåè®®å¤´éƒ¨æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dDNSData *DNSData)</span></span> WriteHeader() []<span class="type">byte</span> &#123;</span><br><span class="line">    <span class="comment">// DNSåè®®å®šä¹‰Headerä¸º12ä¸ªå­—èŠ‚çš„å›ºå®šé•¿åº¦</span></span><br><span class="line">    bs := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">12</span>)</span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">0</span>:<span class="number">2</span>], dDNSData.TransactionId)</span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">2</span>:<span class="number">4</span>], dDNSData.Flags)</span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">4</span>:<span class="number">6</span>], <span class="type">uint16</span>(<span class="built_in">len</span>(dDNSData.Queries))) <span class="comment">// Queriesçš„æ•°ç»„é•¿åº¦å€¼ä¸ºQuestions</span></span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">6</span>:<span class="number">8</span>], <span class="type">uint16</span>(<span class="built_in">len</span>(dDNSData.Answers))) <span class="comment">// Answersçš„æ•°ç»„é•¿åº¦å€¼ä¸ºAnswerRRs</span></span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">8</span>:<span class="number">10</span>], dDNSData.AuthorityRRs)</span><br><span class="line">    binary.BigEndian.PutUint16(bs[<span class="number">10</span>:<span class="number">12</span>], dDNSData.AdditionalRRs)</span><br><span class="line">    <span class="comment">// å¡«å……Questionæ•°æ®ï¼Œè¦å°†åŸŸåè¿›è¡Œè½¬æ¢ã€‚ç”¨.åˆ†å‰²åŸŸåå­—ç¬¦ä¸²</span></span><br><span class="line">    ds := strings.Split(dDNSData.Queries[<span class="number">0</span>].QueriesName, <span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="comment">// å¾ªç¯éå†åŸŸåçš„æ¯ä¸€éƒ¨åˆ†ï¼Œå°†å…¶é•¿åº¦å’Œå†…å®¹å†™å…¥åˆ°å­—èŠ‚åˆ‡ç‰‡ä¸­ã€‚ä¾‹å¦‚ï¼šlist.eber.vipï¼Œå†™å…¥çš„å†…å®¹ä¸º4list4eber3vip0 æœ«å°¾ç”¨0æ¥è¡¨ç¤ºç»“æŸã€‚</span></span><br><span class="line">    <span class="keyword">for</span> _, d := <span class="keyword">range</span> ds &#123;</span><br><span class="line">        bs = <span class="built_in">append</span>(bs, <span class="type">byte</span>(<span class="built_in">len</span>(d)))</span><br><span class="line">        bs = <span class="built_in">append</span>(bs, []<span class="type">byte</span>(d)...)</span><br><span class="line">    &#125;</span><br><span class="line">    bs = <span class="built_in">append</span>(bs, <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// æ·»åŠ æŸ¥è¯¢ç±»å‹å’Œåˆ†ç±»</span></span><br><span class="line">    temp := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">2</span>)</span><br><span class="line">    binary.BigEndian.PutUint16(temp, dDNSData.Queries[<span class="number">0</span>].QueriesType)</span><br><span class="line">    bs = <span class="built_in">append</span>(bs, temp...)</span><br><span class="line">    binary.BigEndian.PutUint16(temp, dDNSData.Queries[<span class="number">0</span>].QueriesClass)</span><br><span class="line">    bs = <span class="built_in">append</span>(bs, temp...)</span><br><span class="line">    <span class="keyword">return</span> bs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æµ‹è¯•å‘é€è¯·æ±‚ <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•å‘é€DNSè¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestDNSDemo1</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    dnsServer := <span class="string">&quot;114.114.114.114:53&quot;</span></span><br><span class="line">    dnsProtocol := <span class="string">&quot;udp&quot;</span></span><br><span class="line">    dnsType := <span class="type">uint16</span>(<span class="number">1</span>)</span><br><span class="line">    dnsClass := <span class="type">uint16</span>(<span class="number">1</span>)</span><br><span class="line">    udpAddr, err := net.ResolveUDPAddr(dnsProtocol, dnsServer)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    conn, err := net.DialUDP(dnsProtocol, <span class="literal">nil</span>, udpAddr)</span><br><span class="line"></span><br><span class="line">    question := dnsQuestion&#123;<span class="string">&quot;dns.eber.vip&quot;</span>, dnsType, dnsClass&#125;</span><br><span class="line">    out := DNSData&#123;&#125;</span><br><span class="line">    out.TransactionId = <span class="number">2015</span> <span class="comment">// è¿™é‡Œéšä¾¿ç»™ä¸ªå€¼ 0~65536</span></span><br><span class="line">    out.SetFlag(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    out.Queries = <span class="built_in">append</span>(out.Queries, question)</span><br><span class="line">    header := out.WriteHeader()</span><br><span class="line">    fmt.Println(header)</span><br><span class="line">    _, err = conn.Write(header)</span><br><span class="line">    <span class="keyword">var</span> buf []<span class="type">byte</span></span><br><span class="line">    buf = <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">512</span>)</span><br><span class="line">    n, err := conn.Read(buf[<span class="number">0</span>:])</span><br><span class="line">    fmt.Println(buf[<span class="number">0</span>:n])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>ä¸å‡ºæ„å¤–çš„è¯æ‰§è¡ŒåWiresharkä¼šæ•è·åˆ°è¯¥è¯·æ±‚çš„DNSæ•°æ®åŒ…ã€‚OKï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„DNSè¯·æ±‚ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
            <tag> åå°„æ”¾å¤§æ”»å‡» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå»ºtailscale custom derpè®°å½•</title>
      <link href="/post/2023/05/06/65448/"/>
      <url>/post/2023/05/06/65448/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li><p>æœåŠ¡å™¨</p><p> ä¸€ä¸ªæœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œç³»ç»Ÿæ˜¯Ubuntu 20.04 LTSï¼Œå•æ ¸2Gï¼Œ5Må¸¦å®½500Gæµé‡ã€‚è¿™ä¸ªé…ç½®åšderpæœåŠ¡åŸºæœ¬æ˜¯å¤Ÿç”¨çš„ï¼Œå› ä¸ºæˆ‘çš„è®¾å¤‡ä¹‹é—´åŸºæœ¬éƒ½èƒ½æ­£å¸¸å»ºç«‹p2pè¿æ¥æ‰€ä»¥æµé‡æ–¹é¢ä¹Ÿä¸ä¼šæ¶ˆè€—å¤ªå¤šã€‚</p></li><li><p>åŸŸå</p><p> ä¸€ä¸ªè§£æåˆ°ä¸Šè¿°æœåŠ¡å™¨å…¬ç½‘IPçš„åŸŸåï¼Œè¿™ä¸ªåŸŸåæ˜¯ç”¨æ¥è®¿é—®derpä¸­è½¬æœåŠ¡çš„ã€‚</p></li></ol><h2 id="å®‰è£…derper-server"><a href="#å®‰è£…derper-server" class="headerlink" title="å®‰è£…derper server"></a>å®‰è£…derper server</h2><h3 id="é¦–å…ˆè¦å®‰è£…golang-å¦‚æœç³»ç»Ÿå·²ç»æœ‰goç¯å¢ƒåˆ™è·³è¿‡"><a href="#é¦–å…ˆè¦å®‰è£…golang-å¦‚æœç³»ç»Ÿå·²ç»æœ‰goç¯å¢ƒåˆ™è·³è¿‡" class="headerlink" title="é¦–å…ˆè¦å®‰è£…golang å¦‚æœç³»ç»Ÿå·²ç»æœ‰goç¯å¢ƒåˆ™è·³è¿‡"></a>é¦–å…ˆè¦å®‰è£…golang å¦‚æœç³»ç»Ÿå·²ç»æœ‰goç¯å¢ƒåˆ™è·³è¿‡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›´æ¥ä¸‹è½½goå®˜ç½‘æœ€æ–°çš„åŒ…</span></span><br><span class="line">wget https://go.dev/dl/go1.20.4.linux-amd64.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹åˆ°/usr/localç›®å½•ä¸‹</span></span><br><span class="line">tar -C /usr/local -xzf go1.20.4.linux-amd64.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">export PATH=$PATH:/usr/local/go/bin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">go version</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›æ˜¾ go version go1.20.4 linux/amd64 åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…derper-server-1"><a href="#å®‰è£…derper-server-1" class="headerlink" title="å®‰è£…derper server"></a>å®‰è£…derper server</h3><p>è¿™é‡Œè¦æ³¨æ„å®ƒä¼šé»˜è®¤å®‰è£…åˆ° <code>$HOME/go/bin</code> ç›®å½•ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯åœ¨ <code>/root/go/bin</code> ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…</span></span><br><span class="line">go install tailscale.com/cmd/derper@main</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ å…¥åˆ°PATH</span></span><br><span class="line">export PATH=$PATH:/root/go/bin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ä¸€ä¸‹</span></span><br><span class="line">derper -h</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›æ˜¾å¸®åŠ©ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨derper-server"><a href="#ä½¿ç”¨derper-server" class="headerlink" title="ä½¿ç”¨derper server"></a>ä½¿ç”¨derper server</h2><h3 id="ç®€å•ç‚¹å¯ä»¥ç›´æ¥è¿è¡Œ"><a href="#ç®€å•ç‚¹å¯ä»¥ç›´æ¥è¿è¡Œ" class="headerlink" title="ç®€å•ç‚¹å¯ä»¥ç›´æ¥è¿è¡Œ"></a>ç®€å•ç‚¹å¯ä»¥ç›´æ¥è¿è¡Œ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-a è®¾ç½®ç«¯å£(å¦‚æœä¸ç”¨httpsåˆ™ä½¿ç”¨é443ç«¯å£ä¸”ä¸è®¾ç½®-certmode manual)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-hostname æŒ‡å®šåŸŸå</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stunç«¯å£ä¸å»ºè®®ä¿®æ”¹</span></span><br><span class="line">derper -a :8080 -hostname derper.eber.vip</span><br></pre></td></tr></table></figure><h3 id="æå¤æ‚ç‚¹å¯ä»¥ä½¿ç”¨systemdç®¡ç†æˆ–è€…ç”¨pm2ç­‰å·¥å…·ç®¡ç†"><a href="#æå¤æ‚ç‚¹å¯ä»¥ä½¿ç”¨systemdç®¡ç†æˆ–è€…ç”¨pm2ç­‰å·¥å…·ç®¡ç†" class="headerlink" title="æå¤æ‚ç‚¹å¯ä»¥ä½¿ç”¨systemdç®¡ç†æˆ–è€…ç”¨pm2ç­‰å·¥å…·ç®¡ç†"></a>æå¤æ‚ç‚¹å¯ä»¥ä½¿ç”¨systemdç®¡ç†æˆ–è€…ç”¨pm2ç­‰å·¥å…·ç®¡ç†</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºderper.serviceæ–‡ä»¶</span></span><br><span class="line">vim /etc/systemd/system/derper.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†™å…¥ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=derper service</span><br><span class="line">After=network.target</span><br><span class="line">StartLimitIntervalSec=0</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=1</span><br><span class="line">User=root</span><br><span class="line">ExecStart=/root/go/bin/derper -a :8080 -hostname derper.eber.vip</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h2 id="é…ç½®tailscaleæˆ–headscaleä½¿ç”¨è‡ªå»ºderp"><a href="#é…ç½®tailscaleæˆ–headscaleä½¿ç”¨è‡ªå»ºderp" class="headerlink" title="é…ç½®tailscaleæˆ–headscaleä½¿ç”¨è‡ªå»ºderp"></a>é…ç½®tailscaleæˆ–headscaleä½¿ç”¨è‡ªå»ºderp</h2><p>æˆ‘ä¹‹å‰æ˜¯ä½¿ç”¨çš„headscaleè‡ªå»ºçš„æœåŠ¡ç«¯ï¼Œä½†æ˜¯ç”¨äº†ä¸€æ®µæ—¶é—´æœ‰ä¸ªç‰ˆæœ¬å‡çº§ä¸å…¼å®¹æ—§çš„æ•°æ®åº“ç»“æ„ï¼Œæ‰€ä»¥ç›´æ¥å°±æ¢å›tailscaleäº†ã€‚å®˜æ–¹å…è´¹çš„tailscaleå¥—é¤å·²ç»è¶³å¤Ÿæˆ‘ä½¿ç”¨äº†ï¼Œæ„Ÿè§‰æ²¡å¿…è¦å†ç”¨headscaleäº†ã€‚</p><h3 id="å…ˆè¯´å®˜æ–¹ç‰ˆtailscaleçš„é…ç½®"><a href="#å…ˆè¯´å®˜æ–¹ç‰ˆtailscaleçš„é…ç½®" class="headerlink" title="å…ˆè¯´å®˜æ–¹ç‰ˆtailscaleçš„é…ç½®"></a>å…ˆè¯´å®˜æ–¹ç‰ˆtailscaleçš„é…ç½®</h3><p>ç™»å½•åˆ°tailscalæ§åˆ¶å°åï¼Œç‚¹å‡»Access Controlsï¼Œç›´æ¥åœ¨é…ç½®æ–‡ä»¶æœ«å°¾å¤§æ‹¬å·å‰ä¸€è¡ŒåŠ å…¥å¦‚ä¸‹é…ç½®</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;derpMap&quot;:</span> &#123;</span><br><span class="line">    <span class="string">//</span> <span class="string">è¿™ä¸ªæ˜¯è®¾ç½®ä¸ä½¿ç”¨å®˜æ–¹é»˜è®¤çš„derpèŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">&quot;OmitDefaultRegions&quot;:</span> <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;Regions&quot;:</span> &#123;</span><br><span class="line"><span class="attr">&quot;900&quot;:</span> &#123;</span><br><span class="line"><span class="attr">&quot;RegionID&quot;:</span> <span class="number">900</span>,</span><br><span class="line"><span class="attr">&quot;RegionCode&quot;:</span> <span class="string">&quot;CN&quot;</span>,</span><br><span class="line"><span class="attr">&quot;RegionName&quot;:</span> <span class="string">&quot;Shanghai&quot;</span>,</span><br><span class="line"><span class="attr">&quot;Nodes&quot;:</span> [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;Name&quot;:</span> <span class="string">&quot;è…¾è®¯äº‘ä¸Šæµ·&quot;</span>,</span><br><span class="line"><span class="attr">&quot;RegionID&quot;:</span> <span class="number">900</span>,</span><br><span class="line"><span class="attr">&quot;HostName&quot;:</span> <span class="string">&quot;derper.eber.vip&quot;</span>,</span><br><span class="line"><span class="attr">&quot;DERPPort&quot;:</span> <span class="number">8080</span>,</span><br><span class="line">&#125;,</span><br><span class="line">],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;<span class="string">,</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåç‚¹å‡»Saveä¿å­˜ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šæ‰§è¡Œ tailscale netcheckï¼Œä¼šæœ‰ç±»ä¼¼å¦‚ä¸‹è¾“å‡ºã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@oc-au1:~# tailscale netcheck</span><br><span class="line"></span><br><span class="line">Report:</span><br><span class="line">        * UDP: true</span><br><span class="line">        * IPv4: yes, 152.67.99.59:59810</span><br><span class="line">        * IPv6: no, but OS has support</span><br><span class="line">        * MappingVariesByDestIP: false</span><br><span class="line">        * HairPinning: true</span><br><span class="line">        * PortMapping: </span><br><span class="line">        * Nearest DERP: Shanghai</span><br><span class="line">        * DERP latency:</span><br><span class="line">                -  CN: 295ms   (Shanghai)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºä½ é…ç½®çš„èŠ‚ç‚¹RegionCodeå’ŒRegionNameåˆ™ä¸ºæˆåŠŸï¼Œç„¶åå¯ä»¥ä¸¤ä¸ªå®¢æˆ·ç«¯äº’pingè¿›ä¸€æ­¥ç¡®è®¤æ˜¯å¦èƒ½æ­£å¸¸ä¸­è½¬æµé‡ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="å†è¯´headscaleçš„é…ç½®"><a href="#å†è¯´headscaleçš„é…ç½®" class="headerlink" title="å†è¯´headscaleçš„é…ç½®"></a>å†è¯´headscaleçš„é…ç½®</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›´æ¥ä¿®æ”¹ /etc/headscale/config.yaml æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…ˆæ³¨é‡Šæ‰å®˜æ–¹çš„é»˜è®¤derp urlsé…ç½®</span></span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">urls:</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"> - https://controlplane.tailscale.com/derpmap/default</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç„¶ååŠ å…¥è‡ªå·±çš„derpé…ç½®</span></span><br><span class="line">  paths:</span><br><span class="line">    - /etc/headscale/derp.yaml</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º /etc/headscale/derp.yaml æ–‡ä»¶</span></span><br><span class="line">vim /etc/headscale/derp.yaml</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†™å…¥ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">regions:</span><br><span class="line">    900:</span><br><span class="line">      regionid: 900</span><br><span class="line">      regioncode: CN</span><br><span class="line">      regionname: Shanghai</span><br><span class="line">      nodes:</span><br><span class="line">        - name: è…¾è®¯äº‘ä¸Šæµ·</span><br><span class="line">          regionid: 900</span><br><span class="line">          hostname: derper.eber.vip</span><br><span class="line">          derpport: 8080</span><br><span class="line">          stunport: 3478</span><br><span class="line">          stunonly: false </span><br></pre></td></tr></table></figure><p>OKï¼ç»“æŸğŸ”šï¼Œè¿˜æƒ³å†è¯´ä¸€å¥ å®˜æ–¹ç‰ˆçš„ç”¨ç€ç¡®å®çœå¿ƒã€‚ä¸ªäººç”¨é€”çš„è¯å…è´¹ç‰ˆåŸºæœ¬è¶³å¤Ÿäº†ä¸å»ºè®®ç”¨headscale å¤ªæŠ˜è…¾äº†ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tailscale </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ä¼ è¾“å°ç¬”è®°</title>
      <link href="/post/2023/04/23/2754/"/>
      <url>/post/2023/04/23/2754/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="d939845a74279f3e6cedc853bb99628e7c1485149b42cbe0dfd6dfe10f8e7591">d7d1313d74f5f9937c4c6f57d41c156905ce4011da20712fd7652fef2f0ee9c78ae2463f9f5794aea31097eb57233e41f5b9ea62aa2bf6300e4f14c8dbaeaee87ea9e58b18f0b42d1afc81519496cb9f07632c5fb3ba34107f22175c9f431b89ce9bd9e052ae9aad9999862bb17c106a5ee93c7f4f5db475c20bd3110c0508848e39b6105e9728e5683725ecb91c958eb915908452558100d61f2a7acbaae17d9495456a935c339f8af74184581bd0a17b5cf2d8b3b9a90ce895d1555814024d664d9d98cd3cf08f9fb14d3d559c536df88012dbd488b8bce315781ffc374413231f646554177ef8f067bf2d825f186c339a97d21eba3531c36f148a627f1cd34af72ee500e79875976c38403f1dfd90a170f690e844c58828932dd21712e347aaa847586c72e7bc924a43341d5beb89f68877dfbae593fc311cf8767ab7e779feff760bd0608f1534fafdf4aadba6e734ef09009157c45dcdb1b1e67ac9d3443ce7c6c5c06ba5933dca424512af1fa00c65a77d3acc8eac9ae6399ef8e1602b4f478753ec8316d8f22ab7bd7b51318622239c605b95082388c0fee1373d33ab9347dacfb929997c31417cdc3780e183ff7c47f09eb845a9a55ec68e647ec13c8104e18ec058a863c50ef8bab9796ad7f4b0ebf59c2ac4b5940a42ecea2eb2a9edbc22bb4a0e3084e96e536a5f1b934ade29764e9efe3ce93f44fe6eaa8aa949512058cd89baa7c2e07a464299f27a69099349f998e1ca83a62f72871a68c47c7cf928798bd531a782df7953bd6bab54eba93a76a15c45fc3661da90cac3ac4804b8f5fc6f7758a3dc1e05373d04d1d38c989530d6d3917876a42369603cfd36ee8727e27884c9ab9b912f7eb36f41065ec01cd9eeddd54a9f9457490c1f26911ede52d88ef42898d5bc1c03682993d283e3b0da08c8783a98886da79ed6de70b03a3307c97423eb68c76c02ea282aeeee48e4ad361cb35b18790b8359272ef48e0a5bd93bb881ff511cd575829d0112443dc0b5b17bf6f3bdbab140a65b49f233d2f7bcdb67efdb5b77102f0e44a14700b4bac7e7dc17c305a67c89509b3347032af28930be612486528f9676507f8cac9cd1c2e0ea64a61397a88e5cb3fb5cfdaf7c8151343d00f256dca5bca803d3df6a8d834bb4cefdcb07aa40297ac1acb5bae7b9197ddaf3531ba802a94115648e3de685b16aadcc1e50493d12562f5815e305daf459f410c38532c0fe618821094f10b4486ab25366479a55437653d10e97aa31ce1390e97b2e71eeb0b5556803beff5fde7bdc6cf0686e9a4e32d1fe0d00b5465d562fc11b65c6c2c743f6c73da945e248516e994f0d70fa11b3a5208e9c883dbd0cd74c49e610c0028af5f7326f8e5c534067276c8d675c115308445e7192865dece143acf397010b350f5bf43c1362e5ed17ecb4b700abf3d74af47dee3868be58e15741bb37ec57003db9cf97d21f41c3e48de9a67c9e803a7c360c40e0ed65699d7ac3841f5d1732531a4b0d0fea3da6285a261192d59bcd668bccebdb8b40171167d6739b2411380d56df8b6c3e51161c01bad19c62c58d944c0d32f748726b64bd93a9f50a5c6061cf75c250808f9633fb64b85fa1c832224bf4933eab4e99ffd3d6810da24469d2180a20e79872591d2d0c17d81bad0719ae045298e9e1abeba3fe4c85ac272bdf8febb1a5af62e3979f8e2a6a8129d2e44cd7d6c1577761e69a0d30f0dd2ef64df27640727a40b453ed00221bde08766ca438f82f32d72ce329fddc45a482ea2952695cac460e06a864b360ccd52f3a09b535a8ee8da8a0a4d4be0ca391e9cd80d2a3001c3b3ad5b050b05eb3367fa44359ea9783a046f557d39f0580a88867a2153870f7d56ed495cc6dcd5b5b345d5248be54e63e304d602e450ec328855f265d4020a500ba3f1e1b740114f3036bc2c2f4a634c81cb26d8caa3434516f8854ccebe2aa21bedcadcc7a6ca64003be84fb402da8c1f8aa02a7318acf52aa1a324546ce391018f0c06e2acd640e451ee0b3b93fd6625167020dc6b103c460094813fd5af5815e90bfc6e23fdf2d5df4320dd06c1b9b0e5ca87a0e2ef4bb8c03bab7f54e9e7bff82745875b95692792b2b551f55571a85f18725bea9d5dc4e31da7145c478a7c587931f72ee8420c04675311714811b47c1fcc9077c055357db7acd75f0b07106481f99a43f5ecdd77c8989363e66ce36d88728a92c0136e41812b4fa884525a55be50fc04b8adf95531be87bafc8ce8fe1138797a7f362fa475367a8d16a592700f2e9fb4502566e809b7dbb5b5a04fa1eb2723eca93ca3ccaa0546698d310325663b6843cbff21a179335590db56f4d3a4419e61d175c3800111719c2685ae8d83f74742b067d48244e15bb912c902004b24aec4c69c8fd9d7dd13109e6e8540b53ee66648b72b84d006a7a0c4301fbd21a1522bcac53be23caa04a7565905793d90f52723106d778597bf9621a4a63e0a1fbcc905abc3627de3723ffd9a6f5559b6e3f8d4bc54b9bc1697897a18f093a0b5cb1af21bbfa7c1ff626fc9e4f9ad173bb0a9ec474dbcef50f6a0f039e656d556c08d883b4ace12cbc1b65161ca5dc1a3286b26f4445f77bc1be90ba25a1246fb5672056be1c5c2e5caae336ea9663a8a48b5edf8b59b60adcf289eded3e91b6dae959ef39e88d8be700f2d25f80b050dee056ebf840ea99136bfd9e5fff32c6675808c3a0f93eb6545b70387eb3e8a18cf8c5b3445758bc2cde1580374d1c5f147aebeb116aa2d09b8295f2f0e6f92125dd0e3982071682e42d190f3f5cbd1a181652c2696e43fd2dad27b55692c1942ce27d92bf84f671852bc8b86626a6e4b65d4dd57980bcefe2649def7e76cb2aada24e2c81114dca81bc22da4132a37c474b7dd8f55f051943e7fd6ca76780714e98c9325c3c59144ce496e32ab5dc7b4545d2d45f92edc8b84c5899a12ecbaa6fe97f0678dbca486cb32b2cf1ee3c0d1f129cb213de1133cd78e6ce7398fdd0eb8d37fcc47a9473c116626697e60b20cee7bca551c7466b93e6317d7f50f0e0da8c76d39a7779ffdd1a3237a11094419092ba8153df054553c576b4ef82903de4f26325a73055696b7bb9cb371a9111dce240d799e8d35d67ca906b974397cacff3ad95ebcf849ac26534327b690a739b3ab2f2583fe205d23bbab035144e8019e7fc2a0bcd256f8183bdfc563976a0774a793fc72dd76c14ed428feb6ec9b1c36c3c2be0bfa231fdc9b1d1b9159174a32e14ed4e0fab4f682460a905cf24c93af237a1ba7185bddf917b9a4e6db632e3a4ff0e6b3c3e6bb97be0ce5155f2ddaf2d8bce064f8afccee737b36defec7f4bb81633c9e086daaa2ac1a6504203f904249808d43b2e1fab5b6e0efc94c9a3f71623d6b88e0477a80360a2180bb165dfd40cdf6ac7279fe75407cada2509c85983c8879ec6f3ececf391bf37b516adf06e4a34ecdc67b797332bf3162076d805ce556e4cb59d20ab181608e1652fcb02a72a152ba42e1bcf1b6d3ddc93c68799d894b40b50c486aa8a454b962f58fc3fb9a965258ab0adc12fc59523ebf11399124e11f49d76c1b309b48cd4b539e4094a45e62f1169659a36fb671fe4d53408c0cbfdee4b6fe9ef4554c4a5b268b6ac4425e37ac80bf6de8519b00717329233a0eb59f835bc203e6b3eb42cf64b6d702dd232e4c9dfec333481feb8dd247a40aa6b0a06ff6b6631ec5880512c9544754a705f7ea98d4fdc981bcb3b8fd89ef6b4b91d813fb6c9fce3e4659abfaf0c1884b9a8e737b6e8c3a29a38c552f7e517d5be1750f775976ccc90400e4799b80ec126f8f1651b65a64b7be35a96241939658c3b4e935696aaed1f74cab267a9b41629bcba0b8da9115683194cd8ec0e66841fb69180fe7df824e49ffc95522ed31deffbc564c51c4cba6a1ca666ceee1627b950be6acd2f77661e49ef1862e1904390cf718048a9e0ec9d1c303ab766418eb335c206c9ef5cea76ff1307525533ba09794b504f5e404bcf3dcb75488bb8bb80c04e06338ffa8cd3a77bc2e6f97ec7c2b9a421b9a9461087ef110363fd7518d5ace38d45f72b7807f953ec867fe44a80051e618519f91d44877cb292f122aec4f721784107568577a829741f1a96a99bb70c17a1d951d279d5aa8b5576252a5001234bf96b9ac7ac3f566dfc448c8422f6d6457f186265680b0d448cf0821a1196ac0a0a9c878e5009fc41b8f3e2005802a101e3a2f409c8ec36745bf364060bdfd6dd1980992b441170ce77c9bc1e30c742d0acda22a03d3ff580a996f1e7d616d0246b3d19293d84a5d76b3d957bf7db3a38c1b3345409918c48f069b06b1f3ac35862a786d90968ea1e6980d61c4fe4d675057923d6dc93669193264bfc93a88a3fb97623208b89fe9479705e90f52c3430614360189fa3c54c65dcd35168cfd2a3dd97160453a43b9654d577c56aea408bc74eb306d41739b1dd2958ac95b9156049bc86e28bdc323e917bf1ba3288e6dff290245e7b9342d95d01e8851cf9270b797fd59becbf8fe3688b6273130323901aec731effcb6346a174acd61868cb641622bd5790fdf86a6c04d72e88b42b98d43a629bf90ec915a6f0b8871f7077eef72af7d8e0a85cd42c1e4fb5f7ca2fc8bff334a5ebc959b32c1a0948e7868236f4a074601b7749be4a78961e7c101527a662d0</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸²å£é€šè®¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè„‘å’Œæ‰‹æœºæ˜¯å¦‚ä½•çŸ¥é“è‡ªå·±è¿ä¸Šç½‘çš„</title>
      <link href="/post/2023/04/22/55144/"/>
      <url>/post/2023/04/22/55144/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç©å®‰å“ç»å¸¸åˆ·æœºçš„å°ä¼™ä¼´å¯èƒ½ä¼šå‘ç°æœ‰äº›å›½å¤–çš„åŒ…æ¯”å¦‚LineageOSç­‰ï¼Œåˆ·æœºåä¼šå‘ç°Wi-Fiå›¾æ ‡æœ‰æ— ç½‘ç»œçš„æ ‡è¯†æˆ–æ‰‹æœºæé†’è¯¥Wi-Fiæ— æ³•è”ç½‘ã€‚è¿™æ˜¯å¦‚ä½•äº§ç”Ÿçš„å‘¢ï¼Ÿ</p><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>å› ä¸ºç”µè„‘æˆ–æ‰‹æœºç­‰ç½‘ç»œç»ˆç«¯ä¼šæœ‰ä¸€ä¸ªæ¢æµ‹ç½‘ç»œè¿æ¥çš„æœºåˆ¶ï¼Œå½“ç½‘ç»œè¿æ¥ä¸å¯ç”¨æ—¶åŠæ—¶æç¤ºç”¨æˆ·ã€‚è¿™å°±æ˜¯<mark class="hl-label pink">204</mark> æœºåˆ¶ã€‚é‚£ä¹ˆè¿™ä¸ªæœºåˆ¶æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><h2 id="æœºåˆ¶åˆ†æ"><a href="#æœºåˆ¶åˆ†æ" class="headerlink" title="æœºåˆ¶åˆ†æ"></a>æœºåˆ¶åˆ†æ</h2><ul><li><p>å®‰å“æ‰‹æœºä¼šè¯·æ±‚ç±»ä¼¼è¿™æ ·çš„ä¸€ä¸ªåœ°å€ <code>http://www.google.com/generate_204</code> ï¼Œå¦‚æœè¿”å›çš„çŠ¶æ€ç æ˜¯204åˆ™è¯´æ˜ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå¦åˆ™è¯´æ˜ç½‘ç»œè¿æ¥ä¸æ­£å¸¸ã€‚è¿™ä¸ªåœ°å€æ˜¯Googleæä¾›çš„ï¼Œæ‰€ä»¥å›½å¤–çš„åŒ…ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªåœ°å€æ¥æ¢æµ‹ç½‘ç»œè¿æ¥ã€‚</p></li><li><p>Macç”µè„‘ä¼šè¯·æ±‚ç±»ä¼¼è¿™æ ·çš„ä¸€ä¸ªåœ°å€ <code>http://captive.apple.com/hotspot-detect.html</code> ï¼Œå¦‚æœå“åº”æ–‡æœ¬ <code>Success</code> åˆ™è¯´æ˜ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå¦åˆ™è¯´æ˜ç½‘ç»œè¿æ¥ä¸æ­£å¸¸ã€‚è¿™ä¸ªåœ°å€æ˜¯Appleæä¾›çš„ï¼Œæ‰€ä»¥è‹¹æœç”µè„‘ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªåœ°å€æ¥æ¢æµ‹ç½‘ç»œè¿æ¥ã€‚</p></li><li><p>Windowsç”µè„‘ä¼šè¯·æ±‚ç±»ä¼¼è¿™æ ·çš„ä¸€ä¸ªåœ°å€ <code>http://www.msftconnecttest.com/connecttest.txt</code> ï¼Œå¦‚æœå“åº”æ–‡æœ¬ <code>Microsoft Connect Test</code> åˆ™è¯´æ˜ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå¦åˆ™è¯´æ˜ç½‘ç»œè¿æ¥ä¸æ­£å¸¸ã€‚è¿™ä¸ªåœ°å€æ˜¯å¾®è½¯æä¾›çš„ï¼Œæ‰€ä»¥Windowsç”µè„‘ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªåœ°å€æ¥æ¢æµ‹ç½‘ç»œè¿æ¥ã€‚</p></li></ul><h2 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h2><p>å®‰å“æ‰‹æœºå¯ä»¥æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒä¿®æ”¹å¦‚ä¸‹åœ°å€å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://www.gstatic.com/generate_204</span><br><span class="line">http://www.google-analytics.com/generate_204</span><br><span class="line">http://www.google.com/generate_204</span><br><span class="line">http://connectivitycheck.gstatic.com/generate_204</span><br><span class="line">http://connect.rom.miui.com/generate_204</span><br><span class="line">http://connectivitycheck.platform.hicloud.com/generate_204</span><br><span class="line">http://wifi.vivo.com.cn/generate_204</span><br></pre></td></tr></table></figure><p>Windowsç”µè„‘å¯ä»¥æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒä¿®æ”¹å¦‚ä¸‹åœ°å€å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://www.msftconnecttest.com/connecttest.txt</span><br><span class="line">http://www.msftncsi.com/ncsi.txt</span><br><span class="line">http://detectportal.firefox.com/success.txt</span><br><span class="line">http://network-test.debian.org/nm</span><br></pre></td></tr></table></figure><p>Macç”µè„‘ä¸ç”¨æŠ˜è…¾ï¼Œä»æ¥æ²¡è§è¿‡Macæœ‰è¿™ç§é—®é¢˜ã€‚è‹¹æœè¿˜æ˜¯ç‰›é€¼å“ˆï¼Œç”¨æˆ·ä½“éªŒåšåˆ°æè‡´ï¼</p><p>windowsæ¨èGitHubä¸Šä¸€ä¸ª <a href="https://github.com/crazy-max/WindowsSpyBlocker">å¥½ç”¨çš„å·¥å…·</a> å¯ä»¥å¿«é€Ÿä¿®æ”¹ï¼Œä¸ç”¨å†è‡ªå·±ä¸€ä¸ªä¸€ä¸ªæ³¨å†Œè¡¨é¡¹å»æ”¹äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çæŠ˜è…¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangçš„fmtå ä½ç¬¦ç¬”è®°</title>
      <link href="/post/2023/04/16/53040/"/>
      <url>/post/2023/04/16/53040/</url>
      
        <content type="html"><![CDATA[<h1 id="GitHub-Copilotæ’ä»¶"><a href="#GitHub-Copilotæ’ä»¶" class="headerlink" title="GitHub Copilotæ’ä»¶"></a>GitHub Copilotæ’ä»¶</h1><p>æ­£æ–‡å¼€å§‹å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸ªå°æ’ä»¶ - Copilotï¼Œæ˜¯GitHubæ¨å‡ºçš„ä¸€ä¸ªAIä»£ç è¡¥å…¨æ’ä»¶ã€‚<a href="https://copilot.github.com/">å®˜ç½‘é“¾æ¥</a>ï¼Œ<a href="https://copilot.github.com/docs/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œ<a href="https://copilot.github.com/blog/">å®˜æ–¹åšå®¢</a>ï¼Œ<a href="https://twitter.com/copilot">å®˜æ–¹Twitter</a>ã€‚</p><p>ç›®å‰GitHubå­¦ç”Ÿè®¤è¯è´¦å·å¯å…è´¹ä½¿ç”¨ï¼Œ<a href="https://education.github.com/pack">GitHubå­¦ç”Ÿè®¤è¯</a>ï¼Œ<a href="https://education.github.com/discount_requests/new">GitHubå­¦ç”Ÿè®¤è¯ç”³è¯·</a>ã€‚</p><p>ç”³è¯·å®Œè®¸å¯ä¹‹åç›´æ¥åˆ°JetBrainsæ’ä»¶å¸‚åœºæœç´¢Copilotå®‰è£…å³å¯ï¼Œ<a href="https://plugins.jetbrains.com/plugin/14896-copilot">JetBrainsæ’ä»¶å¸‚åœº</a>ã€‚å®‰è£…å®Œä¹‹åä¼šè¿æ¥GitHubè¿›è¡Œè®¤è¯ï¼Œè®¤è¯æˆåŠŸåå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p>ç”¨äº†å¤§çº¦æœ‰ä¸¤å‘¨ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆä»£ç ï¼Œä½†æ˜¯ç”Ÿæˆçš„ä»£ç ä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å†ä¼˜åŒ–ä¸€ä¸‹ã€‚ç›®å‰Copilotåªæ”¯æŒPythonã€Javaã€JavaScriptã€TypeScriptã€Goã€Rubyã€PHPã€C#ã€C++ã€Kotlinã€Scalaã€Dartã€Swiftã€Rustã€Juliaã€Elixirã€Clojureã€Haskellã€OCamlã€F#ã€Elmã€Erlangã€Prologã€Perlã€Luaç­‰</p><p>æ˜¯çš„ä¸Šé¢å‡ è¡Œå¤§éƒ¨åˆ†å†…å®¹ä¹Ÿæ˜¯ç”Ÿæˆçš„ã€‚ã€‚ã€‚æˆ‘åªå†™äº†ä¸ªå¼€å¤´ã€‚æœ¬ç¯‡æ–‡ç« å¤§æ¦‚åªæœ‰20%çš„å†…å®¹æ˜¯æˆ‘æ•²å‡ºæ¥çš„ã€‚å› ä¸ºæˆ‘çš„åšæ–‡ä¸€ç›´åœ¨GoLandä¸Šå†™ï¼Œæ‰€ä»¥ä»¥åå¯èƒ½ä¼šæœ‰æ›´å¤šAIç”Ÿæˆçš„å†…å®¹ã€‚</p><h1 id="Golangçš„fmtå ä½ç¬¦ç¬”è®°"><a href="#Golangçš„fmtå ä½ç¬¦ç¬”è®°" class="headerlink" title="Golangçš„fmtå ä½ç¬¦ç¬”è®°"></a>Golangçš„fmtå ä½ç¬¦ç¬”è®°</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="type">string</span></span><br><span class="line">Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = Dog&#123;</span><br><span class="line">    Name: <span class="string">&quot;å°ç ¾&quot;</span>,</span><br><span class="line">    Age:  <span class="number">1</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><mark class="hl-label pink">æœ¬ç¬”è®°åé¢éƒ¨åˆ†ä¸ºCopilotç”Ÿæˆçš„ä»£ç ï¼Œä¸‹å›¾Gifæ˜¯éƒ¨åˆ†ç”Ÿæˆç¤ºä¾‹ã€‚ä»…ä¾›å‚è€ƒï¼</mark> <p><img src="https://up.eber.vip/Think-Me/img/main/upload/Kapture%202023-04-17%20at%2012.44.48.gif"></p><p>çŒœæµ‹å¯èƒ½æ˜¯æ ¹æ®å®˜æ–¹æ–‡æ¡£åŠ ä¸Šæˆ‘ä¸Šé¢çš„ç»“æ„ä½“çš„å®šä¹‰è€Œç”Ÿæˆçš„ï¼Œ<a href="https://golang.org/pkg/fmt/">å®˜æ–¹æ–‡æ¡£é“¾æ¥</a></p><h2 id="æ™®é€šå ä½ç¬¦"><a href="#æ™®é€šå ä½ç¬¦" class="headerlink" title="æ™®é€šå ä½ç¬¦"></a>æ™®é€šå ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %v é»˜è®¤æ ¼å¼</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>, dog) <span class="comment">// &#123;å°ç ¾ 1&#125;</span></span><br><span class="line"><span class="comment">// %+v æ‰“å°ç»“æ„ä½“æ—¶ï¼Œä¼šæ·»åŠ å­—æ®µå</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%+v&quot;</span>, dog) <span class="comment">// &#123;Name:å°ç ¾ Age:1&#125;</span></span><br><span class="line"><span class="comment">// %#v å€¼çš„Goè¯­æ³•è¡¨ç¤º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%#v&quot;</span>, dog) <span class="comment">// main.Dog&#123;Name:&quot;å°ç ¾&quot;, Age:1&#125;</span></span><br><span class="line"><span class="comment">// %T æ‰“å°å€¼çš„ç±»å‹</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%T&quot;</span>, dog) <span class="comment">// main.Dog</span></span><br><span class="line"><span class="comment">// %% æ‰“å°%</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%%&quot;</span>) <span class="comment">// %</span></span><br></pre></td></tr></table></figure><h2 id="å¸ƒå°”å ä½ç¬¦"><a href="#å¸ƒå°”å ä½ç¬¦" class="headerlink" title="å¸ƒå°”å ä½ç¬¦"></a>å¸ƒå°”å ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %t true or false</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%t&quot;</span>, <span class="literal">true</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="æ•´æ•°å ä½ç¬¦"><a href="#æ•´æ•°å ä½ç¬¦" class="headerlink" title="æ•´æ•°å ä½ç¬¦"></a>æ•´æ•°å ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %b äºŒè¿›åˆ¶</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%b&quot;</span>, <span class="number">10</span>) <span class="comment">// 1010</span></span><br><span class="line"><span class="comment">// %c å¯¹åº”çš„Unicodeç å€¼</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%c&quot;</span>, <span class="number">65</span>) <span class="comment">// A</span></span><br><span class="line"><span class="comment">// %d åè¿›åˆ¶</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%d&quot;</span>, <span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// %o å…«è¿›åˆ¶</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%o&quot;</span>, <span class="number">10</span>) <span class="comment">// 12</span></span><br><span class="line"><span class="comment">// %q å•å¼•å·å›´ç»•çš„å­—ç¬¦å­—é¢å€¼ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>, <span class="number">65</span>) <span class="comment">// &#x27;A&#x27;</span></span><br><span class="line"><span class="comment">// %x åå…­è¿›åˆ¶ï¼Œå­—æ¯å½¢å¼ä¸ºå°å†™ a-f</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x&quot;</span>, <span class="number">10</span>) <span class="comment">// a</span></span><br><span class="line"><span class="comment">// %X åå…­è¿›åˆ¶ï¼Œå­—æ¯å½¢å¼ä¸ºå¤§å†™ A-F</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X&quot;</span>, <span class="number">10</span>) <span class="comment">// A</span></span><br><span class="line"><span class="comment">// %U Unicodeæ ¼å¼ï¼šU+1234ï¼Œç­‰åŒäº &quot;U+%04X&quot;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%U&quot;</span>, <span class="number">65</span>) <span class="comment">// U+0041</span></span><br></pre></td></tr></table></figure><h2 id="æµ®ç‚¹æ•°å ä½ç¬¦"><a href="#æµ®ç‚¹æ•°å ä½ç¬¦" class="headerlink" title="æµ®ç‚¹æ•°å ä½ç¬¦"></a>æµ®ç‚¹æ•°å ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %b æ— å°æ•°éƒ¨åˆ†ã€äºŒè¿›åˆ¶æŒ‡æ•°çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚ -123456p-78</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%b&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.0001100110011001100110011001100110011001100110011001101p+3</span></span><br><span class="line"><span class="comment">// %e ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚ -1234.456e+78</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%e&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.010000e+01</span></span><br><span class="line"><span class="comment">// %E ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚ -1234.456E+78</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%E&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.010000E+01</span></span><br><span class="line"><span class="comment">// %f æœ‰å°æ•°ç‚¹è€Œæ— æŒ‡æ•°ï¼Œå¦‚ 123.456</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%f&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.100000</span></span><br><span class="line"><span class="comment">// %F %fçš„åŒä¹‰è¯</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%F&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.100000</span></span><br><span class="line"><span class="comment">// %g æ ¹æ®æƒ…å†µé€‰æ‹© %e æˆ– %f ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„ï¼ˆæ— æœ«å°¾çš„0ï¼‰è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%g&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.1</span></span><br><span class="line"><span class="comment">// %G æ ¹æ®æƒ…å†µé€‰æ‹© %E æˆ– %F ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„ï¼ˆæ— æœ«å°¾çš„0ï¼‰è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%G&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.1</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²å ä½ç¬¦"><a href="#å­—ç¬¦ä¸²å ä½ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²å ä½ç¬¦"></a>å­—ç¬¦ä¸²å ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %s ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²æˆ–è€…[]byte</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// hello</span></span><br><span class="line"><span class="comment">// %q å¸¦åŒå¼•å·çš„å­—ç¬¦ä¸²ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// &quot;hello&quot;</span></span><br><span class="line"><span class="comment">// %x æ¯ä¸ªå­—èŠ‚ç”¨ä¸¤å­—ç¬¦åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼ˆä½¿ç”¨a-fï¼‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656c6c6f</span></span><br><span class="line"><span class="comment">// %X æ¯ä¸ªå­—èŠ‚ç”¨ä¸¤å­—ç¬¦åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼ˆä½¿ç”¨A-Fï¼‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656C6C6F</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‡é’ˆå ä½ç¬¦"><a href="#æŒ‡é’ˆå ä½ç¬¦" class="headerlink" title="æŒ‡é’ˆå ä½ç¬¦"></a>æŒ‡é’ˆå ä½ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %p åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå‰ç¼€ 0x</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%p&quot;</span>, &amp;dog) <span class="comment">// 0xc0000b4000</span></span><br></pre></td></tr></table></figure><h2 id="å®½åº¦æ ‡è¯†ç¬¦"><a href="#å®½åº¦æ ‡è¯†ç¬¦" class="headerlink" title="å®½åº¦æ ‡è¯†ç¬¦"></a>å®½åº¦æ ‡è¯†ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %n å®½åº¦ä¸ºnçš„æ•´æ•°ï¼Œå³å¯¹é½</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%10d&quot;</span>, <span class="number">10</span>) <span class="comment">//         10</span></span><br><span class="line"><span class="comment">// %-n å®½åº¦ä¸ºnçš„æ•´æ•°ï¼Œå·¦å¯¹é½</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%-10d&quot;</span>, <span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// %0n å®½åº¦ä¸ºnçš„æ•´æ•°ï¼Œå³å¯¹é½ï¼Œå·¦è¾¹å¡«å……0</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%010d&quot;</span>, <span class="number">10</span>) <span class="comment">// 0000000010</span></span><br></pre></td></tr></table></figure><h2 id="ç²¾åº¦æ ‡è¯†ç¬¦"><a href="#ç²¾åº¦æ ‡è¯†ç¬¦" class="headerlink" title="ç²¾åº¦æ ‡è¯†ç¬¦"></a>ç²¾åº¦æ ‡è¯†ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %.nf æ ¼å¼åŒ–æµ®ç‚¹æ•°ï¼Œnè¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%.2f&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.10</span></span><br><span class="line"><span class="comment">// %e %E %f %F %g %G çš„ç²¾åº¦è¡¨ç¤º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%.2e&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.01e+01</span></span><br></pre></td></tr></table></figure><h2 id="æ ‡å¿—æ ‡è¯†ç¬¦"><a href="#æ ‡å¿—æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡å¿—æ ‡è¯†ç¬¦"></a>æ ‡å¿—æ ‡è¯†ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// %+d å¸¦ç¬¦å·çš„æ•´æ•°</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%+d&quot;</span>, <span class="number">10</span>) <span class="comment">// +10</span></span><br><span class="line"><span class="comment">// % d å¸¦ç©ºæ ¼çš„æ•´æ•°</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;% d&quot;</span>, <span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// %#x %#X å¸¦0x/0Xçš„åå…­è¿›åˆ¶</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%#x&quot;</span>, <span class="number">10</span>) <span class="comment">// 0xa</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%#X&quot;</span>, <span class="number">10</span>) <span class="comment">// 0XA</span></span><br><span class="line"><span class="comment">// %T æ‰“å°å€¼çš„ç±»å‹</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%T&quot;</span>, <span class="number">10</span>) <span class="comment">// int</span></span><br><span class="line"><span class="comment">// %v é»˜è®¤æ ¼å¼</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>, <span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// %b %d %o %x %X çš„ç®€å†™</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%b&quot;</span>, <span class="number">10</span>) <span class="comment">// 1010</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%d&quot;</span>, <span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%o&quot;</span>, <span class="number">10</span>) <span class="comment">// 12</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x&quot;</span>, <span class="number">10</span>) <span class="comment">// a</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X&quot;</span>, <span class="number">10</span>) <span class="comment">// A</span></span><br><span class="line"><span class="comment">// %U Unicodeæ ¼å¼ï¼šU+1234ï¼Œç­‰åŒäº &quot;U+%04X&quot;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%U&quot;</span>, <span class="number">65</span>) <span class="comment">// U+0041</span></span><br><span class="line"><span class="comment">// %c å¯¹åº”çš„Unicodeç å€¼</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%c&quot;</span>, <span class="number">65</span>) <span class="comment">// A</span></span><br><span class="line"><span class="comment">// %q å•å¼•å·å›´ç»•çš„å­—ç¬¦å­—é¢å€¼ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>, <span class="number">65</span>) <span class="comment">// &#x27;A&#x27;</span></span><br><span class="line"><span class="comment">// %x %X çš„ç®€å†™</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656c6c6f</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656C6C6F</span></span><br><span class="line"><span class="comment">// %s %q %x %X çš„ç®€å†™</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// hello</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// &quot;hello&quot;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656c6c6f</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X&quot;</span>, <span class="string">&quot;hello&quot;</span>) <span class="comment">// 68656C6C6F</span></span><br><span class="line"><span class="comment">// %p åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå‰ç¼€ 0x</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%p&quot;</span>, &amp;dog) <span class="comment">// 0xc0000b4000</span></span><br><span class="line"><span class="comment">// %e %E %f %F %g %G çš„ç®€å†™</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%e&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.010000e+01</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%E&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 1.010000E+01</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%f&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.100000</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%F&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.100000</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%g&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.1</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%G&quot;</span>, <span class="number">10.1</span>) <span class="comment">// 10.1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Copilot </tag>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Actionsç¬”è®°</title>
      <link href="/post/2023/04/14/17500/"/>
      <url>/post/2023/04/14/17500/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>GitHub Actionsæ˜¯GitHubçš„æŒç»­é›†æˆæœåŠ¡ï¼Œæ¯ä¸ªç”¨æˆ·æ¯æœˆéƒ½æœ‰ä¸€å®šçš„å…è´¹é¢åº¦ã€‚</p><p>GitHub Freeè´¦æˆ·æ¯æœˆå¯å…è´¹ä½¿ç”¨2000åˆ†é’Ÿï¼Œå­˜å‚¨ä¸ºæ¯ä¸ªè´¦æˆ·ç»ˆèº«500Mã€‚å…¶ä¸­Linuxè®¡æ—¶ä¸º1å€ç‡ï¼ŒWindowsè®¡æ—¶ä¸º2å€ç‡ï¼ŒmacOSè®¡æ—¶ä¸º10å€ç‡ã€‚ç®€å•æ¥è¯´å°±æ˜¯æ¯æœˆçº¯ç”¨Linuxæ„å»ºå¯ç”¨2000åˆ†é’Ÿï¼Œçº¯ç”¨Windowsæ„å»ºå¯ç”¨1000åˆ†é’Ÿï¼Œçº¯ç”¨macOSæ„å»ºå¯ç”¨200åˆ†é’Ÿã€‚æ›´å¤šè®¡è´¹è§„åˆ™å‚è€ƒ<a href="https://docs.github.com/zh/billing/managing-billing-for-github-actions/about-billing-for-github-actions">å®˜æ–¹è®¡è´¹æ–‡æ¡£</a></p><h3 id="Actionså„ç§æœ¯è¯­æ¦‚å¿µ"><a href="#Actionså„ç§æœ¯è¯­æ¦‚å¿µ" class="headerlink" title="Actionså„ç§æœ¯è¯­æ¦‚å¿µ"></a>Actionså„ç§æœ¯è¯­æ¦‚å¿µ</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">my_first_workflow</span> <span class="comment"># å·¥ä½œæµçš„åç§°</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span>  <span class="comment"># è¿™é‡Œç”¨æ¨é€ä½œä¸ºè§¦å‘æ¡ä»¶</span></span><br><span class="line">    <span class="attr">branches:</span>  <span class="comment"># å¯ä»¥æŒ‡å®šåˆ†æ”¯ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤mainåˆ†æ”¯</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">echo_and_curl_job:</span>  <span class="comment"># ç¬¬ä¸€ä¸ªä»»åŠ¡åå­—</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span> <span class="comment"># è¿™é‡ŒæŒ‡å®šç”¨æ¥è¿è¡Œä»»åŠ¡çš„ç³»ç»Ÿ</span></span><br><span class="line">    <span class="attr">steps:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">echo</span> <span class="string">something</span> <span class="comment"># ç¬¬ä¸€ä¸ªæ­¥éª¤</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;è¿™æ˜¯å¯†é’¥ï¼š$<span class="template-variable">&#123;&#123; secrets.SK &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">curl</span> <span class="string">request</span> <span class="comment"># ç¬¬äºŒä¸ªæ­¥éª¤</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">curl</span> <span class="string">https://eber.vip</span></span><br><span class="line">  <span class="attr">this_is_job2:</span> <span class="comment"># ç¬¬äºŒä¸ªä»»åŠ¡çš„åå­—</span></span><br><span class="line">    <span class="attr">run-on:</span> <span class="string">macos-latest</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">echo_and_curl_job</span> <span class="comment"># è¿™é‡Œå¯ä»¥æŒ‡å®šåœ¨echo_and_curl_jobä»»åŠ¡å®Œæˆä¹‹åå†æ‰§è¡Œè¯¥ä»»åŠ¡</span></span><br><span class="line">    <span class="attr">steps:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">echo</span> <span class="comment"># è¿™æ˜¯ç¬¬äºŒä¸ªä»»åŠ¡çš„ç¬¬ä¸€ä¸ªæ­¥éª¤</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;1&quot;</span> <span class="comment"># å…·ä½“çš„æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><ol><li>workflowï¼šå·¥ä½œæµï¼Œå¯ä»¥ç†è§£ä¸ºæ¯ä¸ªå·¥ä½œæµçš„ymlé…ç½®æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªworkflowã€‚</li><li>nameï¼šå·¥ä½œæµçš„åç§°ï¼Œå¦‚æœä¸è®¾ç½®åˆ™ä¸ºymlæ–‡ä»¶åã€‚</li><li>onï¼šè§¦å‘æ¡ä»¶ï¼Œå¯ä»¥è®¾ç½®æŸä¸ªåˆ†æ”¯çš„æ¨æ‹‰ç­‰åŠ¨ä½œè§¦å‘ã€æŸä¸ªå·¥ä½œæµæ„å»ºçŠ¶æ€å»è§¦å‘æˆ–å®šæ—¶è§¦å‘æ‰§è¡Œã€‚</li><li>jobsï¼šå·¥ä½œæµçš„ä»»åŠ¡ï¼Œä¸€ä¸ªå·¥ä½œæµå¯ä»¥æœ‰å¤šä¸ªä»»åŠ¡ã€‚</li><li>stepsï¼šä»»åŠ¡ä¸‹é¢å„ä¸ªæ‰§è¡Œæ­¥éª¤ï¼Œå°±æ˜¯åœ¨è¿™é‡Œé¢æŒ‡å®šå…·ä½“å¹²å•¥ã€‚</li></ol><h3 id="ä¸€äº›é…ç½®çš„å¤‡å¿˜å½•"><a href="#ä¸€äº›é…ç½®çš„å¤‡å¿˜å½•" class="headerlink" title="ä¸€äº›é…ç½®çš„å¤‡å¿˜å½•"></a>ä¸€äº›é…ç½®çš„å¤‡å¿˜å½•</h3><ul><li>è§¦å‘ç±» <a href="https://docs.github.com/zh/actions/using-workflows/events-that-trigger-workflows">å®˜æ–¹æ–‡æ¡£</a></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">workflow_run:</span> <span class="comment"># è®¾ç½®æŸä¸ªæŒ‡å®šçš„ä»»åŠ¡æµè¿è¡Œå®Œæˆåè§¦å‘ ï¼ˆé€‚åˆæœ‰å‰åä¾èµ–å…³ç³»çš„ä¸¤ä¸ªä»»åŠ¡æµçš„åœºæ™¯ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªå·¥ä½œæµå¤šä¸ªjobå»å®ç°</span></span><br><span class="line">    <span class="attr">workflows:</span> [<span class="string">my-build-deployment-workflow</span>]</span><br><span class="line">    <span class="attr">types:</span> [<span class="string">completed</span>]</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">issues:</span> <span class="comment"># åœºæ™¯ï¼šissuesæœ‰ç›¸å…³æ“ä½œæ—¶è§¦å‘ï¼Œå¯¹äºå¼€æºé¡¹ç›®ç»´æŠ¤è€… å¾ˆæœ‰ç”¨ã€‚</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">opened</span>, <span class="string">edited</span>, <span class="string">milestoned</span>] <span class="comment"># æ›´å¤šåŠ¨ä½œå€¼å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">schedule:</span> <span class="comment"># å®šæ—¶è§¦å‘</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span>  <span class="string">&#x27;30 5,17 * * *&#x27;</span> <span class="comment"># æ¯å¤©5ç‚¹30åˆ†å’Œ17ç‚¹30åˆ†è§¦å‘</span></span><br></pre></td></tr></table></figure><ul><li>ç¯å¢ƒå˜é‡ç±» <a href="https://docs.github.com/zh/actions/reference/environment-variables">å®˜æ–¹æ–‡æ¡£</a></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">env:</span> <span class="comment"># è®¾ç½®æ•´ä¸ªworkflowçš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">  <span class="attr">MY_NAME:</span> <span class="string">&#x27;eber&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">$&#123;&#123;</span> <span class="string">env.MY_NAME</span> <span class="string">&#125;&#125;</span> <span class="comment"># ä½¿ç”¨ç¯å¢ƒå˜é‡</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="attr">CI:</span> <span class="literal">true</span> <span class="comment"># å§‹ç»ˆä¸ºtrue</span></span><br><span class="line"><span class="attr">GITHUB_ACTION:</span> <span class="string">eber</span> <span class="comment"># æ­£åœ¨è¿è¡Œçš„æ“ä½œçš„åç§°ï¼Œæˆ–æ­¥éª¤çš„ idã€‚ ä¾‹å¦‚ï¼Œå¯¹äºæ“ä½œï¼Œä¸º __repo-owner_name-of-action-repoã€‚åœ¨å½“å‰æ­¥éª¤è¿è¡Œä¸å¸¦ id çš„è„šæœ¬æ—¶ï¼ŒGitHub ä¼šåˆ é™¤ç‰¹æ®Šå­—ç¬¦å¹¶ä½¿ç”¨åç§° __runã€‚ å¦‚æœåœ¨åŒä¸€ä½œä¸šä¸­å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„è„šæœ¬æˆ–æ“ä½œï¼Œåˆ™åç§°å°†åŒ…å«ä¸€ä¸ªç”±åºå·å‰è·Ÿä¸‹åˆ’çº¿ç»„æˆçš„åç¼€ã€‚ ä¾‹å¦‚ï¼Œè¿è¡Œçš„ç¬¬ä¸€ä¸ªè„šæœ¬çš„åç§°å°†ä¸º __runï¼Œç¬¬äºŒä¸ªè„šæœ¬çš„åç§°å°†ä¸º __run_2ã€‚ åŒæ ·ï¼Œactions/checkout çš„ç¬¬äºŒæ¬¡è°ƒç”¨å°†ä¸º actionscheckout2ã€‚</span></span><br><span class="line"><span class="attr">GITHUB_ACTION_PATH:</span> <span class="string">/home/runner/work/_actions/repo-owner/name-of-action-repo/v1</span> <span class="comment"># æ“ä½œæ‰€åœ¨çš„è·¯å¾„ã€‚ æ­¤å±æ€§ä»…åœ¨å¤åˆæ“ä½œä¸­å—æ”¯æŒã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ­¤è·¯å¾„è®¿é—®ä¸æ“ä½œä½äºåŒä¸€å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="attr">GITHUB_ACTION_REPOSITORY:</span> <span class="string">actions/checkout</span> <span class="comment"># å¯¹äºæ‰§è¡Œæ“ä½œçš„æ­¥éª¤ï¼Œè¿™æ˜¯æ“ä½œçš„æ‰€æœ‰è€…å’Œå­˜å‚¨åº“åç§°ã€‚</span></span><br><span class="line"><span class="attr">GITHUB_ACTIONS:</span> <span class="literal">true</span> <span class="comment"># å½“GitHub Actionsè¿è¡Œå·¥ä½œæµæ—¶ï¼Œå§‹ç»ˆä¸ºtrueã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å˜é‡æ¥åŒºåˆ†æµ‹è¯•æ˜¯åœ¨æœ¬åœ°è¿è¡Œè¿˜æ˜¯é€šè¿‡GitHub Actionsè¿è¡Œã€‚</span></span><br><span class="line"><span class="attr">GITHUB_SHA:</span> <span class="string">ffac537e6cbbf934b08745a378932722df287a53</span> <span class="comment"># è§¦å‘å·¥ä½œæµçš„æäº¤ SHAã€‚</span></span><br></pre></td></tr></table></figure><p>æœªå®Œå¾…ç»­ï¼ï¼ï¼æœ‰æ—¶é—´å†è¡¥å……</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub Actions </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>acme.shå¢™å†…æœ€ä½³å®è·µ</title>
      <link href="/post/2023/04/13/18567/"/>
      <url>/post/2023/04/13/18567/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å—é™äºå¤§é™†çš„<mark class="hl-label pink">ç½‘ç»œç¯å¢ƒ</mark> ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨åŸç”Ÿacme.shç”³è¯·è¯ä¹¦çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ã€‚ã€‚ã€‚ä»Šå¤©æ¨èä¸€ä¸ªå›½å†…æ¯”è¾ƒå¥½ç”¨çš„å…è´¹è¯ä¹¦ç­¾å‘æœåŠ¡ - <a href="https://freessl.cn/">FreeSSL</a> ã€‚</p><h3 id="1-å®‰è£…acme-sh"><a href="#1-å®‰è£…acme-sh" class="headerlink" title="1.å®‰è£…acme.sh"></a>1.å®‰è£…acme.sh</h3><p>è¿™ä¸ªå°±ä¸ç”¨è¯´äº†ï¼ŒåŸºäºACMEåè®®çš„æœ€å¼ºè¯ä¹¦è‡ªåŠ¨åŒ–ç¥å™¨ï¼</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…acme.sh æ¨èç”¨rootç”¨æˆ·å®‰è£…ï¼Œé¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚</span></span><br><span class="line">curl https://get.acme.sh | sh -s email=name@domain.com <span class="comment"># æµ·å¤–åŸè„šæœ¬ï¼Œå¦‚æœå¤ªæ…¢æˆ–æ ¹æœ¬è¿ä¸ä¸Šå¯ä»¥ç”¨ä¸‹é¢çš„é•œåƒç‰ˆæœ¬</span></span><br><span class="line">curl https://gitcode.net/cert/cn-acme.sh/-/raw/master/install.sh?inline=<span class="literal">false</span> | sh -s email=name@domain.com <span class="comment"># é•œåƒåœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å®Œæ¯•åé‡æ–°è¿æ¥SSHæˆ–è€…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="2-åˆ°FreeSSL-cnç”³è¯·è¯ä¹¦å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨"><a href="#2-åˆ°FreeSSL-cnç”³è¯·è¯ä¹¦å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨" class="headerlink" title="2.åˆ°FreeSSL.cnç”³è¯·è¯ä¹¦å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨"></a>2.åˆ°FreeSSL.cnç”³è¯·è¯ä¹¦å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨</h3><p>æ‰“å¼€<a href="https://freessl.cn/">FreeSSL</a>ï¼Œå¡«å†™åŸŸåï¼Œé€‰æ‹©è¯ä¹¦å“ç‰Œã€‚æ¨èé€‰æ‹©äºšæ´²è¯šä¿¡å¤šåŸŸåé€šé…ç¬¦è¯ä¹¦ï¼Œè¿™ä¸ªè¯ä¹¦æ˜¯å…è´¹ä¸‰ä¸ªæœˆçš„å¹¶ä¸”èƒ½è‡ªåŠ¨ç»­æœŸï¼Œè€Œä¸”æ˜¯é€šé…ç¬¦è¯ä¹¦ï¼Œå¯ä»¥ç”³è¯·æ³›åŸŸåè¯ä¹¦ã€‚<br><img src="/../img/acme/202304131337353.png" alt="202304131337353.png"><br>ç‚¹å‡»åˆ›å»ºå…è´¹çš„SSLè¯ä¹¦è·³è½¬åˆ°åŸŸåè§£æé…ç½®æç¤ºå¼¹çª—ç•Œé¢ï¼ˆå¦‚æœæ²¡æœ‰ç™»å½•ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼‰<br><img src="/../img/acme/202304131352341.png" alt="202304131352341.png"><br>æ ¹æ®æç¤ºåˆ›å»ºè§£æè®°å½•ï¼ˆè¿™é‡Œä»¥CloudFlareä¸ºä¾‹ï¼‰<br><img src="/../img/acme/202304131353139.png" alt="202304131353139.png"><br>åˆ›å»ºå¥½è§£æè®°å½•åï¼Œå›åˆ°é¡µé¢ç‚¹å‡» <mark class="hl-label blue">é…ç½®å®Œæˆï¼Œç«‹å³æ£€æµ‹</mark>  æŒ‰é’®ï¼Œå¦‚æœæ£€æµ‹æˆåŠŸä¼šè·³è½¬åˆ°éƒ¨ç½²ï¼Œå¦‚æœæ£€æµ‹å¤±è´¥è¯·æ£€æŸ¥è§£æè®°å½•æ˜¯å¦æ­£ç¡®ã€‚<br><img src="/../img/acme/202304131358679.png" alt="202304131358679.png"></p><p>æœ€åå¤åˆ¶acme.shéƒ¨ç½²å‘½ä»¤åˆ°æœåŠ¡å™¨æ‰§è¡Œã€‚</p><h3 id="3-å®‰è£…è‡ªåŠ¨åŒ–ä»»åŠ¡"><a href="#3-å®‰è£…è‡ªåŠ¨åŒ–ä»»åŠ¡" class="headerlink" title="3.å®‰è£…è‡ªåŠ¨åŒ–ä»»åŠ¡"></a>3.å®‰è£…è‡ªåŠ¨åŒ–ä»»åŠ¡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åªè¦ä¸Šé¢é…ç½®çš„CNAMEè®°å½•ä¸åˆ é™¤ï¼Œåç»­è¯ä¹¦å°±èƒ½æ­£å¸¸è‡ªåŠ¨ç»­æœŸã€‚</span></span><br><span class="line">acme.sh --install-cert -d test.eber.vip --key-file /usr/local/nginx/conf/ssl/test.eber.vip.key --fullchain-file /usr/local/nginx/conf/ssl/test.eber.vip.crt --reloadcmd <span class="string">&quot;service nginx force-reload&quot;</span></span><br></pre></td></tr></table></figure><mark class="hl-label pink">æ³¨æ„</mark>  å‘½ä»¤ä¸­ /usr/local/nginx/conf/ssl  æ›¿æ¢æˆä½ è‡ªå·±å­˜æ”¾è¯ä¹¦çš„ç›®å½•ã€‚åé¢çš„çš„ --reloadcmd å‚æ•°æ˜¯æŒ‡å®šè¯ä¹¦æ›´æ–°åæ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿™é‡Œæ˜¯é‡è½½Nginxé…ç½®ï¼Œå¦‚æœ‰å…¶ä»–éœ€æ±‚å¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚<h3 id="4-é…ç½®æ–‡ä»¶ç¤ºä¾‹"><a href="#4-é…ç½®æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="4.é…ç½®æ–‡ä»¶ç¤ºä¾‹"></a>4.é…ç½®æ–‡ä»¶ç¤ºä¾‹</h3><p>è¿™é‡Œæä¾›ä¸€ä¸ªnginxåå‘ä»£ç†å…¶ä»–æœåŠ¡çš„é…ç½®æ–‡ä»¶æœ€ä½³å®è·µï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ä½¿ç”¨ã€‚</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl http2;</span><br><span class="line">  <span class="attribute">ssl_certificate</span> /usr/local/nginx/conf/ssl/test.eber.vip.crt;</span><br><span class="line">  <span class="attribute">ssl_certificate_key</span> /usr/local/nginx/conf/ssl/test.eber.vip.key;</span><br><span class="line">  <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">  <span class="attribute">ssl_ciphers</span> TLS13-AES-<span class="number">256</span>-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-<span class="number">128</span>-GCM-SHA256:TLS13-AES-<span class="number">128</span>-CCM-<span class="number">8</span>-SHA256:TLS13-AES-<span class="number">128</span>-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_session_cache</span> builtin:<span class="number">1000</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_buffer_size</span> <span class="number">1400</span>;</span><br><span class="line">  <span class="attribute">add_header</span> Strict-Transport-Security max-age=<span class="number">15768000</span>; <span class="comment"># HSTSå¤´é…ç½®</span></span><br><span class="line">  <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">server_name</span> test.eber.vip;</span><br><span class="line">  <span class="attribute">access_log</span> /usr/local/nginx/wwwlogs/test.eber.vip_nginx.log combined;</span><br><span class="line">  <span class="attribute">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123; <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>; &#125;</span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://127.0.0.1:8080; <span class="comment"># ç›®æ ‡æœåŠ¡åœ°å€</span></span><br><span class="line">    <span class="attribute">include</span> proxy.conf; <span class="comment"># å¼•å…¥è‡ªå®šä¹‰çš„åä»£é…ç½®</span></span><br><span class="line">    <span class="comment"># æ”¯æŒws</span></span><br><span class="line">    <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="section">location</span> <span class="regexp">~ /(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md)</span> &#123;</span><br><span class="line">    <span class="attribute">deny</span> all;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acme.sh </tag>
            
            <tag> SSL </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>debian11å¢å¼ºå‘½ä»¤è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½</title>
      <link href="/post/2023/04/10/38742/"/>
      <url>/post/2023/04/10/38742/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å‡ å¹´ä»redhatç³»åˆ‡æ¢åˆ°debianç³»äº†ï¼Œä¸è¿‡ç»å¸¸ä½¿ç”¨çš„æ˜¯ubuntuå‘è¡Œç‰ˆã€‚æœ€è¿‘å› ä¸ºæŠ˜è…¾S905ç­‰ä¸€äº›arm&#x2F;x86ä½æ€§èƒ½ç©æ„ï¼Œæ‰€ä»¥åˆæŠ˜è…¾äº†debian11ã€‚è£…å¥½ç³»ç»Ÿåæ‰å‘ç°ä¹‹å‰ubuntu20.04è‡ªå¸¦çš„<code>bash-completion</code>å¹¶æ²¡æœ‰åœ¨debian11ä¸­é»˜è®¤å®‰è£…ã€debianç¡®å®ç²¾ç®€ğŸ˜‚ã€‘ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install bash-completion</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œä¼šå‘ç°å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºæ²¡æœ‰åŠ è½½åˆ°ç¯å¢ƒé‡Œé¢ã€‚éœ€è¦ä¿®æ”¹<code>/etc/bash.bashrc</code>æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># enable bash completion in interactive shells è¿™é‡Œå·²ç»è¯´æ˜äº†ç›´æ¥æŠŠä¸‹é¢ifè¯­å¥çš„æ³¨é‡Šå»æ‰å³å¯ã€‚</span></span><br><span class="line"><span class="comment">#if ! shopt -oq posix; then</span></span><br><span class="line"><span class="comment">#  if [ -f /usr/share/bash-completion/bash_completion ]; then</span></span><br><span class="line"><span class="comment">#    . /usr/share/bash-completion/bash_completion</span></span><br><span class="line"><span class="comment">#  elif [ -f /etc/bash_completion ]; then</span></span><br><span class="line"><span class="comment">#    . /etc/bash_completion</span></span><br><span class="line"><span class="comment">#  fi</span></span><br><span class="line"><span class="comment">#fi</span></span><br></pre></td></tr></table></figure><p>å› ä¸º<code>/etc/bashrc</code>(debianç³»æ˜¯&#x2F;etc&#x2F;bash.bashrc)ä¼šè‡ªåŠ¨åŠ è½½ï¼Œæ‰€ä»¥é‡æ–°ç™»å…¥ç»ˆç«¯å³å¯ç”Ÿæ•ˆã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ<code>source /etc/bash.bashrc</code>ä½¿ä¹‹ç”Ÿæ•ˆã€‚</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¯”å¦‚æˆ‘æƒ³æŸ¥çœ‹aptå‘½ä»¤çš„å‚æ•°ï¼Œç›´æ¥è¾“å…¥apt ç„¶åè¿æŒ‰ä¸¤æ¬¡[tab]é”®å³å¯è‡ªåŠ¨è¡¥å…¨ã€‚</span></span><br><span class="line">root@debian:~<span class="comment"># apt </span></span><br><span class="line">autoclean     build-dep     depends       edit-sources  install       policy        remove        showsrc       upgrade       </span><br><span class="line">autopurge     changelog     dist-upgrade  full-upgrade  list          purge         search        <span class="built_in">source</span>        </span><br><span class="line">autoremove    clean         download      <span class="built_in">help</span>          moo           rdepends      show          update </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> bash-completion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸­å›½ç”µä¿¡çƒ½ç«HG5143Få…‰çŒ«å¼€å¯telnetè·å–è¶…çº§å¯†ç </title>
      <link href="/post/2023/04/08/18531/"/>
      <url>/post/2023/04/08/18531/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æ–°åŠçš„ç”µä¿¡åƒå…†å®½å¸¦ï¼Œå…‰çŒ«æ˜¯çƒ½ç«HG5143Fï¼Œè¿™ä¸ªå…‰çŒ«çš„ç®¡ç†ç•Œé¢æ˜¯é€šè¿‡telnetè®¿é—®çš„ï¼Œä½†æ˜¯é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦å¼€å¯æ‰èƒ½è®¿é—®ã€‚</p><h3 id="å¼€å¯telnet"><a href="#å¼€å¯telnet" class="headerlink" title="å¼€å¯telnet"></a>å¼€å¯telnet</h3><ol><li>ç”µè„‘è¿æ¥å…‰çŒ«çš„LANå£ï¼ŒIPåœ°å€è®¾ç½®ä¸º192.168.1.2ï¼Œå­ç½‘æ©ç 255.255.255.0ï¼ˆä¾æ®å…‰çŒ«åˆå§‹é…ç½®è´´çº¸è¿›è¡Œçµæ´»é…ç½®ï¼‰</li><li>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>http://192.168.1.1:8080/cgi-bin/telnetenable.cgi?telnetenable=1&amp;key=</code> ï¼Œå…¶ä¸­keyçš„å€¼æ˜¯å…‰çŒ«åˆå§‹é…ç½®è´´çº¸ä¸Šçš„MACåœ°å€ï¼Œå»æ‰å†’å·ï¼Œå…¨éƒ¨å¤§å†™ã€‚</li><li>å¦‚æœæµè§ˆå™¨æ˜¾ç¤º<code>telnetenable=1</code> æˆ– <code>telnetå¼€å¯</code> ï¼Œåˆ™è¡¨ç¤ºå¼€å¯æˆåŠŸã€‚</li></ol><h3 id="è·å–è¶…çº§å¯†ç "><a href="#è·å–è¶…çº§å¯†ç " class="headerlink" title="è·å–è¶…çº§å¯†ç "></a>è·å–è¶…çº§å¯†ç </h3><ol><li>æ‰“å¼€ç”µè„‘ç»ˆç«¯ï¼Œè¾“å…¥<code>telnet 192.168.1.1</code> å›è½¦ï¼Œå¦‚æœå‡ºç°<code>login:</code> ï¼Œåˆ™è¡¨ç¤ºtelnetå¼€å¯æˆåŠŸã€‚</li><li>è¾“å…¥<code>telecom</code> å›è½¦ï¼Œå¦‚æœå‡ºç°<code>Password:</code> ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·åæ­£ç¡®ã€‚</li><li>è¾“å…¥<code>nE7jA%5m</code> å›è½¦ï¼Œå¦‚æœå‡ºç°<code>$</code> ï¼Œåˆ™è¡¨ç¤ºç™»å½•æˆåŠŸã€‚</li><li>è¿™æ—¶ç™»å½•çš„æ˜¯æ™®é€šç”¨æˆ·ï¼Œç„¶åè¾“å…¥<code>su</code> å›è½¦ï¼Œå‡ºç°<code>Password:</code> ï¼Œè¿™æ—¶è¾“å…¥å¯†ç ï¼š<code>Fh@5554A0</code>ï¼Œè¿™é‡Œçš„5554A0æ”¹æˆä½ è‡ªå·±å…‰çŒ«çš„MACåœ°å€åå…­ä½ï¼Œå¦‚æœç»ˆç«¯æ˜¾ç¤º<code>#</code>åˆ™è¡¨ç¤ºåˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·æˆåŠŸã€‚</li><li>è¾“å…¥å‘½ä»¤è¿›å…¥å·¥å‚æ¨¡å¼ï¼š<code>load_cli factory</code></li><li>è¾“å…¥å‘½ä»¤è·å–ç®¡ç†å‘˜ç”¨æˆ·åï¼š<code>show admin_name</code></li><li>è¾“å…¥å‘½ä»¤è·å–ç®¡ç†å‘˜å¯†ç ï¼š<code>show admin_pwd</code> å›æ˜¾çš„è¿™ä¸ªå¯†ç å°±æ˜¯å…‰çŒ«çš„è¶…çº§å¯†ç ã€‚</li></ol><p>OKï¼ç°åœ¨å°±å¯ä»¥ç›´æ¥å»å…‰çŒ«webç®¡ç†ç«¯ç™»å½•äº†ï¼Œå»ä¿®æ”¹æ¡¥æ¥æ¨¡å¼æˆ–ä¿®æ”¹å…¶ä»–æ™®é€šç”¨æˆ·æ— æ³•ä¿®æ”¹çš„è®¾ç½®é¡¹ï¼</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>âš ï¸ ä¸éœ€è¦è®°å½•è¿™é‡Œçš„è¶…çº§å¯†ç ï¼Œå¤§éƒ¨åˆ†è®¾å¤‡é‡å¯åå†è¿›è¡Œè·å–å°±ä¼šå˜æ›´ã€‚æ¯æ¬¡éœ€è¦ç”¨çš„æ—¶å€™å°±é‡å¤ä¸Šè¿°æ­¥éª¤è·å–å³å¯ï¼</p>]]></content>
      
      
      <categories>
          
          <category> çæŠ˜è…¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…‰çŒ« </tag>
            
            <tag> Telnet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Charlesæ•™ç¨‹3 - ä¿®æ”¹è¯·æ±‚å’Œå“åº”</title>
      <link href="/post/2022/06/19/5631/"/>
      <url>/post/2022/06/19/5631/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€æ‰‹åŠ¨é€‰æ‹©ä¿®æ”¹è¯·æ±‚"><a href="#1ã€æ‰‹åŠ¨é€‰æ‹©ä¿®æ”¹è¯·æ±‚" class="headerlink" title="1ã€æ‰‹åŠ¨é€‰æ‹©ä¿®æ”¹è¯·æ±‚"></a>1ã€æ‰‹åŠ¨é€‰æ‹©ä¿®æ”¹è¯·æ±‚</h3><p><strong>è¿™ç§é€‚åˆéœ€è¦æ‰‹åŠ¨ä¿®æ”¹è¯·æ±‚å¹¶é‡å‘çš„åœºæ™¯ã€‚ï¼ˆéœ€è¦ä¿®æ”¹hostä¸éœ€è¦ä¿®æ”¹å“åº”ï¼‰</strong></p><p>å½“æˆ‘ä»¬æ•è·åˆ°æƒ³è¦ä¿®æ”¹çš„æ¥å£åï¼Œå¯é€‰æ‹©æ¥å£åç„¶åç‚¹å‡»ç¼–è¾‘å›¾æ ‡è¿›å…¥<br><img src="/../img/charles/20220715150129.png" alt="20220715150129.png"></p><p>åœ¨ç¼–è¾‘ç•Œé¢ï¼Œå¯ä»¥ç¼–è¾‘è¯·æ±‚æ–¹å¼ã€URLã€HTTPç‰ˆæœ¬ã€è¯·æ±‚å¤´ã€é‰´æƒã€å…¥å‚ç­‰ã€‚</p><p>ä¾‹å¦‚ï¼šæˆ‘ä¿®æ”¹äº†URLï¼Œè®©ä»–è¯·æ±‚æˆ‘æœ¬åœ°ideaä¸­å¯åŠ¨çš„æœåŠ¡è¿›è¡Œæœ¬åœ°è°ƒè¯•ã€‚</p><p><img src="/../img/charles/20220715150424.png" alt="20220715150424.png"></p><p>ä¿®æ”¹å®Œæ¯•åç›´æ¥ç‚¹å‡» Execute æ‰§è¡Œè¯·æ±‚å³å¯ï¼</p><h3 id="2ã€æ–­ç‚¹çš„æ–¹å¼è‡ªåŠ¨è¿›å…¥è¯·æ±‚å’Œå“åº”çš„ä¿®æ”¹"><a href="#2ã€æ–­ç‚¹çš„æ–¹å¼è‡ªåŠ¨è¿›å…¥è¯·æ±‚å’Œå“åº”çš„ä¿®æ”¹" class="headerlink" title="2ã€æ–­ç‚¹çš„æ–¹å¼è‡ªåŠ¨è¿›å…¥è¯·æ±‚å’Œå“åº”çš„ä¿®æ”¹"></a>2ã€æ–­ç‚¹çš„æ–¹å¼è‡ªåŠ¨è¿›å…¥è¯·æ±‚å’Œå“åº”çš„ä¿®æ”¹</h3><p><strong>è¿™ç§é€‚åˆè§¦å‘åè‡ªåŠ¨è¿›å…¥ç¼–è¾‘ï¼ˆå¯ç¼–è¾‘è¯·æ±‚å’Œå“åº”ï¼Œä½†æ— æ³•ä¿®æ”¹hostï¼‰</strong></p><p>å½“æˆ‘ä»¬æ•è·åˆ°æƒ³è¦ä¿®æ”¹çš„æ¥å£åï¼Œå¯é€‰æ‹©æ¥å£åç„¶åå³é”®é€‰ä¸­ Breakpoints ï¼Œç„¶åå½“ä½ å†è§¦å‘è¯¥æ¥å£æ—¶ä¼šè‡ªåŠ¨è·³åˆ°ç¼–è¾‘é¡µé¢</p><p><img src="/../img/charles/20220715153711.png" alt="20220715153711.png"></p><p>è¯·æ±‚å¤´ã€å‚æ•°ç­‰ä¿®æ”¹å®Œä¹‹åå¯ä»¥ç›´æ¥ç‚¹å‡» Execute å‘é€è¯·æ±‚ï¼Œç„¶åç­‰å¾…å“åº”åä¹Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ°å“åº”ç¼–è¾‘é¡µé¢</p><p>ä¾‹å¦‚ï¼šæˆ‘è¿™é‡Œä¿®æ”¹äº†å“åº”æ•°æ®ä¸­çš„ message å’Œ data.origin</p><p><img src="/../img/charles/20220715153917.png" alt="20220715153917.png"></p><p>åŒæ ·ç‚¹å‡» Execute ä¹‹åå°±å¯ä»¥æŠŠå“åº”å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p>ğŸŒ§ï¸ é¢„å‘Š ï¼šä¸‹ä¸ªæ•™ç¨‹ä¼šå†™Map Remote Settings å’Œ Map Local Settings çš„ç”¨æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Charles </tag>
            
            <tag> æŠ“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å“7ä»¥ä¸Šç³»ç»Ÿå®‰è£…Charlesè¯ä¹¦åˆ°ç³»ç»ŸåŒº</title>
      <link href="/post/2022/06/11/2897/"/>
      <url>/post/2022/06/11/2897/</url>
      
        <content type="html"><![CDATA[<p>ğŸ‘‰ æœ¬æ–‡ä»¥çº¢ç±³æ‰‹æœºï¼ˆAndroid 10ï¼‰ä¸ºä¾‹ï¼Œå…¶ä»–å®‰å“æ‰‹æœºæµç¨‹åŸºæœ¬ä¸€è‡´ã€‚</p><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼š</p><ol><li>ç”µè„‘ï¼ˆwinã€macã€linuxå‡å¯ï¼‰</li><li>ä¸€ä¸ªå·²ç»è·å–rootæƒé™çš„æ‰‹æœº</li><li>adb</li><li>æ‰‹å’Œè„‘å­</li></ol><h2 id="ä¸€ã€å®‰è£…adb"><a href="#ä¸€ã€å®‰è£…adb" class="headerlink" title="ä¸€ã€å®‰è£…adb"></a>ä¸€ã€å®‰è£…adb</h2><p>æˆ‘ä»¬å…ˆå» <a href="https://developer.android.com/studio/releases/platform-tools">å®˜ç½‘</a> ä¸‹è½½å¯¹åº”ä½ ç”µè„‘ç‰ˆæœ¬çš„ <a href="https://developer.android.com/studio/releases/platform-tools">Android SDK Platform-Tools</a>  æ­¤æ—¶ä½ ä¼šå¾—åˆ°ä¸€ä¸ªzipåŒ…ï¼Œè§£å‹ç­‰å¾…æ“ä½œã€‚</p><ul><li><p>winï¼šwindowsç¯å¢ƒä¸‹ç›´æ¥è§£å‹zipåŒ…ï¼Œç„¶ååœ¨ç¯å¢ƒå˜é‡Pathä¸­æ·»åŠ è¯¥è·¯å¾„(ä¾‹å¦‚C:\platform-tools)ã€‚<br><img src="https://up.eber.vip/Think-Me/img/main/upload/20220610114631.png"></p></li><li><p>macå’Œlinuxï¼šmacå’Œlinuxç¯å¢ƒä¸‹ç›´æ¥è§£å‹zipåŒ…ï¼Œç„¶åç›´æ¥</p></li></ul><p><code>export PATH=$&#123;PATH&#125;:/Users/ebert/Documents/platform-tools</code> å³å¯ã€‚</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/20220610115537.png"></p><p>æ— è®ºå“ªä¸ªç¯å¢ƒå“ªç§æ–¹å¼å®‰è£…ï¼Œåªè¦æå®Œä¹‹åæ‰§è¡Œadbå‘½ä»¤ä¼šå‡ºç°å¸®åŠ©ä¿¡æ¯å³ä¸ºæˆåŠŸã€‚</p><h2 id="äºŒã€å¼€æ"><a href="#äºŒã€å¼€æ" class="headerlink" title="äºŒã€å¼€æ"></a>äºŒã€å¼€æ</h2><h3 id="1-è¯ä¹¦å¯¼å‡º"><a href="#1-è¯ä¹¦å¯¼å‡º" class="headerlink" title="1. è¯ä¹¦å¯¼å‡º"></a>1. è¯ä¹¦å¯¼å‡º</h3><p>å¯åŠ¨Charlesï¼ˆå…¶ä»–æŠ“åŒ…è½¯ä»¶æ“ä½œç±»ä¼¼ï¼‰ï¼Œä¾æ¬¡ç‚¹å‡» Help -&gt; SSL Proxying -&gt; Save Charles Root Certificateâ€¦ å°†è¯ä¹¦å¯¼å‡ºï¼ˆwindowsä¸‹æœ‰ä¸ªå°bugï¼Œå¯¼å‡ºçš„è¯ä¹¦åå­—ä¼šæ˜¯ä½ é€‰æ‹©çš„ç›®å½•åï¼Œå¹¶ä¸”ä½ç½®æ˜¯å’Œä½ æ‰€é€‰çš„æ–‡ä»¶å¤¹åŒçº§ï¼‰</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/20220614100329.png"></p><h3 id="2-è¯ä¹¦è½¬æ¢"><a href="#2-è¯ä¹¦è½¬æ¢" class="headerlink" title="2. è¯ä¹¦è½¬æ¢"></a>2. è¯ä¹¦è½¬æ¢</h3><p>å¯¼å‡ºçš„è¿™ä¸ª <code>charles-ssl-proxying-certificate.pem</code> è¯ä¹¦ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯éœ€è¦å…ˆè®¡ç®—å‡ºè¿™ä¸ªè¯ä¹¦ä¸»é¢˜ï¼ˆsubjectï¼‰çš„MD5å€¼ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl x509 -subject_hash_old -in charles-ssl-proxying-certificate.pem|head -n 1</span><br></pre></td></tr></table></figure><h3 id="3-è¯ä¹¦é‡å‘½å"><a href="#3-è¯ä¹¦é‡å‘½å" class="headerlink" title="3. è¯ä¹¦é‡å‘½å"></a>3. è¯ä¹¦é‡å‘½å</h3><p>ç„¶åå°†å¯¼å‡ºçš„è¯ä¹¦é‡å‘½åä¸º <code>md5å€¼ + .0</code> çš„æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv charles-ssl-proxying-certificate.pem de70e315.0</span><br></pre></td></tr></table></figure><p>å½“ç„¶äº†ï¼Œé‡å‘½åä¹Ÿå¯ä»¥ç›´æ¥åœ¨GUIä¸Šè¿›è¡Œï¼Œä¾‹å¦‚windowsç³»ç»Ÿç›´æ¥å³é”®ç‚¹å‡»æ–‡ä»¶ç„¶åé€‰æ‹©é‡å‘½åå³å¯ã€‚</p><h3 id="4-å°†è¯ä¹¦å¯¼å…¥æ‰‹æœºç³»ç»Ÿè¯ä¹¦åŒº"><a href="#4-å°†è¯ä¹¦å¯¼å…¥æ‰‹æœºç³»ç»Ÿè¯ä¹¦åŒº" class="headerlink" title="4. å°†è¯ä¹¦å¯¼å…¥æ‰‹æœºç³»ç»Ÿè¯ä¹¦åŒº"></a>4. å°†è¯ä¹¦å¯¼å…¥æ‰‹æœºç³»ç»Ÿè¯ä¹¦åŒº</h3><ul><li>å…ˆä½¿ç”¨ä½ ä¹ æƒ¯çš„æ–¹å¼å°†æ–‡ä»¶ä¼ å…¥æ‰‹æœºä¸­ï¼Œè¿™é‡Œæˆ‘æ˜¯ç”¨ <code>adb push</code> ã€‚ï¼ˆä½ ç”šè‡³å¯ä»¥ç”¨QQï¼Œå¾®ä¿¡ç­‰ä»»ä½•æ–¹å¼å°†æ–‡ä»¶ä¼ å…¥æ‰‹æœºä¸­ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb push de70e315.0 /sdcard</span><br></pre></td></tr></table></figure><p>ğŸ‘‰ æˆ‘è¿™é‡Œä¿å­˜åˆ°äº† <code>/sdcard</code> ç›®å½•ï¼Œç°åœ¨çš„å®‰å“æ‰‹æœºè‡ªå¸¦å‚¨å­˜çš„ç›®å½•åä¸€èˆ¬ä¸º <code>sdcard</code> æ‰€ä»¥æˆ‘è¿™ä¸ªå¯ä»¥ç†è§£ä¸ºå½“å‰â€æ‰‹æœºæ–‡ä»¶ç®¡ç†â€œçš„æ ¹ç›®å½•ä¸‹ã€‚</p><ul><li>ç„¶åå°†è¯ä¹¦ç§»åŠ¨åˆ° <code>/system/etc/security/cacerts</code> ç›®å½•ä¸‹ï¼Œä¸è¿‡é»˜è®¤è¿™ä¸ªç›®å½•æ˜¯åªè¯»ç›®å½•ï¼Œæ‰€ä»¥â€œæš´åŠ›ä¸€ç‚¹â€é‡æ–°æŒ‚è½½ä¸€ä¸‹æ ¹åˆ†åŒºå³å¯ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb shell # è¿›å…¥æ‰‹æœºshell</span><br><span class="line">su # åˆ‡æ¢ä¸ºrootèº«ä»½</span><br><span class="line">mount -o rw,remount / # é‡æ–°æŒ‚è½½æ ¹åˆ†åŒºä¸ºå¯è¯»å†™</span><br><span class="line">mv /sdcard/de70e315.0 /system/etc/security/cacerts # ç§»åŠ¨è¯ä¹¦</span><br><span class="line">chmod 644 /system/etc/security/cacerts/de70e315.0 # æ›´æ”¹æ–‡ä»¶æƒé™</span><br><span class="line">exit # é€€å‡ºrootèº«ä»½</span><br><span class="line">exit # é€€å‡ºshellè¿æ¥</span><br><span class="line">adb reboot # é‡å¯æ‰‹æœº</span><br></pre></td></tr></table></figure><p>âš ï¸ ä½ åœ¨ç§»åŠ¨è¯ä¹¦åˆ° <code>/system/etc/security/cacerts</code> æ—¶å¯èƒ½ä¼šæç¤ºç©ºé—´ä¸è¶³ï¼Œè¿™æ—¶ä½ éœ€è¦åˆ é™¤ä¸€ä¸ªæ— ç”¨çš„ç³»ç»Ÿå†…ç½®appå³å¯ï¼Œæˆ‘è¿™é‡Œåˆ é™¤çš„æ˜¯â€œç”µå•†åŠ©æ‰‹â€ <code>rm -rf /system/app/mab</code> ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ“åŒ… </tag>
            
            <tag> å®‰å“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºlimitsä¸ç”Ÿæ•ˆçš„é—®é¢˜</title>
      <link href="/post/2022/04/16/29640/"/>
      <url>/post/2022/04/16/29640/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰æƒ…æè¦ï¼š"><a href="#å‰æƒ…æè¦ï¼š" class="headerlink" title="å‰æƒ…æè¦ï¼š"></a>å‰æƒ…æè¦ï¼š</h2><p>æœ€è¿‘å‡ å¤©ä½¿ç”¨trojan-goæ€»æ˜¯é‡åˆ°ä¸èƒ½ä¸Šç½‘çš„æƒ…å†µï¼Œç»è¿‡ä¸€ç³»åˆ—çš„æ’æŸ¥å‘ç°å¹¶ä¸æ˜¯åŸŸåæˆ–æœåŠ¡å™¨è¢«å¢™äº†ã€‚ç„¶åæˆ‘å¼€å§‹æŸ¥trojançš„æ—¥å¿—ï¼Œå‘ç°æœ‰å¾ˆå¤š<code>read: connection timed out</code>çš„æŠ¥é”™ã€‚åˆæ­¥çŒœæµ‹åº”è¯¥æ˜¯è¿æ¥ä¸Šé™äº†ï¼Œäºæ˜¯æˆ‘è°ƒæ•´äº†å†…æ ¸å‚æ•°<code>fs.file-max=1000000</code>ã€‚æœ¬ä»¥ä¸ºå°±ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µäº†ï¼Œä½†äº‹ä¸æ„¿è¿ï¼Œä¸€å¤©ä¹‹ååˆå‡ºç°åŒæ ·çš„é—®é¢˜ï¼ï¼ï¼æˆ‘æœ‰ç‚¹æ‡µäº†ï¼Œæˆ‘å¼€å§‹æ€€ç–‘trojanæ²¡æœ‰ç»§æ‰¿åˆšæ‰çš„open filesé…ç½®ï¼Œäºæ˜¯åˆå¼€å§‹äº†æ–°ä¸€è½®çš„æ’æŸ¥ï¼š</p><ol><li>å…ˆæ‰¾å‡ºtrojançš„PID</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ip-172-26-12-41:~# ps -ef|grep trojan</span><br><span class="line">root        2080       1  0 May26 ?        00:00:33 /usr/bin/trojan/trojan -config /usr/local/etc/trojan/config.json</span><br><span class="line">root       35254       1  0 03:00 ?        00:00:03 /usr/local/bin/trojan web -p 1080</span><br><span class="line">root       40802   39795  0 11:05 pts/0    00:00:00 grep --color=auto trojan</span><br></pre></td></tr></table></figure><ol start="2"><li>ç„¶åæŸ¥è¯¢2080çš„Soft Limit</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ip-172-26-12-41:~# cat /proc/2080/limits </span><br><span class="line">Limit                     Soft Limit           Hard Limit           Units     </span><br><span class="line">Max cpu time              unlimited            unlimited            seconds   </span><br><span class="line">Max file size             unlimited            unlimited            bytes     </span><br><span class="line">Max data size             unlimited            unlimited            bytes     </span><br><span class="line">Max stack size            8388608              unlimited            bytes     </span><br><span class="line">Max core file size        0                    unlimited            bytes     </span><br><span class="line">Max resident set          unlimited            unlimited            bytes     </span><br><span class="line">Max processes             3882                 3882                 processes </span><br><span class="line">Max open files            1024                 524288               files     </span><br><span class="line">Max locked memory         65536                65536                bytes     </span><br><span class="line">Max address space         unlimited            unlimited            bytes     </span><br><span class="line">Max file locks            unlimited            unlimited            locks     </span><br><span class="line">Max pending signals       3882                 3882                 signals   </span><br><span class="line">Max msgqueue size         819200               819200               bytes     </span><br><span class="line">Max nice priority         0                    0                    </span><br><span class="line">Max realtime priority     0                    0                    </span><br><span class="line">Max realtime timeout      unlimited            unlimited            us</span><br></pre></td></tr></table></figure><p>å‘ç°Max open filesçš„Soft Limitä¾æ—§æ˜¯1024ï¼Œå¹¶ä¸”Hard Limitæ˜¯524288 è¿™å¹¶ä¸æ˜¯æˆ‘åˆšæ‰è®¾ç½®çš„1000000ã€‚</p><p>ç»è¿‡åœ¨å¯¹trojanæœåŠ¡çš„å®šä½ï¼Œå‘ç°è¯¥æœåŠ¡æ˜¯ä»¥ç³»ç»ŸæœåŠ¡çš„æ–¹å¼è¿è¡Œï¼Œå¹¶æ²¡æœ‰å»éµå¾ªç”¨æˆ·æœåŠ¡çš„limitsé…ç½®ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><ol><li>é’ˆå¯¹ç”¨æˆ·æœåŠ¡çš„limitsé…ç½®</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ip-172-26-12-41:~# sysctl -w fs.file-max=1000001</span><br><span class="line">fs.file-max = 1000001</span><br><span class="line">root@ip-172-26-12-41:~# sysctl -p</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥ç¼–è¾‘ <code>/etc/sysctl.conf</code> æ–‡ä»¶è¿½åŠ  <code>fs.file-max = 1000000</code> ç„¶åä¿å­˜é‡å¯å³å¯ã€‚</p><ol start="2"><li>é’ˆå¯¹ç³»ç»ŸæœåŠ¡</li></ol><ul><li>å…¨å±€è®¾ç½®</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ip-172-26-12-41:~# vi /etc/systemd/system.conf </span><br></pre></td></tr></table></figure><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202205281125454.png"></p><p>æ‰¾åˆ° <code>DefaultLimitNOFILE</code> ç„¶åä¿®æ”¹ä¸º 1000000 æˆ–è€…æ˜¯ 102400:1000000 ï¼Œå‰è€…è½¯ç¡¬å‡ä¸º1000000ã€åè€…è½¯ç¡¬åˆ†å¼€è®¾ç½®ã€‚ã€&lt;Soft Limit&gt;:&lt;Hard Limit&gt;ã€‘</p><ul><li>å•æœåŠ¡çš„é™åˆ¶</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ip-172-26-12-41:~# vi /etc/systemd/system/trojan.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=trojan-go</span><br><span class="line">After=network.target network-online.target nss-lookup.target mysql.service mariadb.service mysqld.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">LimitNOFILE=65535 // è¿™é‡ŒåŠ å…¥LimitNOFILEçš„é…ç½®å³å¯</span><br><span class="line">StandardError=journal</span><br><span class="line">ExecStart=/usr/bin/trojan/trojan -config /usr/local/etc/trojan/config.json</span><br><span class="line">ExecReload=/bin/kill -HUP $MAINPID</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=3s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">// ä¿å­˜æ–‡ä»¶åéœ€è¦é‡è½½æœåŠ¡ï¼Œç„¶åå†é‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆ</span><br><span class="line">root@ip-172-26-12-41:~# systemctl daemon-reload </span><br><span class="line">root@ip-172-26-12-41:~# systemctl restart trojan.service</span><br><span class="line">root@ip-172-26-12-41:~# ps -ef|grep trojan</span><br><span class="line">root       35254       1  0 03:00 ?        00:00:03 /usr/local/bin/trojan web -p 1080</span><br><span class="line">root       41521       1  0 11:41 ?        00:00:00 /usr/bin/trojan/trojan -config /usr/local/etc/trojan/config.json</span><br><span class="line">root       41544   39795  0 11:41 pts/0    00:00:00 grep --color=auto trojan</span><br><span class="line">root@ip-172-26-12-41:~# cat /proc/41521/limits </span><br><span class="line">Limit                     Soft Limit           Hard Limit           Units     </span><br><span class="line">Max cpu time              unlimited            unlimited            seconds   </span><br><span class="line">Max file size             unlimited            unlimited            bytes     </span><br><span class="line">Max data size             unlimited            unlimited            bytes     </span><br><span class="line">Max stack size            8388608              unlimited            bytes     </span><br><span class="line">Max core file size        0                    unlimited            bytes     </span><br><span class="line">Max resident set          unlimited            unlimited            bytes     </span><br><span class="line">Max processes             3882                 3882                 processes </span><br><span class="line">Max open files            65535                65535                files     </span><br><span class="line">Max locked memory         65536                65536                bytes     </span><br><span class="line">Max address space         unlimited            unlimited            bytes     </span><br><span class="line">Max file locks            unlimited            unlimited            locks     </span><br><span class="line">Max pending signals       3882                 3882                 signals   </span><br><span class="line">Max msgqueue size         819200               819200               bytes     </span><br><span class="line">Max nice priority         0                    0                    </span><br><span class="line">Max realtime priority     0                    0                    </span><br><span class="line">Max realtime timeout      unlimited            unlimited            us</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Charlesæ•™ç¨‹2 - æŠ“httpsåŒ…</title>
      <link href="/post/2022/03/06/45371/"/>
      <url>/post/2022/03/06/45371/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€ï¼šæœ¬æ•™ç¨‹åŸºäºMac-iPhoneç¯å¢ƒï¼ŒWindowså’Œå®‰å“è®¾å¤‡ä¸æ˜¯å®Œå…¨ä¸€è‡´ï¼Œä½†æŒ‰ç…§é€»è¾‘è¿›è¡Œé…ç½®ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚"><a href="#å‰è¨€ï¼šæœ¬æ•™ç¨‹åŸºäºMac-iPhoneç¯å¢ƒï¼ŒWindowså’Œå®‰å“è®¾å¤‡ä¸æ˜¯å®Œå…¨ä¸€è‡´ï¼Œä½†æŒ‰ç…§é€»è¾‘è¿›è¡Œé…ç½®ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚" class="headerlink" title="å‰è¨€ï¼šæœ¬æ•™ç¨‹åŸºäºMac + iPhoneç¯å¢ƒï¼ŒWindowså’Œå®‰å“è®¾å¤‡ä¸æ˜¯å®Œå…¨ä¸€è‡´ï¼Œä½†æŒ‰ç…§é€»è¾‘è¿›è¡Œé…ç½®ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚"></a>å‰è¨€ï¼šæœ¬æ•™ç¨‹åŸºäºMac + iPhoneç¯å¢ƒï¼ŒWindowså’Œå®‰å“è®¾å¤‡ä¸æ˜¯å®Œå…¨ä¸€è‡´ï¼Œä½†æŒ‰ç…§é€»è¾‘è¿›è¡Œé…ç½®ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚</h2><h3 id="1-é…ç½®è°ƒä¼˜"><a href="#1-é…ç½®è°ƒä¼˜" class="headerlink" title="1. é…ç½®è°ƒä¼˜"></a>1. é…ç½®è°ƒä¼˜</h3><ul><li><p>æ‰“å¼€Proxy - Proxy Settings - macOS å–æ¶ˆå‹¾é€‰Enable macOS proxy on launchã€‚<br>ğŸ‘‰ ä¸ªäººä¸å–œæ¬¢æ¯æ¬¡è½¯ä»¶æ‰“å¼€å°±é»˜è®¤æŠ“æœ¬åœ°ç”µè„‘çš„åŒ…<br><img src="/../img/charles/202204272339095.png" alt="202204272339095.png"></p></li><li><p>æ‰“å¼€Proxy - Access Control Settings å°†0.0.0.0&#x2F;0 Addåˆ°IP Rangeä¸­ã€‚<br>ğŸ‘‰ è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡æœ‰æ–°è®¾å¤‡è¿›æ¥æ‰‹åŠ¨å»allowäº†<br><img src="/../img/charles/202204272339657.png" alt="202204272339657.png"></p></li></ul><h3 id="2-è¯ä¹¦é…ç½®"><a href="#2-è¯ä¹¦é…ç½®" class="headerlink" title="2. è¯ä¹¦é…ç½®"></a>2. è¯ä¹¦é…ç½®</h3><ul><li>ç”µè„‘ç«¯(æœåŠ¡ç«¯)ï¼šHelp - SSL Proxying - Install Charles Root Cartificate å®‰è£…ç”µè„‘ç«¯æ ¹è¯ä¹¦ã€‚<br><img src="/../img/charles/202204272343306.png" alt="202204272343306.png"><br>âš ï¸ Macæ¯”Windowså¤šäº†ä¸€ä¸ªæ­¥éª¤ï¼šæ‰‹åŠ¨å»Keychain Access æ‰¾åˆ°è¯¥è¯ä¹¦é€‰æ‹©æ°¸è¿œä¿¡ä»»ã€‚(æ ¹æ®ä½ çš„å®‰è£…ä½ç½®æ‰¾ï¼Œä½ çš„ä¸ä¸€å®šåœ¨loginã€‚ä¹Ÿå¯èƒ½åœ¨systemæˆ–system rootsä¸­)<br><img src="/../img/charles/202204272357980.png" alt="202204272357980.png"></li><li>ç§»åŠ¨ç«¯(å®¢æˆ·ç«¯)ï¼šHelp - SSL Proxying - Install Charles Root Cartificate on aMobile Device or Remote Browser åæœ‰å¦‚ä¸‹å›¾æç¤ºï¼š<br><img src="/../img/charles/202204272345446.png" alt="202204272345446.png"><br>ğŸ‘‰ æ­¤æ—¶æ‰‹æœºWi-Fiä¸­è®¾ç½®ä»£ç†åˆ°ç”µè„‘å±€åŸŸç½‘ipçš„8888ç«¯å£ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="chls.pro/ssl">chls.pro&#x2F;ssl</a> ç›´æ¥ä¸‹è½½è¯ä¹¦åˆ°è®¾å¤‡ä¸­ã€‚æ­¤æ—¶æ‰‹æœºä¼šæç¤ºè®©ä½ åˆ° â€œè®¾ç½®â€ ä¸­å®‰è£…è¯ä¹¦ã€‚<br>âš ï¸ iPhoneæ‰‹æœºiOS10åŠæ›´é«˜ç³»ç»Ÿéœ€è¦åˆ° â€œé€šç”¨ - å…³äºæ‰‹æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½®â€ ç‚¹å‡»ä¿¡ä»»æ ¹è¯ä¹¦ã€‚<br><img src="/../img/charles/202204272353568.jpg" alt="202204272353568.jpg"></li></ul><h3 id="3-æ„‰å¿«çš„æŠ“åŒ…"><a href="#3-æ„‰å¿«çš„æŠ“åŒ…" class="headerlink" title="3. æ„‰å¿«çš„æŠ“åŒ…"></a>3. æ„‰å¿«çš„æŠ“åŒ…</h3><p>ğŸ‰ ğŸ‰ ğŸ‰ åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬å·²ç»å¯ä»¥å¼€å§‹ç”¨Charlesæ„‰å¿«çš„æŠ“åŒ…äº†ã€‚</p><p>æ›´å¤šæ•™ç¨‹ï¼Œè¯·ç­‰å¾…ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Charles </tag>
            
            <tag> æŠ“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxçš„é…ç½®æ•™ç¨‹ - locationå¤šçº§ç›®å½•</title>
      <link href="/post/2022/03/05/50754/"/>
      <url>/post/2022/03/05/50754/</url>
      
        <content type="html"><![CDATA[<h3 id="éœ€æ±‚èƒŒæ™¯"><a href="#éœ€æ±‚èƒŒæ™¯" class="headerlink" title="éœ€æ±‚èƒŒæ™¯"></a>éœ€æ±‚èƒŒæ™¯</h3><p>ğŸ‘‰ æœ‰æ—¶å€™æˆ‘ä»¬ä¼šæœ‰è¿™ä¹ˆä¸€ç§åœºæ™¯ï¼šä¸€ä¸ªåŸŸåä¸‹éœ€è¦æŒ‚å¤šä¸ªé¡¹ç›®æˆ–è€…æ˜¯å¤šä¸ªæœåŠ¡ã€‚è¿™æ—¶å°±éœ€è¦æˆ‘ä»¬é€šè¿‡å¤šä¸ªlocationå»å¤„ç†ä¸åŒçš„æœåŠ¡è¯·æ±‚ã€‚ï¼ˆå½“ç„¶äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ä¸€ä¸ªå­åŸŸåå¯¹åº”ä¸€ä¸ªæœåŠ¡ï¼‰</p><h3 id="é…ç½®ç¤ºä¾‹"><a href="#é…ç½®ç¤ºä¾‹" class="headerlink" title="é…ç½®ç¤ºä¾‹"></a>é…ç½®ç¤ºä¾‹</h3><ul><li>rootæ–¹å¼æŒ‡å®š</li></ul><pre><code class="nginx">    location /p1/ &#123;        root /www/project; # èµ„æºç›®å½•åœ¨/www/project/p1/        index index.html;    &#125;<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">* aliasæ–¹å¼æŒ‡å®š</span><br><span class="line"></span><br><span class="line">```nginx</span><br><span class="line">location /p1/ &#123;</span><br><span class="line">alias /www/project/; # èµ„æºç›®å½•åœ¨/www/project/</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>### æ€»ç»“ğŸ‘‰ root æŒ‡å®šä¸Šçº§ç›®å½•ï¼Œå¹¶ä¸”è¯¥ä¸Šçº§ç›®å½• ä¸€å®šè¦å«æœ‰locatoinæŒ‡å®šåç§°çš„åŒåç›®å½•ã€‚ğŸ‘‰ alias æŒ‡å®šçš„ç›®å½•æ˜¯å‡†ç¡®çš„ï¼Œç»™locationæŒ‡å®šä¸€ä¸ªç›®å½•ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Charlesæ•™ç¨‹1 - å®‰è£…åŠç ´è§£</title>
      <link href="/post/2022/02/26/59239/"/>
      <url>/post/2022/02/26/59239/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€ï¼šæˆ‘ä¸ºä»€ä¹ˆä½¿ç”¨Charlesï¼Ÿ"><a href="#å‰è¨€ï¼šæˆ‘ä¸ºä»€ä¹ˆä½¿ç”¨Charlesï¼Ÿ" class="headerlink" title="å‰è¨€ï¼šæˆ‘ä¸ºä»€ä¹ˆä½¿ç”¨Charlesï¼Ÿ"></a>å‰è¨€ï¼šæˆ‘ä¸ºä»€ä¹ˆä½¿ç”¨Charlesï¼Ÿ</h3><p>ğŸ‘‰  åšä¸»ä¸€ç›´æ˜¯Macç”¨æˆ·ï¼Œå¾ˆä¹…ä¹‹å‰Fiddlerå’ŒWireshark(ä¾§é‡ç‚¹ä¹Ÿä¸åŒ)åœ¨Macç³»ç»Ÿä¸Šçš„é€‚é…ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥å°±ç”¨äº†é€‚é…æ¯”è¾ƒå¥½çš„Charlesã€‚ç¬¬ä¸€æ¬¡æ¥è§¦Charlesåº”è¯¥æ˜¯2017å¹´ï¼Œä»é‚£ä»¥åä¸€ç›´å†æŒç»­ä½¿ç”¨ï¼Œæ²¡å†å® å¹¸è¿‡å¦å¤–ä¿©ã€‚ã€è¿™å¤§æ¦‚æ˜¯ä¸€ä¸ªè¿Ÿåˆ°äº†å››äº”å¹´çš„æ•™ç¨‹äº†ğŸ˜‚ã€‘</p><h3 id="1-Charlesç®€è¿°"><a href="#1-Charlesç®€è¿°" class="headerlink" title="1. Charlesç®€è¿°"></a>1. Charlesç®€è¿°</h3><ul><li>å®˜æ–¹æè¿°ï¼š<br><a href="https://www.charlesproxy.com/overview/about-charles/">Charles is an HTTP proxy &#x2F; HTTP monitor &#x2F; Reverse Proxy that enables a developer to view all of the HTTP and SSL &#x2F; HTTPS traffic between their machine and the Internet. This includes requests, responses and the HTTP headers (which contain the cookies and caching information).</a></li><li>åšä¸»æè¿°ï¼š<br>Charlesæ˜¯ä¸€ä¸ªä½¿ç”¨Javaè¯­è¨€å¼€å‘çš„è·¨å¹³å°æŠ“åŒ…å·¥å…·ã€‚å®ƒå¯ä»¥è®©ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡æœ¬åœ°è®¡ç®—æœºæŸ¥çœ‹HTTPã€HTTPSã€HTTP&#x2F;2ç­‰æµé‡ï¼Œå…¶ä¸­åŒ…æ‹¬è¯·æ±‚å’Œå“åº”ã€HTTPå¤´å’Œå…ƒæ•°æ®ã€‚</li></ul><h3 id="2-Charlesä¸‹è½½å’Œå®‰è£…"><a href="#2-Charlesä¸‹è½½å’Œå®‰è£…" class="headerlink" title="2. Charlesä¸‹è½½å’Œå®‰è£…"></a>2. Charlesä¸‹è½½å’Œå®‰è£…</h3><ul><li><p>ä¸‹è½½<br>Charlesçš„ä¸‹è½½å¾ˆç®€å•ï¼Œç›´æ¥å» <a href="https://www.charlesproxy.com/download/">å®˜ç½‘ä¸‹è½½é¡µ</a> é€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…è¿›è¡Œä¸‹è½½å³å¯ã€‚</p></li><li><p>å®‰è£…<br>å®‰è£…å°±ç›´æ¥æ— è„‘ä¸‹ä¸€æ­¥å³å¯ã€‚</p></li></ul><h3 id="3-ç ´è§£"><a href="#3-ç ´è§£" class="headerlink" title="3. ç ´è§£"></a>3. ç ´è§£</h3><ul><li>ç‚¹å‡» <a href="https://go.dev/play/p/Qtt2CmHbTzU">é“¾æ¥</a> è¿›å…¥goåœ¨çº¿ä»£ç è¿è¡Œå¹³å°ã€‚ç›´æ¥ç‚¹å‡»Runï¼Œåœ¨ä¸‹æ–¹ä¼šå‡ºç°ç±»ä¼¼ä¸‹æ–¹çš„è¾“å‡ºï¼š</li></ul><p><img src="/../img/charles/202204280012492.png" alt="202204280012492.png"></p><ul><li><p>å¦‚æœæƒ³æ”¹åå­—åˆ™ç›´æ¥å°† name :&#x3D; â€œcharlesâ€ çš„èµ‹å€¼ä¿®æ”¹ä¸€ä¸‹å³å¯ã€‚</p></li><li><p>æœ€åæ‰“å¼€Charles â€” Help â€” Register å¡«å…¥ä¿¡æ¯å³å¯å®Œæˆç ´è§£ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Charles </tag>
            
            <tag> æŠ“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>acme.shè¸©å‘è®°å½•</title>
      <link href="/post/2022/02/20/24919/"/>
      <url>/post/2022/02/20/24919/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€dnspodè§£æçš„åŸŸåæ¥ç”³è¯·æ³›åŸŸåè¯ä¹¦"><a href="#1ã€dnspodè§£æçš„åŸŸåæ¥ç”³è¯·æ³›åŸŸåè¯ä¹¦" class="headerlink" title="1ã€dnspodè§£æçš„åŸŸåæ¥ç”³è¯·æ³›åŸŸåè¯ä¹¦"></a>1ã€dnspodè§£æçš„åŸŸåæ¥ç”³è¯·æ³›åŸŸåè¯ä¹¦</h2><p>âš ï¸ å› ä¸ºç”³è¯·æ³›åŸŸåè¯ä¹¦é‰´æƒéœ€è¦ä½¿ç”¨dnséªŒè¯æ¨¡å¼ï¼Œè€Œä¸æ˜¯webrootæ¨¡å¼ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨dnsapiçš„å¯†é’¥ã€‚å…·ä½“æ¯å®¶çš„è®¾ç½®è¯·çœ‹<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi#how-to-use-dns-api">è¿™é‡Œ</a>ã€‚<br>è¿™é‡Œçš„å‘æ˜¯ï¼šdnspodçš„è…¾è®¯äº‘APIå¯†é’¥å’ŒDNSPod Tokenã€‚è¿™ä¸¤ä¸ªæ˜¯å¾ˆå¤šäººå®¹æ˜“æé”™çš„åœ°æ–¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/../img/acme/202203072359737.png" alt="202203072359737.png"><br>è¿™é‡Œacmeä½¿ç”¨çš„æ˜¯DNSPod Token</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> DP_Id=<span class="string">&quot;297228&quot;</span> <span class="comment">#è¿™ä¸ªçº¯æ•°å­—å°±æ˜¯DP_Id</span></span><br><span class="line"><span class="built_in">export</span> DP_Key=<span class="string">&quot;xxxxxxxxxxx&quot;</span> <span class="comment"># Tokenå°±æ˜¯DP_Key</span></span><br></pre></td></tr></table></figure><p>ğŸ”¥ è¿˜ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼šdnspodæ˜¯æœ‰dnspod.cnå’Œdnspod.comä¸¤ä¸ªæœåŠ¡çš„ã€‚æ³¨æ„çœ‹ä¸€ä¸‹ä½ æ˜¯å›½å†…ç‰ˆè¿˜æ˜¯å›½é™…ç‰ˆã€‚å®ƒä¿©çš„å‚æ•°åç§°æ˜¯ä¸ä¸€æ ·çš„ï¼ï¼ï¼</p><h2 id="2ã€Processing-The-CA-is-processing-your-order-please-just-wait"><a href="#2ã€Processing-The-CA-is-processing-your-order-please-just-wait" class="headerlink" title="2ã€Processing, The CA is processing your order, please just wait"></a>2ã€Processing, The CA is processing your order, please just wait</h2><p>âš ï¸ ç¬¬äºŒä¸ªå‘å°±æ˜¯ç”³è¯·è¯ä¹¦åˆ°æœ€åä¸€ç›´æç¤º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Processing, The CA is processing your order, please just <span class="built_in">wait</span>. (1/30)</span><br><span class="line">Processing, The CA is processing your order, please just <span class="built_in">wait</span>. (2/30)</span><br><span class="line">..... <span class="comment"># ä¸€ç›´åˆ°30/30 æŠ¥timeoutã€‚</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„åŸå› æ˜¯CAæœºæ„zerosslç»å¸¸å‡ºç°éœ€è¦ç­‰å¾…å¾ˆä¹…çš„æƒ…å†µè€Œå¯¼è‡´è¶…æ—¶äº†è¿˜æ²¡æœ‰å¾—åˆ°å“åº”ã€‚æ‰€ä»¥è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æ›´æ¢é»˜è®¤çš„CAã€‚</p><p>â¡ï¸ ç›´æ¥åˆ°.acme.shæ–‡ä»¶å¤¹å†…æ‰§è¡Œ<code>acme.sh --set-default-ca  --server letsencrypt</code>è®¾ç½®ä¸€ä¸‹é»˜è®¤çš„CAå³å¯ã€‚</p><p>ğŸ”¥ åªéœ€è¦è®¾ç½®ä¸€æ¬¡å³å¯ï¼Œåç»­ç”³è¯·è¯ä¹¦ä¼šè‡ªåŠ¨ä½¿ç”¨letsencryptè¿›è¡ŒéªŒè¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acme.sh </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¡¹ç›®å››æ­¥æ’æŸ¥CPUå ç”¨é«˜çš„é—®é¢˜</title>
      <link href="/post/2022/02/12/47604/"/>
      <url>/post/2022/02/12/47604/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸æ­¢ä¸€æ¬¡å†™è¿‡CPUé£™é«˜çš„é—®é¢˜æ’æŸ¥(å½“æ—¶å¹¶ä¸ä»…é™äºJava)ï¼Œä¸è¿‡ç”±äºå„ç§åŸå› è¿™ä¸ªå°ç ´ç«™æ¢äº†Nå¤šä¸ªè™šæ‹Ÿä¸»æœºã€æœåŠ¡å™¨ã€åŸŸåç­‰ä¸­é—´ä¸¢å¤±äº†å¾ˆå¤šçè´µçš„åŸåˆ›åšå®¢ã€‚æœ€è¿‘é—²æš‡çš„æ—¶å€™çœ‹äº†ä¸€ä¸‹ä»…å­˜çš„2018å¹´å†™çš„ä¸€ç¯‡åƒåœ¾æ°´æ–‡ğŸ˜‚å½“æ—¶æ²¡æœ‰å›¾æ–‡å¹¶èŒ‚çš„å»å±•ç°æ•´ä¸ªæµç¨‹ï¼Œä»Šå¤©é‡æ–°ä»¥å›¾æ–‡çš„æ–¹å¼è®°å½•ä¸€éã€‚</p><h2 id="å®æˆ˜å‡†å¤‡"><a href="#å®æˆ˜å‡†å¤‡" class="headerlink" title="å®æˆ˜å‡†å¤‡"></a>å®æˆ˜å‡†å¤‡</h2><p>é¦–å…ˆä½¿ç”¨micronautå¿«é€Ÿç”Ÿæˆä¸€ä¸ªé¡¹ç›®ï¼š<code>mn create-app example.micronaut.complete</code></p><p>âš ï¸ è¿™ä¸ªMicronautæ˜¯Javaå¾®æœåŠ¡æ¡†æ¶çš„ä¸€ç§ï¼Œå¯ç±»æ¯”springbootï¼Œå…·ä½“çš„ä½ å¯ä»¥ä¸Šç½‘æ‰¾èµ„æ–™çœ‹ä¸€ä¸‹ã€‚è¿™é‡Œä¸å±•å¼€è®¨è®ºï¼Œè¿™é‡Œä½¿ç”¨å®ƒçš„åŸå› æ˜¯å› ä¸ºå®ƒæ¯”è¾ƒå¿«ã€‚ã€‚ã€‚ä»…æ­¤è€Œå·²ğŸ‘Œã€‚ å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨springbootæˆ–å…¶ä»–ä½ å–œæ¬¢çš„æ–¹å¼ç”Ÿæˆä¸€ä¸ªæ­»å¾ªç¯æ¥å£ã€‚</p><p>ç„¶ååˆ›å»ºcontrollerç±»ï¼Œå†™ç±»ä¼¼ä¸‹é¢è¿™ç§æ­»å¾ªç¯çš„è¯·æ±‚æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example.micronaut;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller;</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get;</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Produces;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoController</span> &#123;</span><br><span class="line">    <span class="meta">@Get</span></span><br><span class="line">    <span class="meta">@Produces(MediaType.TEXT_PLAIN)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &gt; -<span class="number">1</span> ; i++) &#123; <span class="comment">// è¿™é‡Œ i &gt; -1 å§‹ç»ˆä¸ºtrue</span></span><br><span class="line">            System.out.println(i * i++); <span class="comment">// è¿™é‡Œéšä¾¿å†™ä¸ªè®¡ç®— å¹¶æ‰“å°è¾“å‡º</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åæ‰“ä¸ªjaråŒ…æ”¾åˆ°LinuxæœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œåœ¨æµè§ˆå™¨ä¸­è¯·æ±‚testæ¥å£å»è§¦å‘æ­»å¾ªç¯ã€‚</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171703894.png"></p><p>ç»ˆç«¯ä¼šæŒç»­è¾“å‡ºè®¡ç®—ç»“æœï¼Œå¦‚æœè¯¥LinuxæœåŠ¡é…ç½®è¾ƒä½ä¸å‡ºæ„å¤–çš„è¯ç°åœ¨å·²ç»æ¯”è¾ƒå¡äº†ã€‚</p><h2 id="1ã€é¦–å…ˆç¥­å‡ºå¤§æ€å™¨ï¼štop"><a href="#1ã€é¦–å…ˆç¥­å‡ºå¤§æ€å™¨ï¼štop" class="headerlink" title="1ã€é¦–å…ˆç¥­å‡ºå¤§æ€å™¨ï¼štop"></a>1ã€é¦–å…ˆç¥­å‡ºå¤§æ€å™¨ï¼štop</h2><p>Linuxä¸­topå‘½ä»¤ç”¨äºå®æ—¶æ˜¾ç¤º process çš„åŠ¨æ€ã€‚(å¼•ç”¨è‡ª<a href="https://www.runoob.com/linux/linux-comm-top.html">runoob</a>)</p><p>ç›´æ¥æ‰§è¡Œ<code>top</code>å‘½ä»¤ç„¶å<code>shift + p</code>æŒ‰ç…§<code>%CPU</code>å»æ’åº</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171712507.png"></p><p>è¿™æ—¶æˆ‘ä»¬å‘ç°<code>PID</code>ä¸º<code>605108</code>çš„Javaè¿›ç¨‹CPUå ç”¨å¼€å§‹é£™é«˜ã€‚</p><h2 id="2ã€å…¶æ¬¡å†åˆ©ç”¨topï¼štop-p-PID-H"><a href="#2ã€å…¶æ¬¡å†åˆ©ç”¨topï¼štop-p-PID-H" class="headerlink" title="2ã€å…¶æ¬¡å†åˆ©ç”¨topï¼štop -p PID -H"></a>2ã€å…¶æ¬¡å†åˆ©ç”¨topï¼štop -p PID -H</h2><p>è¿™ä¸€æ­¥æˆ‘ä»¬æ¥æŸ¥è¯¢è¿™ä¸ªJavaè¿›ç¨‹ä¸­å“ªä¸ªçº¿ç¨‹çš„CPUå ç”¨åœ¨é£™é«˜ã€‚</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171713900.png"></p><p>è¿™ä¸ªåœ°æ–¹æ˜¾ç¤º<code>PID</code>ä¸º<code>605162</code>çš„çº¿ç¨‹CPUåœ¨é£™é«˜ã€‚</p><h2 id="3ã€å†æ¬¡ç¥­å‡ºå¦å¤–ä¸€ä¸ªå¤§æ€å™¨ï¼šjstack"><a href="#3ã€å†æ¬¡ç¥­å‡ºå¦å¤–ä¸€ä¸ªå¤§æ€å™¨ï¼šjstack" class="headerlink" title="3ã€å†æ¬¡ç¥­å‡ºå¦å¤–ä¸€ä¸ªå¤§æ€å™¨ï¼šjstack"></a>3ã€å†æ¬¡ç¥­å‡ºå¦å¤–ä¸€ä¸ªå¤§æ€å™¨ï¼šjstack</h2><p>ä½¿ç”¨<code>jstack PID &gt; 1.txt</code>å°†å †æ ˆä¿¡æ¯ä¿å­˜åˆ°1.txtã€‚</p><ul><li>æ³¨æ„è¿™é‡Œçš„PIDæ˜¯Javaè¿›ç¨‹çš„PIDè€Œä¸æ˜¯çº¿ç¨‹çš„ã€‚</li><li>é¡ºå¸¦ç€å°†605162è½¬æ¢ä¸º16è¿›åˆ¶(æœ€åä¸€è¡Œrootå‰çš„<code>93bea</code>å³ä¸ºè½¬æ¢ç»“æœ)ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~<span class="comment"># jstack 605108 &gt; 1.txt</span></span><br><span class="line">root@ubuntu:~<span class="comment"># printf &quot;%x&quot; 605162</span></span><br><span class="line">93bearoot@ubuntu:~<span class="comment"># </span></span><br></pre></td></tr></table></figure><p>âš ï¸ è¿™é‡Œçš„â€%xâ€æ˜¯æ ¼å¼åŒ–ä¸º16è¿›åˆ¶çš„æ„æ€ï¼Œä½ å¯ä»¥é€šè¿‡ä»»ä½•ä½ å–œæ¬¢çš„æ–¹å¼è½¬æ¢ï¼Œç”šè‡³ç”µè„‘ä¸Šçš„ç¨‹åºå‘˜è®¡ç®—å™¨éƒ½è¡Œã€‚</p><h2 id="4ã€æœ€ååˆ†ææ–‡ä»¶æ‰¾å‡ºâ€æ°´é¬¼â€"><a href="#4ã€æœ€ååˆ†ææ–‡ä»¶æ‰¾å‡ºâ€æ°´é¬¼â€" class="headerlink" title="4ã€æœ€ååˆ†ææ–‡ä»¶æ‰¾å‡ºâ€æ°´é¬¼â€"></a>4ã€æœ€ååˆ†ææ–‡ä»¶æ‰¾å‡ºâ€æ°´é¬¼â€</h2><p>ç”¨<code>vim</code>æ‰“å¼€æ–‡ä»¶å¹¶æœç´¢<code>93bea</code></p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171721032.png"></p><p>æˆ‘ä»¬å‘ç°ä¸‹é¢è¿™ä¹ˆä¸€è¡Œæè¿°ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">at example.micronaut.DemoController.index(DemoController.java:14)</span><br></pre></td></tr></table></figure><p>åœ¨example.micronaut.DemoControllerç±»ä¸­indexæ–¹æ³•ç¬¬14è¡Œè¿™ä¹ˆä¸€ä¸ªä¿¡æ¯ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å»æ‰¾ä¸€ä¸‹åˆšæ‰æˆ‘ä»¬å†™çš„æ–¹æ³•ï¼Œçœ‹çœ‹é—®é¢˜æ˜¯ä¸æ˜¯åœ¨14é™„è¿‘ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(i * i++);</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä»£ç ä¸­çš„æŸ¥æ‰¾æˆ‘ä»¬å‘ç°ç¡®å®æˆ‘ä»¬å½“æ—¶åˆ›å»ºçš„æ­»å¾ªç¯æ‰§è¡Œå°±æ˜¯åœ¨è¿™é‡Œã€‚</p><p>âœ–ï¸ OKï¼Œè¿™å°±æ˜¯ä»Šå¤©å¸¦æ¥çš„å››æ­¥æ’æŸ¥æ³•ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»ä¸€ä¸ªè¯·æ±‚åˆ°äº’è”ç½‘åè®®</title>
      <link href="/post/2022/02/06/37649/"/>
      <url>/post/2022/02/06/37649/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯äº’è”ç½‘åè®®"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯äº’è”ç½‘åè®®" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯äº’è”ç½‘åè®®"></a>ä¸€ã€ä»€ä¹ˆæ˜¯äº’è”ç½‘åè®®</h2><p>ç½‘ç»œåè®®æ˜¯åœ¨ç½‘ç»œç¯å¢ƒä¸‹è¿è¡Œçš„æ‰€æœ‰è®¾å¤‡ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™çš„é›†åˆï¼Œå®ƒå®šä¹‰äº†è®¾å¤‡ä¹‹é—´é€šä¿¡æ—¶æ•°æ®äº¤æ¢çš„æ ¼å¼å’Œæ ¼å¼çš„è§£é‡Šã€‚</p><h2 id="äºŒã€åˆ†å±‚æ¨¡å‹"><a href="#äºŒã€åˆ†å±‚æ¨¡å‹" class="headerlink" title="äºŒã€åˆ†å±‚æ¨¡å‹"></a>äºŒã€åˆ†å±‚æ¨¡å‹</h2><p>æèµ·åˆ†å±‚æ¨¡å‹ï¼Œä¸€å®šæœ‰äººä¼šæœ‰ç–‘é—®ğŸ¤”ï¸ã€‚ä¸ºä»€ä¹ˆæœ‰è¯´ä¸ƒå±‚çš„æœ‰è¯´äº”å±‚çš„è¿˜æœ‰è¯´å››å±‚çš„ï¼Ÿ</p><h3 id="2-1ã€é¦–å…ˆæ¥è¯´OSIä¸ƒå±‚æ¨¡å‹"><a href="#2-1ã€é¦–å…ˆæ¥è¯´OSIä¸ƒå±‚æ¨¡å‹" class="headerlink" title="2.1ã€é¦–å…ˆæ¥è¯´OSIä¸ƒå±‚æ¨¡å‹"></a>2.1ã€é¦–å…ˆæ¥è¯´OSIä¸ƒå±‚æ¨¡å‹</h3><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202161515220.png"></p><ul><li>é¦–å…ˆOSIä¸ƒå±‚æ¨¡å‹å¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</li><li>å…¶æ¬¡OSIå¹¶æ²¡æœ‰å¾—åˆ°å¹¿æ³›çš„è®¤å¯</li><li>æœ€åè¿™ä¸ªæ¨¡å‹å„å±‚çš„åå­—å¤§å®¶ä¸éœ€è¦å»æ­»èƒŒç¡¬è®°ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ä¸‹é¢æˆ‘ä¼šæœ‰ä¾‹å­è®²åˆ°å„å±‚è§£å†³çš„é—®é¢˜ã€‚</li></ul><h3 id="2-2ã€å…¶æ¬¡æ˜¯TCP-x2F-IPå‚è€ƒæ¨¡å‹"><a href="#2-2ã€å…¶æ¬¡æ˜¯TCP-x2F-IPå‚è€ƒæ¨¡å‹" class="headerlink" title="2.2ã€å…¶æ¬¡æ˜¯TCP&#x2F;IPå‚è€ƒæ¨¡å‹"></a>2.2ã€å…¶æ¬¡æ˜¯TCP&#x2F;IPå‚è€ƒæ¨¡å‹</h3><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202161514843.png"></p><ul><li>å®é™…ä¸ŠTCP&#x2F;IPå’ŒOSIæ¨¡å‹ç»„å¹¶ä¸èƒ½å¦‚ä¸Šå›¾æ‰€ç¤ºç²¾ç¡®çš„åŒ¹é…</li><li>ç½‘ç»œä¸­æœ€æ ¸å¿ƒçš„æŠ€æœ¯å°±æ˜¯ä¼ è¾“å±‚å’Œç½‘ç»œå±‚æŠ€æœ¯ï¼Œæ‰€ä»¥æ— è®ºæ˜¯å››å±‚è¿˜æ˜¯äº”å±‚æ¨¡å‹è¿™ä¸¤å±‚éƒ½è¢«å®Œæ•´ä¿ç•™</li><li>TCP&#x2F;IPå‚è€ƒæ¨¡å‹ï¼Œæ›´åŠ ä¾§é‡çš„æ˜¯äº’è”ç½‘é€šä¿¡æ ¸å¿ƒï¼ˆä¹Ÿæ˜¯å°±æ˜¯å›´ç»•TCP&#x2F;IPåè®®å±•å¼€çš„ä¸€ç³»åˆ—é€šä¿¡åè®®ï¼‰çš„åˆ†å±‚ï¼Œå› æ­¤å®ƒä¸å»ç®¡æ­¤æµç¨‹ä¸­ä¸ç›¸å…³çš„åè®®;å…¶æ¬¡ï¼Œä¹‹æ‰€ä»¥è¯´ä»–æ˜¯å‚è€ƒæ¨¡å‹ï¼Œæ˜¯å› ä¸ºä»–æœ¬èº«ä¹Ÿæ˜¯OSIæ¨¡å‹ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å‚è€ƒOSIæ¨¡å‹å¯¹å…¶åˆ†å±‚ã€‚</li></ul><h3 id="2-3ã€äº”å±‚æ¨¡å‹"><a href="#2-3ã€äº”å±‚æ¨¡å‹" class="headerlink" title="2.3ã€äº”å±‚æ¨¡å‹"></a>2.3ã€äº”å±‚æ¨¡å‹</h3><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202161539787.png"></p><ul><li>äº”å±‚æ¨¡å‹æ˜¯ç»“åˆäº†OSIä¸ƒå±‚å’ŒTCP&#x2F;IPå››å±‚æ¨¡å‹ä¸ºäº†æ–¹ä¾¿å­¦ä¹ è®¡ç®—æœºç½‘ç»œåŸç†çš„äº§ç‰©ã€‚</li></ul><p>è¿™é‡Œä¸‹é¢å†å¼•ç”¨ä¸€ä¸ªæˆ‘è®¤ä¸ºåšçš„è¿˜ä¸é”™çš„ç½‘å›¾ï¼ˆGoogleæœå›¾æœçš„ï¼Œå¦‚æœ‰ä¾µæƒè¯·å‘ŠçŸ¥ã€‚ï¼‰</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171115168.png"></p><h2 id="ä¸‰ã€ç°åœ¨è®²ä¸€ä¸‹ä»è®¾å¤‡Aåˆ°è®¾å¤‡Bçš„æ•°æ®äº¤äº’"><a href="#ä¸‰ã€ç°åœ¨è®²ä¸€ä¸‹ä»è®¾å¤‡Aåˆ°è®¾å¤‡Bçš„æ•°æ®äº¤äº’" class="headerlink" title="ä¸‰ã€ç°åœ¨è®²ä¸€ä¸‹ä»è®¾å¤‡Aåˆ°è®¾å¤‡Bçš„æ•°æ®äº¤äº’"></a>ä¸‰ã€ç°åœ¨è®²ä¸€ä¸‹ä»è®¾å¤‡Aåˆ°è®¾å¤‡Bçš„æ•°æ®äº¤äº’</h2><h3 id="3-1ã€å¦‚æœç°åœ¨å°Aè¦å’Œå°Bé€šä¿¡ï¼Œé‚£ä¹ˆä»ç‰©ç†å±‚è®²èµ·ï¼Œæœ€ç®€å•çš„æ˜¯ä¸æ˜¯æ‹¿ä¸€æ ¹ç½‘çº¿è¿æ¥A-gt-B"><a href="#3-1ã€å¦‚æœç°åœ¨å°Aè¦å’Œå°Bé€šä¿¡ï¼Œé‚£ä¹ˆä»ç‰©ç†å±‚è®²èµ·ï¼Œæœ€ç®€å•çš„æ˜¯ä¸æ˜¯æ‹¿ä¸€æ ¹ç½‘çº¿è¿æ¥A-gt-B" class="headerlink" title="3.1ã€å¦‚æœç°åœ¨å°Aè¦å’Œå°Bé€šä¿¡ï¼Œé‚£ä¹ˆä»ç‰©ç†å±‚è®²èµ·ï¼Œæœ€ç®€å•çš„æ˜¯ä¸æ˜¯æ‹¿ä¸€æ ¹ç½‘çº¿è¿æ¥A-&gt;B"></a>3.1ã€å¦‚æœç°åœ¨å°Aè¦å’Œå°Bé€šä¿¡ï¼Œé‚£ä¹ˆä»ç‰©ç†å±‚è®²èµ·ï¼Œæœ€ç®€å•çš„æ˜¯ä¸æ˜¯æ‹¿ä¸€æ ¹ç½‘çº¿è¿æ¥A-&gt;B</h3><p>è¿™ä¸€å±‚ä¸€èˆ¬æ˜¯ä»¥ç‰©ç†å½¢å¼å­˜åœ¨çš„ï¼Œä½¿ç”¨åŒç»çº¿ã€å…‰çº¤ç­‰å…¶ä»–æ–¹å¼è¿›è¡Œè®¾å¤‡ä¹‹é—´çš„è¿æ¥ã€‚ä»–å¯ä»¥ä¼ è¾“0101è¿™æ ·çš„äºŒè¿›åˆ¶ç”µä¿¡å·ã€‚</p><p>âš ï¸ ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä»–ä»¬ä¹‹é—´å¯èƒ½ä¸æ‡‚å¯¹æ–¹çš„0101ä»£è¡¨ä»€ä¹ˆï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ•°æ®é“¾è·¯å±‚ä¸Šåœºäº†ã€‚</p><h3 id="3-2ã€æ•°æ®é“¾è·¯å±‚è¿™é‡Œå»å®šä¹‰0101çš„åˆ†ç»„æ–¹å¼å’Œä»£è¡¨çš„æ„ä¹‰"><a href="#3-2ã€æ•°æ®é“¾è·¯å±‚è¿™é‡Œå»å®šä¹‰0101çš„åˆ†ç»„æ–¹å¼å’Œä»£è¡¨çš„æ„ä¹‰" class="headerlink" title="3.2ã€æ•°æ®é“¾è·¯å±‚è¿™é‡Œå»å®šä¹‰0101çš„åˆ†ç»„æ–¹å¼å’Œä»£è¡¨çš„æ„ä¹‰"></a>3.2ã€æ•°æ®é“¾è·¯å±‚è¿™é‡Œå»å®šä¹‰0101çš„åˆ†ç»„æ–¹å¼å’Œä»£è¡¨çš„æ„ä¹‰</h3><p>è¯¥å±‚ä¸‹ä¸»è¦æ˜¯ä»¥å¤ªç½‘ï¼Œä»¥å¤ªç½‘è§„å®šä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ… å«åš<code>å¸§(Frame)</code></p><p>æ¯ä¸€å¸§ï¼ˆFrameï¼‰ç”±åŒ…å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ç»„æˆã€‚å…¶ä¸­<code>Head</code>åŒ…å«è¯¥æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ï¼›<code>Data</code>åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚<code>Head</code>çš„é•¿åº¦ï¼Œå›ºå®šä¸º18å­—èŠ‚ã€‚<code>Data</code>çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º46å­—èŠ‚ï¼Œæœ€é•¿ä¸º1500å­—èŠ‚ã€‚å› æ­¤ï¼Œä¸€ä¸ª<code>Frame</code>æœ€çŸ­ä¸º64å­—èŠ‚ï¼Œæœ€é•¿ä¸º1518å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚</p><p>ğŸªµ ç°åœ¨æœ‰ä¸ªé—®é¢˜æ˜¯æ•°æ®åŒ…<code>Head</code>ä¸­çš„å‘é€è€…å’Œæ¥æ”¶ç€å¦‚ä½•ç”¨å…¨çƒå”¯ä¸€çš„åå­—å»æ ‡è¯†ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜å®é™…ä¸Šå¯ä»¥ç±»æ¯”æˆ ä½ å«å¼ ä¸‰ï¼Œä»–ä¹Ÿå«å¼ ä¸‰ã€‚æˆ‘è¯¥å¦‚ä½•åŒºåˆ†ä½ ä»¬ï¼Ÿåœ¨ç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬æ˜¯ç”¨èº«ä»½è¯å·ä½œä¸ºäººçš„å”¯ä¸€æ ‡è¯†ã€‚åŒæ ·ä»¥å¤ªç½‘è§„å®šï¼šæ¯ä¸€ä¸ªè¿‡æ¥ä¸Šç½‘çš„è®¾å¤‡éƒ½å¿…é¡»è¦æœ‰<code>ç½‘å¡</code>ï¼Œæ•°æ®åŒ…å¿…é¡»ä»ä¸€å¼ ç½‘å¡ä¼ é€’åˆ°å¦ä¸€å¼ ç½‘å¡ã€‚ç½‘å¡åœ°å€å°±æ˜¯æ•°æ®åŒ…çš„å‘é€å’Œæ¥æ”¶åœ°å€ã€‚è¿™ä¸ªç½‘å¡åœ°å€å°±å«åš<code>MACåœ°å€</code></p><p>ğŸ§± ä¸ºä»€ä¹ˆç½‘å¡åœ°å€å°±å¯ä»¥åšåˆ°å”¯ä¸€ï¼Ÿ</p><p>è¿™ä¸ªå…¶å®æ˜¯ä¸€ç§è§„èŒƒï¼šæ¯å—ç½‘å¡åœ¨ç”Ÿäº§æ—¶éƒ½ä¼šæ ‡è®°ä¸Šå‚å•†çš„ä»£å·å’Œè¯¥ç½‘å¡çš„å†…éƒ¨åºåˆ—å·ï¼Œä¾‹å¦‚ï¼š</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202161651222.png"></p><ul><li>å¦‚ä¸Šå›¾ï¼ŒMACåœ°å€ä¸€å…±6ä¸ªå­—èŠ‚ï¼Œç”¨16è¿›åˆ¶å±•ç¤ºï¼Œä¸€èˆ¬å†™æ³•æ˜¯æ¯ä¸ªå­—èŠ‚ä¸­é—´ç”¨:éš”å¼€ã€‚</li><li>å‰ä¸‰ä¸ªå­—èŠ‚ç”¨æ¥æ ‡è¯†å‚å•†ä»£å·</li><li>åä¸‰ä¸ªå­—èŠ‚ç”¨æ¥æ ‡è¯†è¯¥ç½‘å¡çš„å†…éƒ¨åºåˆ—å·</li></ul><p>å¦‚æœç°åœ¨å±€åŸŸç½‘ä¸­æœ‰ABCDå››ä¸ªè®¾å¤‡ï¼Œæ•°æ®äº¤æ¢å¯ä»¥é€šè¿‡å¹¿æ’­çš„æ–¹å¼å°†ARPåŒ…å‘é€ç»™æ¯ä¸ªè®¾å¤‡ï¼Œç„¶åæ¯ä¸ªè®¾å¤‡æ”¶åˆ°ä¹‹åå»åŒ¹é…æ¥æ”¶ç€MACåœ°å€ï¼Œå¦‚æœæ˜¯è‡ªå·±åˆ™ç•™ä¸‹ï¼Œå¦‚æœä¸æ˜¯åˆ™ä¸¢å¼ƒã€‚è¿™æ ·å±€åŸŸç½‘å†…å°±å¯ä»¥è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>âš ï¸ ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæ­¤æ—¶Aè¦æ‰¾çš„è®¾å¤‡Eï¼Œä½†æ˜¯è®¾å¤‡Eæ²¡æœ‰åœ¨å±€åŸŸç½‘é‡Œé¢ã€‚è¿™æ—¶æ€ä¹ˆåŠï¼Ÿä¸å¯èƒ½æŠŠè¿™ä¸ªARPåŒ…å‘ç»™å…¨çƒæ‰€æœ‰çš„è®¾å¤‡å§ğŸ˜‚ï¼ˆè¿™é‡Œåªæ˜¯ä¸€ä¸ªå‡è®¾ï¼Œå®é™…ä¸Šä¸åŒå­ç½‘å¹¿æ’­æ˜¯ä¸äº’é€šçš„ï¼‰ã€‚è¿™æ ·è¿˜æ²¡å¼€å§‹é€šä¿¡å°±é€ æˆäº†å…¨çƒç½‘ç»œç˜«ç—ªã€‚</p><h3 id="3-3ã€ç°åœ¨è¯¥ç½‘ç»œå±‚ä¸Šåœºäº†"><a href="#3-3ã€ç°åœ¨è¯¥ç½‘ç»œå±‚ä¸Šåœºäº†" class="headerlink" title="3.3ã€ç°åœ¨è¯¥ç½‘ç»œå±‚ä¸Šåœºäº†"></a>3.3ã€ç°åœ¨è¯¥ç½‘ç»œå±‚ä¸Šåœºäº†</h3><p>é¦–å…ˆä¼šåˆ¤æ–­ä¸¤ä¸ªé€šä¿¡è®¾å¤‡æœ‰æ²¡æœ‰åœ¨åŒä¸€ä¸ªå­ç½‘(è¿™ä¸ªåé¢ä¼šä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« å»ä»‹ç»ï¼Œå°±æ˜¯äºŒè¿›åˆ¶çš„IPåœ°å€ä¸å­ç½‘æ©ç è¿›è¡Œä¸è¿ç®—)</p><p>å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘åˆ™ç”¨å¹¿æ’­æ‰¾<code>è®¾å¤‡E</code>ï¼Œå¦‚æœä¸åœ¨åŒä¸€ä¸ªå­ç½‘åˆ™æ˜¯ç”¨è·¯ç”±æ‰¾<code>è®¾å¤‡E</code>ã€‚åˆšæ‰è¯´åˆ°æ•°æ®é“¾è·¯å±‚ç”¨MACåœ°å€ä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œç”¨ARPåè®®è¿›è¡Œé€šä¿¡ï¼Œè€Œåˆ°äº†ç½‘ç»œå±‚å°±ä¼šæ˜¯ç”¨IPåœ°å€ä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œç”¨IPåè®®è¿›è¡Œé€šä¿¡ã€‚</p><p>æˆªæ­¢åˆ°ç°åœ¨æ¯ä¸ªè®¾å¤‡éƒ½æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ã€‚</p><ul><li>MACåœ°å€å…¨çƒå”¯ä¸€ï¼Œåªä¸ç¡¬ä»¶å‚å•†å’Œç”Ÿäº§åºå·æœ‰å…³ç³»ã€‚</li><li>å…¬ç½‘IPåœ°å€ä¸ºå…¨çƒå”¯ä¸€ï¼Œåªä¸ç½‘ç»œç®¡ç†å‘˜åˆ†é…æœ‰å…³ç³»(è¿™ä¸€æ­¥å…ˆä¸è®¨è®ºå±€åŸŸç½‘IP)ã€‚</li><li>IPåœ°å€ç”¨æ¥ç¡®å®šè®¾å¤‡æ‰€åœ¨å­ç½‘ï¼ŒMACåœ°å€ç”¨æ¥åœ¨å­ç½‘ä¸­ç¡®å®šæŸä¸€ä¸ªç½‘å¡ã€‚</li></ul><p><code>IPæ•°æ®åŒ…</code>ä¹Ÿæ˜¯ç”±åŒ…å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ç»„æˆï¼ŒHeadåŒ…å«åè®®ã€æºåœ°å€ã€ç›®çš„åœ°å€ç­‰ä¿¡æ¯ã€‚</p><ul><li>å…¶ä¸­å‰20ä¸ªå­—èŠ‚ä¸ºå›ºå®šå¤´éƒ¨ã€‚å¿…é¡»æ‹¥æœ‰çš„å±æ€§ã€‚</li><li>ä¸€ä¸ªæ•°æ®åŒ…æ€»é•¿åº¦æœ€å¤§ä¸º65535å­—èŠ‚ã€‚</li></ul><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202161815849.png"></p><p>âš ï¸ ç”±ç›®æ ‡çš„IPåœ°å€å’ŒMACåœ°å€å¯ä»¥å®ç°ä»»æ„ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œä½†æ˜¯åˆå‡ºç°ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šé‚£å°±æ˜¯å¦‚æœç¡®å®šè¿™ä¸ªæ•°æ®åŒ…æ˜¯å±äºå“ªä¸ªåº”ç”¨ç¨‹åºçš„ï¼Ÿå› ä¸ºå’±ä»¬çš„è®¾å¤‡å¯èƒ½è¿è¡Œäº†é’‰é’‰ã€å¾®ä¿¡ç­‰ç­‰ä¸€å¤§å †åº”ç”¨ç¨‹åºã€‚</p><h3 id="3-4ã€æ—¢ç„¶ä¸èƒ½ç¡®å®šåŒ…æ‰€å±çš„åº”ç”¨ç¨‹åºé‚£å°±å†åŠ ä¸€ä¸ªå«ä¼ è¾“å±‚çš„ä¸œè¥¿"><a href="#3-4ã€æ—¢ç„¶ä¸èƒ½ç¡®å®šåŒ…æ‰€å±çš„åº”ç”¨ç¨‹åºé‚£å°±å†åŠ ä¸€ä¸ªå«ä¼ è¾“å±‚çš„ä¸œè¥¿" class="headerlink" title="3.4ã€æ—¢ç„¶ä¸èƒ½ç¡®å®šåŒ…æ‰€å±çš„åº”ç”¨ç¨‹åºé‚£å°±å†åŠ ä¸€ä¸ªå«ä¼ è¾“å±‚çš„ä¸œè¥¿"></a>3.4ã€æ—¢ç„¶ä¸èƒ½ç¡®å®šåŒ…æ‰€å±çš„åº”ç”¨ç¨‹åºé‚£å°±å†åŠ ä¸€ä¸ªå«ä¼ è¾“å±‚çš„ä¸œè¥¿</h3><p>æˆ‘ä»¬çš„è®¾å¤‡å·²ç»æœ‰äº†IPåœ°å€ï¼Œå¦‚æœæƒ³åŒºåˆ†åº”ç”¨ç¨‹åºæ€ä¹ˆåŠï¼Ÿå¾ˆç®€å•â€”-æ·»åŠ ä¸€ä¸ªå«<code>ç«¯å£(Port)</code>çš„ä¸œè¥¿</p><ul><li>ç«¯å£æ˜¯æ¯ä¸€ä¸ªç”¨ç½‘å¡è®¾å¤‡ç¨‹åºçš„ç¼–å·ã€‚</li><li>æ¯ä¸€ä¸ªç«¯å£ä¸‹éƒ½æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚</li><li>ç«¯å£å·æ˜¯0-65535ä¹‹é—´çš„è¯ä¹¦ï¼Œå…¶ä¸­0-1023è¢«ç§°ä¸ºä¿ç•™ç«¯å£å·ï¼ˆå¯ä»¥è‡ªå®šä¹‰ç¨‹åºä½¿ç”¨ï¼Œä½†ä¸æ¨èä½¿ç”¨ï¼‰ã€‚</li></ul><p>OKï¼Œåˆ°è¿™ä¸ªé˜¶æ®µé€šè¿‡<code>ip+port</code>å°±å¯ä»¥ç¡®å®šä¸€ä¸ªè®¾å¤‡ä¸­æŸä¸ªå”¯ä¸€çš„ç¨‹åºï¼Œè¿›è€Œå®ç°ä»»æ„ä¸¤ä¸ªè®¾å¤‡é—´ä»»æ„åº”ç”¨ç¨‹åºçš„é€šä¿¡ã€‚</p><p>ç»§ç»­å¾€åˆšæ‰çš„IPæ•°æ®åŒ…ä¸­æ·»åŠ ç«¯å£å·å°±æœ‰äº†ä¼ è¾“å±‚åè®®ï¼šå¸¸è§çš„<code>TCP</code>ã€<code>UDP</code>åè®®ã€‚</p><p>TCPåŒ…å’ŒUDPåŒ…çš„åŒºåˆ«ï¼š</p><ul><li>TCPå¥—æ¥å­—æ˜¯å››å…ƒç»„æ ‡è¯†ï¼šæºIPã€æºç«¯å£ã€ç›®çš„IPã€ç›®çš„ç«¯å£</li><li>UDPå¥—æ¥å­—æ˜¯äºŒå…ƒç»„æ ‡è¯†ï¼šç›®çš„IPã€ç›®çš„ç«¯å£</li><li>åœ¨TCPçš„ä¼ è¾“ä¸­åªè¦æºIPæˆ–æºç«¯å£ä»»æ„ä¸€ä¸ªä¸ç›¸åŒéƒ½ä¼šè¢«å®šå‘åˆ°ä¸åŒçš„è¿›ç¨‹å»å¤„ç†ï¼›è€ŒUDPä¼ è¾“ä¸­æ— è®ºæºIPå’Œç«¯å£å¦‚ä½•å˜åŒ–ï¼Œåªè¦ç›®çš„IPå’Œç›®çš„ç«¯å£ä¸€è‡´åˆ™ä¼šäº¤ç»™ç›¸åŒçš„è¿›ç¨‹å»å¤„ç†ã€‚</li><li>åœ¨é€šå¸¸æƒ…å†µä¸‹UDPå¯ä»¥æ˜¯ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šçš„ï¼›è€ŒTCPæ€»æ˜¯ä¸€å¯¹ä¸€çš„ã€‚</li></ul><p>OKï¼Œåˆ°ç°åœ¨ä¸ºæ­¢æ•°æ®åŒ…å·²ç»å¯ä»¥ç²¾ç¡®çš„ä»ä»»æ„ä¸€ä¸ªè®¾å¤‡Açš„ä»»æ„ä¸€ä¸ªè¿›ç¨‹ä¼ è¾“åˆ°ä»»æ„ä¸€ä¸ªè®¾å¤‡Eçš„ä»»æ„ä¸€ä¸ªè¿›ç¨‹ã€‚é‚£ä¹ˆæœ‰ä¸€ä¸ªæ–°çš„é—®é¢˜å°±æ˜¯ï¼šæˆ‘ä»¬äººç±»å¦‚æœå»ä½¿ç”¨è¿™äº›æ•°æ®ï¼Ÿ</p><h3 id="3-5ã€ç”¨ä¸åŒçš„åº”ç”¨å±‚åè®®å¯¹åº”çš„è½¯ä»¶å»è§£æä¸åŒçš„æ•°æ®æ¥å±•ç¤ºç»™äººç±»"><a href="#3-5ã€ç”¨ä¸åŒçš„åº”ç”¨å±‚åè®®å¯¹åº”çš„è½¯ä»¶å»è§£æä¸åŒçš„æ•°æ®æ¥å±•ç¤ºç»™äººç±»" class="headerlink" title="3.5ã€ç”¨ä¸åŒçš„åº”ç”¨å±‚åè®®å¯¹åº”çš„è½¯ä»¶å»è§£æä¸åŒçš„æ•°æ®æ¥å±•ç¤ºç»™äººç±»"></a>3.5ã€ç”¨ä¸åŒçš„åº”ç”¨å±‚åè®®å¯¹åº”çš„è½¯ä»¶å»è§£æä¸åŒçš„æ•°æ®æ¥å±•ç¤ºç»™äººç±»</h3><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æ˜¯åœ¨æµè§ˆHTTPçš„ç½‘é¡µï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨åŸºäºHTTPåè®®å¼€å‘çš„Chromeç­‰æµè§ˆå™¨å»è¿›è¡Œæ•°æ®çš„è§£æã€‚æˆ‘ä»¬å¦‚æœéœ€è¦æ”¶å‘é‚®ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åŸºäºPOP3ã€SMTPç­‰åè®®å¼€å‘çš„Outlookç­‰é‚®ä»¶å®¢æˆ·ç«¯å»è¿›è¡Œæ“ä½œã€‚</p><h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>ä¸Šè¿°çš„è¿‡ç¨‹ä¸­ï¼Œå‡¡æ˜¯æ•°æ®<code>å‘é€æ–¹</code>éƒ½ä¼šä»æœ€é«˜å±‚çš„<code>åº”ç”¨å±‚</code>ä¾æ¬¡å¾€ä¸‹æ·»åŠ <code>å„å±‚çš„é¦–éƒ¨ä¿¡æ¯</code>ï¼Œæœ€ç»ˆé€šè¿‡<code>ç‰©ç†ä¼ è¾“ä»‹è´¨</code>å‘é€å‡ºå»ã€‚å‡¡æ˜¯æ•°æ®<code>æ¥æ”¶æ–¹</code>éƒ½ä¼šä»<code>ç‰©ç†å±‚</code>ä¾æ¬¡å‘ä¸Šè¿›è¡Œ<code>å„å±‚çº§çš„ä¿¡æ¯è§£æ</code>ï¼Œæœ€ç»ˆäº¤ç»™å¯¹åº”çš„<code>åº”ç”¨å±‚è¿›ç¨‹</code>è¿›è¡Œè§£æå±•ç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202202171112580.png"></p><p>ğŸŒŠ è¿™é‡Œæ”¾å‡º <a href="http://www.52im.net/?fromuid=26045">å³æ—¶é€šè®¯ç½‘</a> æ•´ç†çš„ <a href="https://axhsnkdv56py.compat.objectstorage.us-phoenix-1.oraclecloud.com/bucket-oss/2022/02/202202171129600.png">TCP&#x2F;IPåè®®å›¾</a> ï¼Œæˆ‘è®¤ä¸ºæ˜¯å…¨ç½‘æ€»ç»“çš„æœ€å¥½çš„åè®®å›¾ã€‚æ¨èå¼€å‘è€…æœ‹å‹ä»¬éƒ½ä¸‹è½½çœ‹çœ‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSI </tag>
            
            <tag> TCP/IP </tag>
            
            <tag> äº’è”ç½‘åè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‡é’ˆæ¼«è°ˆ</title>
      <link href="/post/2022/02/02/5147/"/>
      <url>/post/2022/02/02/5147/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ§¨ğŸ§§ğŸ§¨ğŸ§§ğŸ§¨ï¼šé¦–å…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼"><a href="#ğŸ§¨ğŸ§§ğŸ§¨ğŸ§§ğŸ§¨ï¼šé¦–å…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼" class="headerlink" title="ğŸ§¨ğŸ§§ğŸ§¨ğŸ§§ğŸ§¨ï¼šé¦–å…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼"></a>ğŸ§¨ğŸ§§ğŸ§¨ğŸ§§ğŸ§¨ï¼šé¦–å…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼</h1><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯æŒ‡é’ˆï¼ˆPointerï¼‰"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æŒ‡é’ˆï¼ˆPointerï¼‰" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æŒ‡é’ˆï¼ˆPointerï¼‰"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æŒ‡é’ˆï¼ˆPointerï¼‰</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>æŒ‡é’ˆ</strong>ï¼ˆè‹±è¯­ï¼šPointerï¼‰ï¼Œæ˜¯ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ç±»æ•°æ®ç±»å‹åŠå…¶å¯¹è±¡æˆ–å˜é‡ï¼Œç”¨æ¥è¡¨ç¤ºæˆ–å­˜å‚¨ä¸€ä¸ªå­˜å‚¨å™¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€çš„å€¼ç›´æ¥æŒ‡å‘ï¼ˆpoints toï¼‰å­˜åœ¨è¯¥åœ°å€çš„å¯¹è±¡çš„å€¼ã€‚ã€ <a href="https://zh.wikipedia.org/zh-cn/%E6%8C%87%E6%A8%99_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8)">ç»´åŸºç™¾ç§‘</a> ã€‘</p><h2 id="äºŒã€æˆ‘ç†è§£çš„æŒ‡é’ˆ"><a href="#äºŒã€æˆ‘ç†è§£çš„æŒ‡é’ˆ" class="headerlink" title="äºŒã€æˆ‘ç†è§£çš„æŒ‡é’ˆ"></a>äºŒã€æˆ‘ç†è§£çš„æŒ‡é’ˆ</h2><p>äº†è§£ç£ç›˜ç³»ç»Ÿçš„åŒå­¦å¯èƒ½å¬è¯´è¿‡inodeè¿™ä¸ªä¸œè¥¿ï¼ˆ<a href="https://www.eber.vip/ops/28.html">è¿™é‡Œå…·ä½“è®²äº†inode</a>ï¼‰,å®ƒæ˜¯Unixæ–‡ä»¶ç³»ç»Ÿä¸­ç”¨æ¥å‚¨å­˜æ–‡ä»¶å…ƒä¿¡æ¯çš„ä¸œè¥¿ã€‚</p><p>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹è±¡éƒ½å¯¹åº”ç€ä¸€ä¸ª inodeï¼Œå…¶ä¸­å­˜å‚¨ç€å¸¸ç”¨çš„ä¸€äº›ä¿¡æ¯ï¼ˆæ‰€æœ‰è€…ã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€æ–‡ä»¶æƒé™ã€å¯¹åº”æ–‡ä»¶å¯¹è±¡åœ¨ç³»ç»Ÿä¸­å­˜å‚¨å—çš„ä½ç½®ç­‰ç­‰ï¼‰<br>æ“ä½œç³»ç»Ÿè®¿é—®ä¸€ä¸ªæ–‡ä»¶æ—¶åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li><p>é€šè¿‡æ–‡ä»¶åæ‰¾åˆ°å¯¹åº”çš„ inode ç¼–å·</p></li><li><p>é€šè¿‡ inode ç¼–å·è®¿é—®å¯¹åº”æ–‡ä»¶å¯¹è±¡çš„å…ƒä¿¡æ¯</p></li><li><p>æ ¹æ®å…ƒä¿¡æ¯æ‰¾åˆ°æ–‡ä»¶å¯¹åº”çš„æ‰‡åŒºä¸‹å¯¹åº”çš„æ•°æ®å—ï¼Œè¯»å–æ•°æ®</p></li></ul><p>ğŸªœ å½“ç„¶äº†è¿™æ˜¯ç®€åŒ–çš„æµç¨‹ï¼Œå®é™…è¯»å–æ–‡ä»¶æ¯”è¿™ä¸ªå¤æ‚ä¸€äº›ã€‚è¿˜ä¼šæ¶‰åŠåˆ°å†…æ ¸è°ƒç”¨å’Œé¡µç¼“å­˜ç­‰å…¶ä»–æ“ä½œã€‚</p><p>ä»è¿™ä¸ªä¾‹å­å¯ä»¥å‘ç°inodeåƒæ˜¯ä¸€ç§ç´¢å¼•ï¼Œå¹¶ä¸”ä¼šè®°å½•ç”¨æ¥æŒ‡å‘å®é™…çš„å­˜å‚¨æ•°æ®å—çš„åœ°å€ã€‚</p><p>ğŸº è¿™é‡Œæ˜¯ä¸æ˜¯å‘ç°æœ‰ç‚¹åƒæŒ‡é’ˆäº†ã€‚</p><h2 id="ä¸‰ã€ä»Javaå’ŒGoçš„è§’åº¦çœ‹æŒ‡é’ˆ"><a href="#ä¸‰ã€ä»Javaå’ŒGoçš„è§’åº¦çœ‹æŒ‡é’ˆ" class="headerlink" title="ä¸‰ã€ä»Javaå’ŒGoçš„è§’åº¦çœ‹æŒ‡é’ˆ"></a>ä¸‰ã€ä»Javaå’ŒGoçš„è§’åº¦çœ‹æŒ‡é’ˆ</h2><p>1ã€ä¼—æ‰€å‘¨çŸ¥Javaè¯­è¨€æ˜¯æ²¡æœ‰<strong>â€œæŒ‡é’ˆâ€</strong>çš„ã€‚Javaè™½æ²¡æœ‰åˆ‡å®çš„æŒ‡é’ˆç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªä¸œè¥¿æ˜¯åˆ‡å®å­˜åœ¨çš„ã€‚æ¯”å¦‚Javaçš„å¼•ç”¨ç±»å‹ï¼ˆé™¤äº†å…«ç§åŸºæœ¬ç±»å‹å¤–éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼‰å®é™…åœ¨å­˜å‚¨æ—¶éƒ½æ˜¯æŠŠ<strong>å¼•ç”¨</strong>(å †ä¸Šçš„åœ°å€)å‚¨å­˜åœ¨æ ˆï¼Œ<strong>å€¼</strong>(å¯¹è±¡çš„æ•°æ®)å‚¨å­˜åœ¨å †ä¸­ã€‚ç„¶åé€šè¿‡å¼•ç”¨çš„æŒ‡å‘æ¥è¿›è¡Œå¯¹è±¡æ•°æ®çš„è¯»å–ã€‚ï¼ˆğŸ”¥æ˜¯ä¸æ˜¯inodeæŒ‡å‘æ•°æ®å—çš„æ€ç»´ï¼‰</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(); <span class="comment">// è¿™é‡Œå®é™…ä¸Šå°±æ˜¯åœ¨æ ˆä¸­æ”¾è¿›å»ä¸€ä¸ªdog(å¼•ç”¨)ï¼Œç„¶ååœ¨å †ä¸­å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ç”¨æ¥ä¾›dogå­˜ä¸œè¥¿ã€‚</span></span><br><span class="line">      dog.name = <span class="string">&quot;åº“å¥‡&quot;</span>; <span class="comment">// è¿™æ—¶å°±å¯ä»¥æ‹¿ç€dogå­˜çš„åœ°å€å»å †é‡Œé¢ç»™ageå’Œnameèµ‹å€¼</span></span><br><span class="line">        dog.age = <span class="number">1</span>; <span class="comment">// å…¶å®æ•´ä¸ªå¯ä»¥ç†è§£æˆæ–‡ä»¶ç³»ç»Ÿä¸­ dog.mp4 ---&gt; å®é™…çš„mp4æ•°æ® ï¼ˆä¸å¤ªæ°å½“ï¼Œèƒ½ç†è§£å°±è¡Œï¼‰</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è¿™ä¸ªæ—¶å€™è¿˜å¯ä»¥æµ‹è¯•ä¸€ä¸‹Javaä¸­çš„å€¼ä¼ é€’æ˜¯ä»€ä¹ˆé€»è¾‘</span></span><br><span class="line">        System.out.println(<span class="string">&quot;1. name:&quot;</span> + dog.name + <span class="string">&quot; age:&quot;</span> + dog.age);</span><br><span class="line">      <span class="comment">// æ‰“å°ç»“æœï¼š1. name:åº“å¥‡ age:1</span></span><br><span class="line">        change(dog);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. name:&quot;</span> + dog.name + <span class="string">&quot; age:&quot;</span> + dog.age);</span><br><span class="line">      <span class="comment">// æ‰“å°ç»“æœï¼š2. name:é˜¿å¥‡ age:2</span></span><br><span class="line">      <span class="comment">// ç¨‹åºæˆåŠŸè¿è¡Œï¼Œä¸­é€”ä¸ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        dog.age = <span class="number">2</span>;</span><br><span class="line">        dog.name = <span class="string">&quot;é˜¿å¥‡&quot;</span>;</span><br><span class="line">      dog = <span class="literal">null</span>; <span class="comment">// è¿™ä¸€è¡Œåœ¨ideaä¸­ä½ ä¼šå‘ç°æœ‰&quot;The value null assigned to &#x27;dog&#x27; is never used&quot;æç¤º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±æ­¤å¯è§è¿™é‡Œé¢çš„å€¼ä¼ é€’å¹¶ä¸æ˜¯ä¼ é€’dogæœ¬èº«è¿‡å»ï¼Œè€Œæ˜¯æŠŠdogè¿™ä¸ªå¼•ç”¨å¤åˆ¶äº†ä¸€ä»½ä¼ ç»™changeæ–¹æ³•ã€‚ç„¶åchangeæ–¹æ³•æ‹¿åˆ°å¼•ç”¨å»æ‰¾åˆ°å †é‡Œé¢çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ˆä¿®æ”¹å †æ•°æ®è‚¯å®šä¼šå½±å“dogæœ€åçš„è¾“å‡ºï¼‰ï¼Œç„¶ådog &#x3D; nullåªæ˜¯æŠŠå…‹éš†çš„è¿™ä¸ªdogå¼•ç”¨åœ°å€ç»™ç½®ç©ºäº†ï¼Œå®Œå…¨ä¸å½±å“åŸdogå¼•ç”¨æŒ‡å‘å †ä¸­ã€‚</p><p>2ã€åšä¸»ä¹Ÿä¼šGoè¯­è¨€ï¼Œåœ¨Goè¯­è¨€ä¸­æ˜¯æœ‰æŒ‡é’ˆè¿™ä¸ªä¸œè¥¿çš„ã€‚ä»–æ˜¯åˆ‡å®å­˜åœ¨çš„ç±»å‹ã€‚Goçš„ä¸–ç•Œä¸­newå‡ºæ¥çš„éƒ½æ˜¯<strong>æŒ‡é’ˆ</strong>ï¼ˆJavaä¸­newå‡ºæ¥çš„éƒ½æ˜¯<strong>â€œå¼•ç”¨â€</strong>ï¼‰ã€‚è¿™é‡Œå’ŒJavaæœ€å¤§çš„åŒºåˆ«å°±æ˜¯Goè¯­è¨€çš„å‡½æ•°æ˜¯å¯ä»¥å°†æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥å°†å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚çœ‹æ¥èµ·æ¯”Javaæ›´åŠ çµæ´»äº†ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="type">string</span></span><br><span class="line">age  <span class="type">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">dog := Dog&#123;</span><br><span class="line">name: <span class="string">&quot;åº“å¥‡&quot;</span>,</span><br><span class="line">age:  <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;åœ°å€:%p 1 name:%s age:%d \n&quot;</span>, &amp;dog, dog.name, dog.age)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šåœ°å€:0xc0000a4018 1 name:åº“å¥‡ age:1</span></span><br><span class="line">change1(dog)</span><br><span class="line">fmt.Printf(<span class="string">&quot;åœ°å€:%p 1 name:%s age:%d \n&quot;</span>, &amp;dog, dog.name, dog.age)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šåœ°å€:0xc0000a4018 1 name:åº“å¥‡ age:1</span></span><br><span class="line">change2(&amp;dog)</span><br><span class="line">fmt.Printf(<span class="string">&quot;åœ°å€:%p 1 name:%s age:%d \n&quot;</span>, &amp;dog, dog.name, dog.age)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šåœ°å€:0xc0000a4018 1 name:è·¯ç› age:3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change1</span><span class="params">(dog Dog)</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;change1ä¸­dogåœ°å€:%p \n&quot;</span>, &amp;dog)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šchange1ä¸­dogåœ°å€:0xc0000a4030</span></span><br><span class="line">dog.name = <span class="string">&quot;é˜¿å¥‡&quot;</span></span><br><span class="line">dog.age = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change2</span><span class="params">(dog *Dog)</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;change2ä¸­å‚æ•°æŒ‡é’ˆçš„åœ°å€:%p \n&quot;</span>, dog)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šchange2ä¸­å‚æ•°æŒ‡é’ˆçš„åœ°å€:0xc0000a4018</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;change2ä¸­å‚æ•°æŒ‡é’ˆå˜é‡çš„æŒ‡é’ˆåœ°å€:%p \n&quot;</span>, &amp;dog)</span><br><span class="line">  <span class="comment">// è¾“å‡ºï¼šchange2ä¸­å‚æ•°æŒ‡é’ˆå˜é‡çš„æŒ‡é’ˆåœ°å€:0xc0000ac020</span></span><br><span class="line">dog.name = <span class="string">&quot;è·¯ç›&quot;</span></span><br><span class="line">dog.age = <span class="number">3</span></span><br><span class="line">  dog = <span class="literal">nil</span> <span class="comment">// æ­¤å¤„æŠŠæŒ‡é’ˆå˜é‡dogçš„å€¼ç½®ç©º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç”±ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥å‘ç°change1ä¸­çš„å‚æ•°(dog Dog)å®é™…ä¸Šå°±æ˜¯mainä¸­dogçš„å¤åˆ¶å“ã€‚æ‰€ä»¥ä»–çš„å†…å­˜åœ°å€(0xc0000a4030)å’Œmainä¸­dogçš„å†…å­˜åœ°å€(0xc0000a4018)ä¸ä¸€è‡´ã€‚æ‰€ä»¥åœ¨change1ä¸­è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹éƒ½æ˜¯é’ˆå¯¹dog(0xc0000a4030)çš„ä¿®æ”¹ï¼Œä¸mainæ–¹æ³•çš„ä¸­dogå˜é‡æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</strong></p><p><strong>è€Œchange2ä¸­çš„å‚æ•°æ˜¯æŒ‡é’ˆç±»å‹ï¼Œå®ƒç›¸å½“äºä½¿ç”¨äº†ä¸€ä¸ªæŒ‡é’ˆå‚æ•°(dog *Dog)æ¥æ¥æ”¶0xc0000a4018çš„å€¼(âš ï¸ è¿™é‡Œçš„dogçš„å€¼æ˜¯0xc0000a4018ï¼Œè€Œdogè‡ªå·±åˆæ˜¯ä¸€ä¸ªå˜é‡æ‰€ä»¥ä»–è‡ªå·±ä¹Ÿæœ‰å†…å­˜åœ°å€0xc0000ac020)ã€‚æ‰€ä»¥åç»­å¯¹nameå’Œageçš„æ“ä½œå®é™…ä¸Šæ˜¯é’ˆå¯¹0xc0000a4018æŒ‡å‘çš„nameå’Œageè¿›è¡Œæ“ä½œï¼Œä¸å®ƒæœ¬èº«æŒ‡é’ˆå˜é‡æ²¡æœ‰å…³ç³»ã€‚æŒ‡é’ˆå˜é‡åªæœ‰ä¸€ä¸ªå±æ€§é‚£å°±æ˜¯åœ°å€å€¼(0xc0000a4018)ï¼Œè¿™æ—¶<code>dog = nil</code>å…¶å®æ˜¯ä¿®æ”¹äº†æŒ‡é’ˆå˜é‡dogçš„å€¼(0xc0000a4018)ä¸ºnilï¼Œä¸mainä¸­çš„dogå˜é‡æ²¡æœ‰å…³ç³»ã€‚æ‰€ä»¥æœ€åè°ƒç”¨change2åä¾æ—§è¾“å‡ºçš„æ˜¯<code>åœ°å€:0xc0000a4018 1 name:è·¯ç› age:3</code>ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Golang </tag>
            
            <tag> æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•é˜²æ­¢IPè¢«æ¶æ„è§£æ</title>
      <link href="/post/2022/01/23/28817/"/>
      <url>/post/2022/01/23/28817/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯æ¶æ„è§£æï¼Ÿæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æ¶æ„è§£æï¼Ÿæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æ¶æ„è§£æï¼Ÿæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æ¶æ„è§£æï¼Ÿæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h3><p>1.1ã€æ¶æ„è§£æï¼šå¦‚æœèƒ½ç›´æ¥é€šè¿‡ä¸»æœºIPè®¿é—®æŸä¸ªç½‘ç«™æœåŠ¡ï¼Œé‚£ä¹ˆæ— éœ€æœåŠ¡å™¨ç®¡ç†è€…çš„è®¸å¯ä»»æ„ä¸€ä¸ªåŸŸåè§£æåˆ°æ­¤IPä¹Ÿå°†èƒ½è®¿é—®åˆ°è¯¥ç½‘ç«™æœåŠ¡ã€‚</p><p>1.2ã€é€ æˆçš„å½±å“ï¼š</p><ul><li><p>é’ˆå¯¹å›½å†…æ”¿ç­–æ¥è¯´ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæœªå¤‡æ¡ˆçš„åŸŸåè§£æåˆ°ä½ çš„æœåŠ¡å™¨ä¸Šå¹¶ä¸”è¢«å·¥ä¿¡éƒ¨æˆ–è€…äº‘æœåŠ¡å•†æ‰«æåˆ°å°†ä¼šè§¦å‘è­¦å‘Šæˆ–è€…å…³é—­ç½‘ç«™ç”šè‡³æœåŠ¡å•†ä¼šå…³åœè¯¥æœåŠ¡å™¨èµ„æºã€‚</p></li><li><p>å¦‚æœæ¶æ„åŸŸåè¢«æœç´¢å¼•æ“æ‹‰é»‘æˆ–æƒ©ç½šè¿‡ï¼Œé‚£ä¹ˆè¢«æ¶æ„æŒ‡å‘çš„æ­£è§„ç½‘ç«™åœ¨æœç´¢å¼•æ“çš„æ’åå°†ä¼šä¸‹é™æˆ–è€…æ‹‰é»‘ã€‚</p></li><li><p>å¦‚æœæ˜¯é«˜æƒé‡åŸŸåæ¶æ„è§£æåˆ°ä½ è¿™é‡Œï¼Œé‚£ä¹ˆä½ ç›¸å½“äºåœ¨å¸®åŠ©ä»–åˆ©ç”¨ä½ ç«™ç‚¹çš„å†…å®¹å¢é•¿ä»–åŸŸåçš„æ”¶å½•é‡ã€‚</p></li><li><p>å¦‚æœè¢«æœ‰å¿ƒçš„äººåˆ©ç”¨ï¼Œæ¶æ„è§£æè¿‡æ¥ä¹‹åä½ çš„ç½‘ç«™å¯èƒ½ä¼šæœ‰å¤§è§„æ¨¡çš„æµé‡æ”»å‡»ã€‚</p></li></ul><h3 id="äºŒã€é˜²èŒƒæ‰‹æ®µï¼ˆnginxï¼‰"><a href="#äºŒã€é˜²èŒƒæ‰‹æ®µï¼ˆnginxï¼‰" class="headerlink" title="äºŒã€é˜²èŒƒæ‰‹æ®µï¼ˆnginxï¼‰"></a>äºŒã€é˜²èŒƒæ‰‹æ®µï¼ˆnginxï¼‰</h3><p>ç”±ä¸Šè¿°å¯çŸ¥æ¶æ„è§£æçš„æ ¹æºåœ¨äºï¼šä½ çš„æŸä¸ªç½‘ç«™æœåŠ¡å¯ä»¥ç›´æ¥é€šè¿‡IPè®¿é—®åˆ°ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¦æ­¢é€šè¿‡IPè®¿é—®åˆ°webæœåŠ¡ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line">  <span class="attribute">server_name</span> _;</span><br><span class="line">  <span class="attribute">return</span> <span class="number">444</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†nginxçš„é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„serverå—ä¿®æ”¹ä¸ºä¸Šé¢çš„é…ç½®å³å¯ã€‚</p><p>è¿™ä¸ªserverå—å°†ä¼šæ·»åŠ ä¸€ä¸ªä¸ç¬¦åˆå·²æœ‰çš„vhostçš„é»˜è®¤å¤„ç†é€»è¾‘ï¼šå¦‚æœå·²é…ç½®çš„vhostéƒ½æ²¡æœ‰è¢«åŒ¹é…åˆ°ï¼Œé‚£ä¹ˆå°±ç›´æ¥<code>return 444</code>æœåŠ¡ç«¯å°†ç«‹åˆ»å…³é—­è¿æ¥ã€‚</p><p>ğŸ¤” <strong><mark class="hl-label pink">ä¸ºä»€ä¹ˆæ˜¯444ï¼Ÿ</mark> </strong></p><p>è¿™é‡Œçš„444å…¶å®æ˜¯nginxå†…ç½®çš„é”™è¯¯ä»£ç ã€‚è¯¥ä»£ç å°†ç«‹åˆ»å…³é—­è¿æ¥ï¼Œä¸åšå‡ºä»»ä½•å“åº”ã€‚å¯¹äºæµè§ˆå™¨æ¥è¯´å°±å¥½åƒä¸å­˜åœ¨è¯¥æœåŠ¡ä¸€æ ·ã€‚æ‰€ä»¥è¿”å›444æ¯”404ã€403ç­‰http codeæ›´å¥½ã€‚</p><p>âš ï¸ <strong>è¿™é‡Œåªè®²ä¸€ä¸‹nginxçš„å¤„ç†æ–¹å¼ã€‚ã€å…¶ä»–webæœåŠ¡å™¨åŸç†ä¸€è‡´ï¼Œå…·ä½“åšæ³•è¯·ä¸Šç½‘æœç´¢ã€‘</strong></p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenVPNå®¢æˆ·ç«¯è·¯ç”±ç­–ç•¥é…ç½®</title>
      <link href="/post/2022/01/16/1163/"/>
      <url>/post/2022/01/16/1163/</url>
      
        <content type="html"><![CDATA[<p><strong>OpenVPNçš„è·¯ç”±ç­–ç•¥å¯ä»¥åœ¨å®¢æˆ·ç«¯é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡ç«¯é…ç½®ã€‚ä¸è¿‡ä¸ªäººä¸æ¨èåœ¨æœåŠ¡ç«¯é…ç½®ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒé™åˆ¶ç”¨æˆ·ä½¿ç”¨çš„çµæ´»æ€§ã€‚æ‰€ä»¥æœ¬æ–‡åªè®²å®¢æˆ·ç«¯é…ç½®è·¯ç”±ç­–ç•¥çš„æ–¹å¼</strong>ã€‚</p><p>å…ˆè´´ä¸€ä¸‹é»˜è®¤çš„demo.ovpnéƒ¨åˆ†é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">client</span><br><span class="line">dev tun</span><br><span class="line">proto udp</span><br><span class="line">remote 1.1.1.1 1194</span><br><span class="line">resolv-retry infinite</span><br><span class="line">nobind</span><br><span class="line">persist-key</span><br><span class="line">persist-tun</span><br><span class="line">remote-cert-tls server</span><br><span class="line">auth SHA512</span><br><span class="line">cipher AES-256-CBC</span><br><span class="line">ignore-unknown-option block-outside-dns</span><br><span class="line">block-outside-dns</span><br><span class="line">verb 3</span><br><span class="line"></span><br><span class="line"># è¯ä¹¦ç•¥</span><br></pre></td></tr></table></figure><p><strong>ä¸‹é¢æ˜¯å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹</strong></p><ul><li>ğŸš€ å½“æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰è·¯ç”±ç­–ç•¥çš„æ—¶å€™éœ€è¦æ·»åŠ <code>route-nopull</code>æ‹’ç»æœåŠ¡ç«¯pushçš„ç­–ç•¥ã€‚</li><li>ğŸš¨<code>block-outside-dns</code>é…ç½®é¡¹ä¼šé˜»æ­¢tap&#x2F;tunä»¥å¤–çš„æ‰€æœ‰ç½‘ç»œæ¥å£çš„DNSè¯·æ±‚ï¼Œä¼šå½±å“è§„åˆ™å¤–çš„ç½‘ç«™è®¿é—®ï¼Œæ‰€ä»¥éœ€è¦åˆ é™¤æ­¤é…ç½®é¡¹ã€‚</li><li>âš ï¸é»˜è®¤å¯å†™å…¥100æ¡è·¯ç”±è§„åˆ™ï¼Œå¦‚æœä¸å¤Ÿç”¨åˆ™ä½¿ç”¨<code>max-routes 1000</code>å®šä¹‰ä¸ºæœ€å¤§1000æ¡ç”šè‡³æ›´å¤šï¼Œçœ‹ä¸ªäººéœ€æ±‚ã€‚</li><li>ğŸš©<code>vpn_gateway</code>å’Œ<code>net_gateway</code>æ˜¯ç›¸åçš„ç­–ç•¥ï¼Œå‰è€…è¡¨ç¤ºï¼šé»˜è®¤èµ°æœ¬åœ°ç½‘ç»œï¼ŒæŒ‡å®šçš„è§„åˆ™ä¼šèµ°openvpnï¼›åè€…è¡¨ç¤ºï¼šé»˜è®¤èµ°openvpnï¼ŒæŒ‡å®šè§„åˆ™èµ°æœ¬åœ°ç½‘ç»œã€‚</li><li>ğŸŒˆé…ç½®ç¤ºä¾‹ï¼š<code>route 10.0.0.0 255.255.240.0 vpn_gateway</code>æˆ–è€…<code>route 10.0.0.0 255.255.240.0 net_gateway</code></li></ul><p>ä¿®æ”¹ä¹‹åçš„é…ç½®æ–‡ä»¶å¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">client</span><br><span class="line">dev tun</span><br><span class="line">proto udp</span><br><span class="line">route-nopull</span><br><span class="line">route 10.0.0.0 255.255.240.0 vpn_gateway # æŒ‰ç…§è‡ªå·±å®é™…éœ€æ±‚æ·»åŠ å­ç½‘</span><br><span class="line">route 60.12.0.0 255.255.0.0 vpn_gateway # æˆ‘è¿™é‡Œåªæœ‰ä¸¤æ¡è‡ªå®šä¹‰è§„åˆ™æ‰€ä»¥æ— éœ€é…ç½®max-routes</span><br><span class="line">remote 1.1.1.1 1194 # æŒ‰ç…§è‡ªå·±çš„æœåŠ¡ç«¯IPå’Œç«¯å£è¿›è¡Œé…ç½®ã€å¯ä¸ºåŸŸåæˆ–IPã€‘</span><br><span class="line">resolv-retry infinite</span><br><span class="line">nobind</span><br><span class="line">persist-key</span><br><span class="line">persist-tun</span><br><span class="line">remote-cert-tls server</span><br><span class="line">auth SHA512</span><br><span class="line">cipher AES-256-CBC</span><br><span class="line">ignore-unknown-option block-outside-dns</span><br><span class="line"># block-outside-dns # æ­¤é¡¹éœ€è¦è¢«æ³¨é‡Šæ‰æˆ–è€…ç›´æ¥åˆ é™¤å³å¯</span><br><span class="line">verb 3</span><br><span class="line"></span><br><span class="line"># è¯ä¹¦ç•¥</span><br></pre></td></tr></table></figure><p>â›„åœ¨Windowsä¸Šå¦‚æœä½¿ç”¨OpenVPN GUIå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥å³é”®è¿›è¡Œä¿®æ”¹è¿æ¥çš„é…ç½®æ–‡ä»¶ã€‚ä¹Ÿæ¨èåœ¨Windowsä¸Šé¢ä½¿ç”¨ <a href="https://swupdate.openvpn.org/community/releases/OpenVPN-2.5.5-I602-amd64.msi">OpenVPN GUI</a> ä½“éªŒä¸Šæ›´å¥½ã€‚</p><p>â›„åœ¨Mac OSä¸Šä½¿ç”¨ <a href="https://tunnelblick.net/release/Tunnelblick_3.8.7a_build_5770.dmg">Tunnelblick</a> æˆ–è€… <a href="https://openvpn.net/downloads/openvpn-connect-v3-macos.dmg">OpenVPNå®˜æ–¹å®¢æˆ·ç«¯</a> ä½“éªŒä¸Šä¸ªäººæ„Ÿè§‰éƒ½å·®ä¸å¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenVPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨PicGoæ‰“é€ ä¸ªäººå›¾åºŠ</title>
      <link href="/post/2022/01/11/54619/"/>
      <url>/post/2022/01/11/54619/</url>
      
        <content type="html"><![CDATA[<mark class="hl-label pink">å‘å¼€æºè‡´æ•¬ï¼ï¼ï¼</mark> <h3 id="1ã€PicGoç®€ä»‹"><a href="#1ã€PicGoç®€ä»‹" class="headerlink" title="1ã€PicGoç®€ä»‹"></a>1ã€PicGoç®€ä»‹</h3><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a></p><p>ä½œè€…å¯¹äºPicGoçš„ç®€ä»‹ï¼šä¸€ä¸ªç”¨äºå¿«é€Ÿä¸Šä¼ å›¾ç‰‡å¹¶è·å–å›¾ç‰‡ URL é“¾æ¥çš„å·¥å…·</p><p>æ”¯æŒçš„å‚¨å­˜å‚å®¶ï¼šã€ä¸‹è¡¨ä¸ºé»˜è®¤ï¼Œä¸”ä½œè€…ä¸å†æ‰“ç®—æ”¯æŒæ–°çš„å‚å®¶ï¼Œä¸è¿‡æ”¯æŒå®‰è£…æ’ä»¶ã€‘</p><table><thead><tr><th>å‚å•†</th><th align="left">æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>ä¸ƒç‰›äº‘ äº‘å‚¨å­˜ (S3ç±»å‹)</td><td align="left">v1.0</td></tr><tr><td>è…¾è®¯äº‘ COS v4&#x2F;v5 (S3ç±»å‹)</td><td align="left">v1.1 &#x2F; v1.5.0</td></tr><tr><td>é˜¿é‡Œäº‘ OSS (S3ç±»å‹)</td><td align="left">v1.6.0</td></tr><tr><td>åˆæ‹äº‘ äº‘å‚¨å­˜ (S3ç±»å‹)</td><td align="left">v1.2.0</td></tr><tr><td>GitHub ä»“åº“ (ç±»ä¼¼ä»£ç æäº¤)</td><td align="left">v1.5.0</td></tr><tr><td>SM.MS V2 (æ²¡ç”¨è¿‡)</td><td align="left">v2.3.0-beta.0</td></tr><tr><td>Imgur (æ²¡ç”¨è¿‡)</td><td align="left">v1.6.0</td></tr></tbody></table><h3 id="2ã€PicGoå®‰è£…"><a href="#2ã€PicGoå®‰è£…" class="headerlink" title="2ã€PicGoå®‰è£…"></a>2ã€PicGoå®‰è£…</h3><p>ç›´æ¥<a href="https://github.com/Molunerfinn/PicGo/releases">ç‚¹å‡»æ­¤å¤„</a>è¿›å…¥releasesç•Œé¢é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä»¥åŠåˆé€‚çš„ç³»ç»Ÿå®‰è£…åŒ…è¿›è¡Œä¸‹è½½å®‰è£…å³å¯ã€‚</p><h3 id="3ã€æ’ä»¶å®‰è£…"><a href="#3ã€æ’ä»¶å®‰è£…" class="headerlink" title="3ã€æ’ä»¶å®‰è£…"></a>3ã€æ’ä»¶å®‰è£…</h3><p>å› ä¸ºé»˜è®¤ä¸æ”¯æŒAWS S3(å«å„å‚å®¶è¡ç”Ÿç‰ˆ)çš„å‚¨å­˜æ¥å…¥è€Œæˆ‘è¿™é‡Œæƒ³æ¥å…¥Oracle Cloudçš„å¯¹è±¡å‚¨å­˜ï¼Œæ‰€ä»¥å°±éœ€è¦å»æ‰¾ä¸€ä¸ªå¯ä»¥æ¥å…¥åŸºäºS3é€šç”¨ç±»å‹çš„æ’ä»¶ã€‚</p><p>âš ï¸ Oracle Cloudçš„å¯¹è±¡å‚¨å­˜æ˜¯S3 Signature V4ç±»å‹</p><p>ç›´æ¥åœ¨è½¯ä»¶çš„æ’ä»¶è®¾ç½®ç•Œé¢æœç´¢ s3</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220110183553.png"></p><p>åç§°ä¸ºs3çš„è¿™ä¸ªæ’ä»¶å³å¯ä»¥å¯¹æ¥Oracle Cloudï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»å®‰è£…å³å¯ã€‚</p><h3 id="4ã€æ’ä»¶è®¾ç½®"><a href="#4ã€æ’ä»¶è®¾ç½®" class="headerlink" title="4ã€æ’ä»¶è®¾ç½®"></a>4ã€æ’ä»¶è®¾ç½®</h3><p>å®‰è£…å®Œæˆåå›¾åºŠè®¾ç½®ä¸‹æ‹‰èœå•ä¼šæ˜¾ç¤ºAmazon S3çš„å­èœå•ã€å¦‚æœæ²¡æœ‰åˆ™è¿›å…¥PicGoè®¾ç½®å¼€å¯æ˜¾ç¤ºã€‘</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220110184623.png"></p><ul><li><p><strong>S3åº”ç”¨å¯†é’¥ï¼š</strong></p><p>1ã€åœ¨Oracle Cloudæ§åˆ¶å°å¦‚å›¾æ‰€ç¤ºæ‰¾åˆ°ç”¨æˆ·è®¾ç½®</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111110812.png"></p><p>2ã€å®¢æˆ·å¯†é’¥-è®¿é—®å¯†é’¥ å³ä¸ºè¿™é‡Œçš„åº”ç”¨å¯†é’¥IDã€å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œå°±å…ˆçœ‹ä¸‹ä¸€æ­¥ç”Ÿæˆå¯†é’¥ï¼Œç„¶ååœ¨è¿‡æ¥å¤åˆ¶è®¿é—®å¯†é’¥ã€‘</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111111017.png"></p></li><li><p><strong>åº”ç”¨å¯†é’¥ï¼š</strong></p><p>åœ¨ä¸Šä¸€æ­¥å®¢æˆ·å¯†é’¥é‚£é‡Œç‚¹å‡»ç”Ÿæˆå¯†é’¥ï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªåå­—ç„¶åç”Ÿæˆå³å¯ï¼Œæ³¨æ„è¿™é‡Œçš„å¯†é’¥åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·å¦¥å–„ä¿å­˜ï¼Œå¦‚æœä¸¢å¤±å°±åªèƒ½åˆ é™¤åé‡æ–°åˆ›å»ºä¸€ä¸ªã€‚ã€è¿™é‡Œçš„å¯†é’¥å’Œä¸Šé¢çš„è®¿é—®å¯†é’¥è¦æ˜¯åŒä¸€æ¡è®°å½•ã€‘</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111111217.png"></p></li><li><p><strong>æ¡¶åç§°å’Œæƒé™è¿™ä¿©æ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯åˆ›å»ºå‚¨å­˜æ¡¶æ—¶å®šä¹‰çš„ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹è‡ªå®šä¹‰èŠ‚ç‚¹çš„è¿™ä¸ªURLæ˜¯å¦‚ä½•è·å–çš„ï¼š</strong></p><p>1ã€é¦–å…ˆæˆ‘ä»¬åœ¨æ§åˆ¶å°è¿›å…¥åˆ°å‚¨å­˜æ¡¶ç•Œé¢ï¼Œç„¶åéšä¾¿ä¸Šä¼ ä¸€ä¸ªå°æ–‡ä»¶ã€‚</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111112340.png"></p><p>è¿™é‡ŒæŸ¥çœ‹å¯¹è±¡è¯¦ç»†ä¿¡æ¯é‡Œé¢æœ‰ä¸ªURLè·¯å¾„ï¼Œæ¯”å¦‚æˆ‘è¿™ä¸ªæ˜¯<code>https://objectstorage.us-phoenix-1.oraclecloud.com/n/axhsnkdv56py/b/bucket-oss/o/111.pdf</code> æˆ‘ä»¬å–é“¾æ¥çš„ <code>objectstorage.us-phoenix-1.oraclecloud.com</code> åŸŸåè¿™ä¸€éƒ¨åˆ†ã€åŒä¸€ä¸ªåŒºåŸŸä¸‹è¿™ä¸ªåŸŸåæ˜¯ç›¸åŒçš„ã€‘ç„¶åå†è¿™ä¸ªåŸŸåå‰é¢æ‹¼ä¸Šè‡ªå·±çš„æ¡¶åç§°ç©ºé—´å’Œcompat æ ¼å¼åº”è¯¥æ˜¯è¿™æ ·çš„ <code>æ¡¶åç§°ç©ºé—´.compat.objectstorage.us-phoenix-1.oraclecloud.com</code> è¿™é‡Œçš„æ¡¶åç§°ç©ºé—´åœ¨å‚¨å­˜æ¡¶ä¿¡æ¯é‡Œé¢å¯ä»¥æ‰¾åˆ°ã€‚</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111112823.png"></p><p>é‚£ä¹ˆæˆ‘è¿™ä¸ªæœ€ç»ˆæ‹¼å‡ºæ¥çš„è‡ªå®šä¹‰èŠ‚ç‚¹å°±æ˜¯ <code>https://axhsxxxx56py.compat.objectstorage.us-phoenix-1.oraclecloud.com</code></p></li><li><p><strong>è‡ªå®šä¹‰åŸŸåï¼š</strong></p><p>1ã€é¦–å…ˆè·å–åˆ°æˆ‘ä»¬è¦301æˆ–302çš„ç›®æ ‡é“¾æ¥</p><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220111113756.png"></p><p>ä¾æ—§æ˜¯éšä¾¿æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„å¯¹è±¡ç›¸ä¿¡ä¿¡æ¯æ‰¾åˆ°URLè·¯å¾„ï¼Œæˆ‘è¿™è¾¹æ˜¯<code>https://objectstorage.us-phoenix-1.oraclecloud.com/n/axhsnkdv56py/b/bucket-oss/o/111.pdf</code></p><p>æˆ‘ä»¬éœ€è¦ç”¨301æˆ–302çš„æ–¹å¼å»å®ç°è‡ªå®šä¹‰åŸŸåè®¿é—®æ–‡ä»¶ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯è¦æŠŠæˆ‘ä»¬çš„å­åŸŸåæ¯”å¦‚<code>s3.eber.vip</code> æ›¿ä»£æ‰æ–‡ä»¶åä¹‹å‰çš„é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯<code>https://objectstorage.us-phoenix-1.oraclecloud.com/n/axhsnkdv56py/b/bucket-oss/o</code></p><p>2ã€æœ‰äº†é“¾æ¥ï¼Œé‚£ä¹ˆç›´æ¥æ‹¼ä¸Šè¯·æ±‚çš„æ–‡ä»¶åå³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nginxå»é…ç½®301æˆ–è€…302çš„è·³è½¬</p><p>é¦–å…ˆæˆ‘ä»¬è¦æŠŠ<code>s3.eber.vip</code>è§£æåˆ°æˆ‘ä»¬nginxæ‰€åœ¨çš„æœåŠ¡å™¨IPä¸Šï¼Œç„¶ååœ¨nginxä¸­åˆ›å»ºä¸€ä¸ªs3.eber.vip.confé…ç½®æ–‡ä»¶ã€ä¸»é…ç½®æ–‡ä»¶éœ€è¦å¼•å…¥è¯¥æ–‡ä»¶ï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆã€‘ã€‚</p><p>æˆ‘çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl http2;</span><br><span class="line">  <span class="attribute">ssl_certificate</span> /usr/local/nginx/conf/ssl/s3.eber.vip.crt;</span><br><span class="line">  <span class="attribute">ssl_certificate_key</span> /usr/local/nginx/conf/ssl/s3.eber.vip.key;</span><br><span class="line">  <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">  <span class="attribute">ssl_ciphers</span> TLS13-AES-<span class="number">256</span>-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-<span class="number">128</span>-GCM-SHA256:TLS13-AES-<span class="number">128</span>-CCM-<span class="number">8</span>-SHA256:TLS13-AES-<span class="number">128</span>-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_session_cache</span> builtin:<span class="number">1000</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_buffer_size</span> <span class="number">1400</span>;</span><br><span class="line">  <span class="attribute">add_header</span> Strict-Transport-Security max-age=<span class="number">15768000</span>;</span><br><span class="line">  <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">server_name</span> s3.eber.vip;</span><br><span class="line">  <span class="attribute">access_log</span> /data/wwwlogs/s3.eber.vip_nginx.log combined;</span><br><span class="line">  <span class="attribute">index</span> index.html index.htm index.php;</span><br><span class="line">  <span class="attribute">root</span> /data/wwwroot/s3.eber.vip;</span><br><span class="line">  <span class="attribute">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123; <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>; &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">302</span> https://objectstorage.us-phoenix-1.oraclecloud.com/n/axhsnkdv56py/b/bucket-oss/o<span class="variable">$request_uri</span>; <span class="comment"># æˆ‘è¿™é‡Œä¸æƒ³è®©åœ°å€æ å˜æˆoracleçš„ä¸€å¤§ä¸²é“¾æ¥ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯302é‡å®šå‘ã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>OKï¼é…ç½®ç›¸å…³çš„æ•™ç¨‹å·²ç»ç»“æŸï¼Œå¦‚éœ€è¦ä½¿ç”¨æ•™ç¨‹åˆ™ç›´æ¥è®¿é—® <a href="https://picgo.github.io/PicGo-Doc/zh/guide/">PicGoå®˜æ–¹æ–‡æ¡£</a> è¿›è¡ŒæŸ¥è¯¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çæŠ˜è…¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PicGo </tag>
            
            <tag> å›¾åºŠ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ç«ç„°å›¾åˆ†æCPUä½¿ç”¨æƒ…å†µ</title>
      <link href="/post/2022/01/09/47231/"/>
      <url>/post/2022/01/09/47231/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€å®‰è£…Perfæ€§èƒ½åˆ†æå·¥å…·"><a href="#1ã€å®‰è£…Perfæ€§èƒ½åˆ†æå·¥å…·" class="headerlink" title="1ã€å®‰è£…Perfæ€§èƒ½åˆ†æå·¥å…·"></a>1ã€å®‰è£…Perfæ€§èƒ½åˆ†æå·¥å…·</h3><p>Perfå·¥å…·æ˜¯éå¸¸å¼ºå¤§çš„Linuxæ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯ä»¥é€šè¿‡è¯¥å·¥å…·è·å¾—è¿›ç¨‹å†…çš„è°ƒç”¨æƒ…å†µã€èµ„æºæ¶ˆè€—æƒ…å†µå¹¶æŸ¥æ‰¾åˆ†æçƒ­ç‚¹å‡½æ•°ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨perfå·¥å…·è¿›è¡Œæ€§èƒ½æ•°æ®çš„é‡‡é›†ã€‚</p><p>åœ¨Ubuntuä¸Šï¼Œå¦‚æœä¸çŸ¥é“perfå¦‚ä½•å®‰è£…çš„è¯å¯ä»¥ç›´æ¥æ‰§è¡Œperfåœ¨å‘½ä»¤æ‰§è¡ŒæŠ¥é”™å›æ˜¾é‡Œé¢ä¼šæœ‰å»ºè®®ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# perf</span><br><span class="line"></span><br><span class="line">Command &#x27;perf&#x27; not found, but can be installed with:</span><br><span class="line"></span><br><span class="line">apt install linux-oem-5.6-tools-common  # version 5.6.0-1017.17, or</span><br><span class="line">apt install linux-tools-common          # version 5.4.0-92.103</span><br><span class="line"></span><br><span class="line">root@ubuntu:~# </span><br></pre></td></tr></table></figure><p>è¿™é‡Œä»–å»ºè®®æˆ‘ä»¬æ‰§è¡Œ<code>apt install linux-oem-5.6-tools-common</code>æˆ–è€…<code>apt install linux-tools-common</code>è¿›è¡Œperfçš„å®‰è£…ã€‚é‚£æˆ‘ä»¬å°±å…ˆæ‰§è¡Œ<code>apt install linux-tools-common</code>å®‰è£…ä¸€ä¸‹è¯•è¯•ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# apt install linux-tools-common</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">You might want to run &#x27;apt --fix-broken install&#x27; to correct these.</span><br><span class="line">The following packages have unmet dependencies:</span><br><span class="line"> linux-headers-5.4.0-92-generic : Depends: linux-headers-5.4.0-92 but it is not going to be installed</span><br><span class="line"> linux-image-generic : Depends: linux-modules-extra-5.4.0-92-generic but it is not going to be installed</span><br><span class="line">E: Unmet dependencies. Try &#x27;apt --fix-broken install&#x27; with no packages (or specify a solution).</span><br><span class="line">root@ubuntu:~# </span><br></pre></td></tr></table></figure><p>æ¼‚äº®ï¼æŠ¥é”™äº†ï¼</p><p>ä¸è¦æ…Œï¼Œæˆ‘ä»¬è¦å­¦ä¼šé˜…è¯»æŠ¥é”™ä¿¡æ¯ï¼Œä¸æ€•å®ƒæŠ¥é”™ï¼Œå°±æ€•å®ƒä¸æŠ¥é”™ã€‚</p><p>è¿™é‡Œçš„æ„æ€å¤§æ¦‚æ˜¯å’±ä»¬è¦å®‰è£…çš„<code>linux-tools-common</code>éœ€è¦ä¾èµ–<code>linux-headers-5.4.0-92-generic</code>å’Œ<code>linux-image-generic</code>å¹¶ä¸”å®ƒè¿˜ç»™å‡ºäº†å»ºè®®â€You might want to run â€˜apt â€“fix-broken installâ€™ to correct these.â€ã€‚é‚£æˆ‘ä»¬å°±æŒ‰ç…§å®ƒè¯´çš„æ‰§è¡Œ<code>apt --fix-broken install</code>ç„¶åå†æ‰§è¡Œ<code>linux-tools-common</code>å°±èƒ½æˆåŠŸå®‰è£…ã€‚ç„¶åæˆ‘ä»¬æ‰§è¡Œperf -hçœ‹ä¸€ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# perf -h</span><br><span class="line">WARNING: perf not found for kernel 5.4.0-91</span><br><span class="line"></span><br><span class="line">  You may need to install the following packages for this specific kernel:</span><br><span class="line">    linux-tools-5.4.0-91-generic</span><br><span class="line">    linux-cloud-tools-5.4.0-91-generic</span><br><span class="line"></span><br><span class="line">  You may also want to install one of the following packages to keep up to date:</span><br><span class="line">    linux-tools-generic</span><br><span class="line">    linux-cloud-tools-generic</span><br><span class="line">root@ubuntu:~# </span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®ƒåˆæŠ¥ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œè¿™è™½è¯´æ˜¯è­¦å‘Šï¼Œä½†æ˜¯ä¸ä¿®å¤è¿™ä¸ªè­¦å‘Šæˆ‘ä»¬è¿˜æ˜¯æ— æ³•æ­£å¸¸ä½¿ç”¨perfã€‚<br>æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…linux-tools-5.4.0-91-genericå’Œlinux-tools-generic</p><p>ä¸€æ ·çš„æ‰§è¡Œ<code>apt install linux-tools-5.4.0-91-generic</code>å’Œ<code>linux-tools-generic</code></p><p>âš ï¸ï¼šä½ çš„å†…æ ¸ç‰ˆæœ¬å¯èƒ½å’Œæˆ‘çš„ä¸åŒï¼Œä¸è¦ç›²ç›®å¤åˆ¶ï¼æ‰€ä»¥æ¯”è¾ƒæ¨èä½¿ç”¨<code>apt install linux-tools-`uname -r` </code>è¿›è¡Œå®‰è£…ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å†æ‰§è¡Œ<code>perf -h</code>çœ‹çœ‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# perf -h</span><br><span class="line"></span><br><span class="line"> usage: perf [--version] [--help] [OPTIONS] COMMAND [ARGS]</span><br><span class="line"></span><br><span class="line"> The most commonly used perf commands are:</span><br><span class="line">   annotate        Read perf.data (created by perf record) and display annotated code</span><br><span class="line">   archive         Create archive with object files with build-ids found in perf.data file</span><br><span class="line">   bench           General framework for benchmark suites</span><br><span class="line">   buildid-cache   Manage build-id cache.</span><br><span class="line">   buildid-list    List the buildids in a perf.data file</span><br><span class="line">   c2c             Shared Data C2C/HITM Analyzer.</span><br><span class="line">   config          Get and set variables in a configuration file.</span><br><span class="line">   data            Data file related processing</span><br><span class="line">   diff            Read perf.data files and display the differential profile</span><br><span class="line">   evlist          List the event names in a perf.data file</span><br><span class="line">   ftrace          simple wrapper for kernel&#x27;s ftrace functionality</span><br><span class="line">   inject          Filter to augment the events stream with additional information</span><br><span class="line">   kallsyms        Searches running kernel for symbols</span><br><span class="line">   kmem            Tool to trace/measure kernel memory properties</span><br><span class="line">   kvm             Tool to trace/measure kvm guest os</span><br><span class="line">   list            List all symbolic event types</span><br><span class="line">   lock            Analyze lock events</span><br><span class="line">   mem             Profile memory accesses</span><br><span class="line">   record          Run a command and record its profile into perf.data</span><br><span class="line">   report          Read perf.data (created by perf record) and display the profile</span><br><span class="line">   sched           Tool to trace/measure scheduler properties (latencies)</span><br><span class="line">   script          Read perf.data (created by perf record) and display trace output</span><br><span class="line">   stat            Run a command and gather performance counter statistics</span><br><span class="line">   test            Runs sanity tests.</span><br><span class="line">   timechart       Tool to visualize total system behavior during a workload</span><br><span class="line">   top             System profiling tool.</span><br><span class="line">   version         display the version of perf binary</span><br><span class="line">   probe           Define new dynamic tracepoints</span><br><span class="line">   trace           strace inspired tool</span><br><span class="line"></span><br><span class="line"> See &#x27;perf help COMMAND&#x27; for more information on a specific command.</span><br><span class="line"></span><br><span class="line">root@ubuntu:~# </span><br></pre></td></tr></table></figure><p>OKï¼Œå®‰è£…æˆåŠŸï¼</p><h3 id="2ã€ä½¿ç”¨Perfè¿›è¡Œæ€§èƒ½ç»Ÿè®¡"><a href="#2ã€ä½¿ç”¨Perfè¿›è¡Œæ€§èƒ½ç»Ÿè®¡" class="headerlink" title="2ã€ä½¿ç”¨Perfè¿›è¡Œæ€§èƒ½ç»Ÿè®¡"></a>2ã€ä½¿ç”¨Perfè¿›è¡Œæ€§èƒ½ç»Ÿè®¡</h3><p>ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹Perféƒ½èƒ½ç»Ÿè®¡å“ªäº›ä¸œè¥¿çš„æ€§èƒ½æ•°æ®ã€‚é€šè¿‡ä¸Šé¢çš„<code>perf -h</code> å‘ç°<code>list</code> å‚æ•°æ˜¯å¯ä»¥åˆ—å‡ºæ‰€æœ‰event typeã€‚(List all symbolic event typesã€‚)<br>é‚£æˆ‘ä»¬æ‰§è¡Œ<code>perf list</code>ä¼šå‘ç°åˆ—å‡ºçš„æœ‰Hardware eventã€Software eventã€Tool eventã€Hardware cache eventè¿™äº›ï¼ˆå¤§è‡´é‡Œé¢å°±æ˜¯ç¼“å­˜å‘½ä¸­ã€cpuæ—¶é—´ã€L1ç¼“å­˜å‘½ä¸­ç­‰ä¸€å¤§å †æŒ‡æ ‡ï¼‰</p><p>æ¯”å¦‚è¯´æˆ‘ç°åœ¨éœ€è¦ç›‘æµ‹resource-page-1.0.0.jarè¿™ä¸ªjavaæœåŠ¡å™¨è¿è¡ŒæœŸé—´çš„CPUä½¿ç”¨æ—¶é—´ã€ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ç­‰ä¿¡æ¯ã€‚</p><p>åŒæ ·ä»å¸®åŠ©æ–‡æ¡£ä¸­å¾—çŸ¥<code>stat            Run a command and gather performance counter statistics</code>statè¿™ä¸ªå‚æ•°çš„åŠŸèƒ½å¤§è‡´æ„æ€æ˜¯è¿è¡Œå‘½ä»¤å¹¶æ”¶é›†æ€§èƒ½è®¡æ•°å™¨ç»Ÿè®¡ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬å…ˆç›´æ¥æ‰§è¡Œ<code>perf stat java -jar resource-page-1.0.0.jar</code>ï¼Œè¿™ä¸ªæ—¶å€™javaæœåŠ¡å™¨å°±å¼€å§‹è¿è¡Œäº†ï¼Œç„¶åæŠŠè¯¥javaæœåŠ¡çš„æµ‹è¯•æµç¨‹èµ°ä¸€éï¼Œæœ€åç›´æ¥Ctrl + Cç»“æŸæ‰å½“å‰ä»»åŠ¡ã€‚è¿™æ—¶ç»ˆç«¯å°±ä¼šå›æ˜¾ç»Ÿè®¡ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Performance counter stats for &#x27;java -jar resource-page-1.0.0.jar&#x27;:</span><br><span class="line"></span><br><span class="line">        15,710.07 msec task-clock                #    0.263 CPUs utilized          </span><br><span class="line">           11,808      context-switches          #    0.752 K/sec                  </span><br><span class="line">              584      cpu-migrations            #    0.037 K/sec                  </span><br><span class="line">          131,695      page-faults               #    0.008 M/sec                  </span><br><span class="line">   40,742,785,521      cycles                    #    2.593 GHz                    </span><br><span class="line">   46,422,658,743      instructions              #    1.14  insn per cycle         </span><br><span class="line">    9,177,132,057      branches                  #  584.156 M/sec                  </span><br><span class="line">      289,552,283      branch-misses             #    3.16% of all branches        </span><br><span class="line"></span><br><span class="line">     59.795222167 seconds time elapsed</span><br><span class="line"></span><br><span class="line">     14.154782000 seconds user</span><br><span class="line">      2.164583000 seconds sys</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šå‘ç°è¿™ç§ç›‘æµ‹åªæ˜¯åœ¨ç»ˆç«¯å›æ˜¾è¿™äº›æ•°æ®å¹¶æ²¡æœ‰ä»€ä¹ˆæ•°æ®ç•™å­˜ä¸‹æ¥ä¾›æˆ‘ä»¬ç”Ÿæˆç«ç„°å›¾ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä½¿ç”¨<code>record          Run a command and record its profile into perf.data</code>recordè¿™ä¸ªå‚æ•°æ¥æŠŠæ”¶é›†æ¥çš„æ•°æ®ä¿å­˜åˆ°perf.dataæ–‡ä»¶ä¸­ã€‚</p><p>é‚£é¦–å…ˆæˆ‘ä»¬å…ˆå°†javaæœåŠ¡å¯åŠ¨å¹¶è·å–åˆ°è¯¥æœåŠ¡å™¨çš„pidã€‚ï¼ˆæˆ‘è¿™é‡Œæ˜¯2403020åç»­æˆ‘ä»¬ä¼šç”¨åˆ°è¿™ä¸ªpidï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# ps -ef|grep java</span><br><span class="line">root     2403020       1  0 16:25 pts/1    00:00:18 java -jar /usr/local/app/resource/resource-page-1.0.0.jar 1000</span><br><span class="line">root     2406162 2354230  0 17:03 pts/1    00:00:00 grep --color=auto java</span><br><span class="line">root@ubuntu:~#</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬ä½¿ç”¨<code>perf record -F 50 -a -p 2403020 -g -- sleep 60</code>æ¥é‡‡é›†æ•°æ®ã€‚éœ€è¦ç­‰å¾…60sã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# perf record -F 50 -a -p 2403020 -g -- sleep 60</span><br><span class="line">[ perf record: Woken up 1 times to write data ]</span><br><span class="line">[ perf record: Captured and wrote 0.064 MB perf.data (1117 samples) ]</span><br><span class="line">root@ubuntu:~#</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸€ä¸‹ï¼šæ‰€æœ‰çš„å‚æ•°å’Œç”¨æ³•å¯ä»¥æ‰§è¡Œ<code>perf record -h</code>æŸ¥çœ‹ã€‚è¿™é‡Œæˆ‘å°±è§£é‡Šä¸€ä¸‹æˆ‘ä¸Šé¢ç”¨åˆ°å‡ ä¸ªå‚æ•°ï¼š</p><p>-F 50ï¼šæ¯ç§’é‡‡æ ·50æ¬¡</p><p>-aï¼šæ¥è‡ªç³»ç»ŸèŒƒå›´æ‰€æœ‰CPUçš„é‡‡é›†</p><p>-pï¼šè®°å½•è°ƒç”¨æ ˆ</p><p>-pï¼šç»‘å®šè¿›ç¨‹çš„PIDï¼Œè¿™æ ·å°±èƒ½é’ˆå¯¹æŸä¸ªè¿›ç¨‹è¿›è¡Œç›‘æ§ã€‚</p><p>â€“ sleep 60ï¼šç›‘æ§æŒç»­æ—¶é—´60ç§’</p><h3 id="3ã€ç”Ÿæˆç«ç„°å›¾"><a href="#3ã€ç”Ÿæˆç«ç„°å›¾" class="headerlink" title="3ã€ç”Ÿæˆç«ç„°å›¾"></a>3ã€ç”Ÿæˆç«ç„°å›¾</h3><p>ä¸Šè¿°æ“ä½œåæ–‡ä»¶å¤¹ä¸­å°†ä¼šå¤šå‡ºæ¥ä¸€ä¸ªå«perf.dataçš„æ–‡ä»¶ï¼Œä½†è¿™ä¸ªæ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥ç”Ÿæˆç«ç„°å›¾ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è½¬æ¢ä¸€ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# perf script &gt; out.perf</span><br><span class="line">root@ubuntu:~# ll</span><br><span class="line">total 31596</span><br><span class="line">drwxr-xr-x 3 root root     4096 Jan  7 17:43 ./</span><br><span class="line">drwxr-xr-x 3 root root     4096 Dec  6 17:51 ../</span><br><span class="line">drwxr-xr-x 2 root root     4096 Jan  7 04:52 logs/</span><br><span class="line">-rw------- 1 root root     4054 Jan  7 16:19 nohup.out</span><br><span class="line">-rw-r--r-- 1 root root    37015 Jan  7 17:43 out.perf</span><br><span class="line">-rw------- 1 root root    48268 Jan  7 17:43 perf.data</span><br><span class="line">-rwxr-xr-x 1 root root 32243563 Dec 13 13:10 resource-page-1.0.0.jar*</span><br><span class="line">-rwxr-xr-x 1 root root     1564 Dec  6 17:53 start.sh*</span><br><span class="line">root@ubuntu:~#</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ©ç”¨FlameGraphé¡¹ç›®è¿›è¡Œç«ç„°å›¾çš„ç”Ÿæˆï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# git clone --depth 1 https://github.com/brendangregg/FlameGraph.git</span><br><span class="line">root@ubuntu:~# FlameGraph/stackcollapse-perf.pl out.perf &gt; out.folded</span><br><span class="line">root@ubuntu:~# FlameGraph/flamegraph.pl out.folded &gt; out.svg</span><br></pre></td></tr></table></figure><p>ğŸªœï¼šå¦‚æœç”Ÿæˆç«ç„°å›¾çš„æ—¶å€™æç¤º  <font color=red>ERROR: No stack counts found</font> ä¸€èˆ¬æœ‰ä¸‰ç§æƒ…å†µ</p><p>ç¬¬ä¸€ç§æƒ…å†µï¼šç›‘æ§æ—¶é—´å¤ªçŸ­ï¼Œè¿™ç§æƒ…å†µç¨å¾®è°ƒå¤§sleepçš„æ—¶é—´å³å¯ã€‚</p><p>ç¬¬äºŒç§æƒ…å†µï¼šç¨‹åºæ²¡æœ‰åœ¨è¿è¡Œäº†ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦æ’æŸ¥ä¸€ä¸‹è¢«ç›‘æ§ç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚</p><p>ç¬¬ä¸‰ç§æƒ…å†µï¼šå°±æ˜¯æˆ‘è¿™ç§ï¼Œæˆ‘è¿™è¾¹æµ‹è¯•ç”¨çš„æ˜¯ä¸€ä¸ªjava webç¨‹åºï¼Œæ‰€ä»¥åœ¨ç›‘æ§æœŸé—´æœ€å¥½æ˜¯è¯·æ±‚å‡ æ¬¡æ¥å£ã€‚</p><p>ä¸€åˆ‡é¡ºåˆ©çš„è¯å½“å‰æ–‡ä»¶å¤¹ä¸­å°±ä¼šå‡ºç°ä¸€ä¸ªsvgå›¾ç‰‡ï¼Œè¿™ä¸ªå›¾ç‰‡æ‰“å¼€å°±æ˜¯ç«ç„°å›¾ï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><ul><li>javaç¨‹åºçš„è¿™ä¸ªå› ä¸ºåªæœ‰æˆ‘æ‰‹åŠ¨è°ƒç”¨äº†å‡ æ¬¡é€»è¾‘ç®€å•çš„æ¥å£å¯èƒ½ç«ç„°æ•ˆæœä¸æ˜æ˜¾[è°ƒç”¨æ ˆè¶Šæ·±ç«ç„°è¶Šé«˜ï¼ŒCPUè€—æ—¶è¶Šé•¿ç«ç„°è¶Šå®½]</li></ul><p><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220110174720.png"></p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Perf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticsSearchä¼ªé›†ç¾¤æ­å»º</title>
      <link href="/post/2022/01/01/47360/"/>
      <url>/post/2022/01/01/47360/</url>
      
        <content type="html"><![CDATA[<p><strong>âš ï¸âš ï¸âš ï¸è¯¥æ•™ç¨‹åŸºäºdocker- composeå»ºç«‹ä¼ªé›†ç¾¤ï¼Œä»…é€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•ä¸­ä½¿ç”¨</strong></p><h3 id="1ã€å»ºç«‹é¡¹ç›®ç›®å½•åŠå„é…ç½®æ–‡ä»¶ã€‚"><a href="#1ã€å»ºç«‹é¡¹ç›®ç›®å½•åŠå„é…ç½®æ–‡ä»¶ã€‚" class="headerlink" title="1ã€å»ºç«‹é¡¹ç›®ç›®å½•åŠå„é…ç½®æ–‡ä»¶ã€‚"></a>1ã€å»ºç«‹é¡¹ç›®ç›®å½•åŠå„é…ç½®æ–‡ä»¶ã€‚</h3><ul><li>é¦–å…ˆåˆ›å»ºä¸€äº›éœ€è¦æ˜ å°„çš„ç›®å½•ï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# mkdir -p es/data</span><br><span class="line">root@ubuntu:~# mkdir -p es/logs</span><br><span class="line">root@ubuntu:~# ll es/</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x 4 root root 4096 Jan 10 02:25 ./</span><br><span class="line">drwxr-xr-x 4 root root 4096 Jan 10 02:25 ../</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jan 10 02:25 data/</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jan 10 02:25 logs/</span><br><span class="line">root@ubuntu:~#</span><br></pre></td></tr></table></figure></li><li>ç„¶ååˆ›å»ºdocker-compose.ymlé…ç½®æ–‡ä»¶<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">es_node0:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">elasticsearch:7.16.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es_node0</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/es_node0.yml:/usr/share/elasticsearch/config/elasticsearch.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/data/node0:/usr/share/elasticsearch/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/logs/node0:/usr/share/elasticsearch/logs</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29200</span><span class="string">:9200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29300</span><span class="string">:9300</span></span><br><span class="line">  <span class="attr">es_node1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">elasticsearch:7.16.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es_node1</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/es_node1.yml:/usr/share/elasticsearch/config/elasticsearch.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/data/node1:/usr/share/elasticsearch/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/logs/node1:/usr/share/elasticsearch/logs</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29201</span><span class="string">:9200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29301</span><span class="string">:9301</span></span><br><span class="line">  <span class="attr">es_node2:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">elasticsearch:7.16.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es_node2</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/es_node2.yml:/usr/share/elasticsearch/config/elasticsearch.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/data/node2:/usr/share/elasticsearch/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/logs/node2:/usr/share/elasticsearch/logs</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29202</span><span class="string">:9200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">29302</span><span class="string">:9302</span></span><br><span class="line">  <span class="attr">kibana:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">kibana:7.16.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">kibana</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SERVER_NAME=kibana</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ELASTICSEARCH_HOSTS=[&quot;http://es_node0:9200&quot;,&quot;http://es_node1:9201&quot;,&quot;http://es_node2:9202&quot;]</span>      </span><br><span class="line">      <span class="bullet">-</span> <span class="string">XPACK_MONITORING_ENABLED=true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">25601</span><span class="string">:5601</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">es_node0</span></span><br></pre></td></tr></table></figure></li></ul><p>âš ï¸ï¼šå› ä¸ºæˆ‘çš„é˜²ç«å¢™é™åˆ¶è¿™å°æœºå™¨ä»…20000-30000ç«¯å£èƒ½å¼€æ”¾ï¼Œæ‰€ä»¥æˆ‘çš„å®¹å™¨ç«¯å£æ˜ å°„å‡ºæ¥éƒ½æ˜¯20000+çš„ç«¯å£ï¼Œä½ ä»¬æŒ‰ç…§è‡ªå·±çš„å®é™…æƒ…å†µå»é…ç½®å³å¯ã€‚</p><ul><li><p>node0çš„é…ç½®</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é›†ç¾¤åç§°ï¼Œä¸‰ä¸ªèŠ‚ç‚¹è¦ä¸€è‡´</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">es-cluster</span></span><br><span class="line"><span class="comment"># å½“å‰èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node0</span></span><br><span class="line"><span class="comment"># æ˜¯å¦æœ‰èµ„æ ¼ä½œä¸ºä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># æ˜¯å¦å­˜å‚¨æ•°æ®</span></span><br><span class="line"><span class="attr">node.data:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># æœ€â¼¤é›†ç¾¤èŠ‚ç‚¹æ•°</span></span><br><span class="line"><span class="attr">node.max_local_storage_nodes:</span> <span class="number">3</span></span><br><span class="line"><span class="comment"># ç›‘å¬host</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># å®¹å™¨å†…æœåŠ¡ç«¯â¼ é»˜è®¤9200å³å¯</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment"># å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´é€šä¿¡ç«¯â¼</span></span><br><span class="line"><span class="attr">transport.tcp.port:</span> <span class="number">9300</span></span><br><span class="line"><span class="comment"># es7.xä¹‹åæ–°å¢çš„é…ç½®ï¼Œå†™â¼Šå€™é€‰ä¸»èŠ‚ç‚¹çš„è®¾å¤‡åœ°å€ï¼Œåœ¨å¼€å¯æœåŠ¡åå¯ä»¥è¢«é€‰ä¸ºä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [<span class="string">&quot;es_node0:9300&quot;</span>,<span class="string">&quot;es_node1:9301&quot;</span>,<span class="string">&quot;es_node2:9302&quot;</span>]</span><br><span class="line"><span class="comment"># es7.xä¹‹åæ–°å¢çš„é…ç½®ï¼Œåˆå§‹åŒ–é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾masterï¼Œæ­¤å¤„çš„nodeåç§°ä¸ºå„èŠ‚ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node0&quot;</span>, <span class="string">&quot;node1&quot;</span>, <span class="string">&quot;node2&quot;</span>]</span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">http.cors.allow-credentials:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>node1å’Œnode2çš„é…ç½®ï¼ˆnode1å’Œnode2é…ç½®åŸºæœ¬ä¸€è‡´ï¼‰</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é›†ç¾¤åç§° ä¸‰ä¸ªèŠ‚ç‚¹è¦ä¸€è‡´</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">es-cluster</span></span><br><span class="line"><span class="comment"># å½“å‰èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node1</span></span><br><span class="line"><span class="comment"># æ˜¯å¦æœ‰èµ„æ ¼ä½œä¸ºä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># æ˜¯å¦å­˜å‚¨æ•°æ®</span></span><br><span class="line"><span class="attr">node.data:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># æœ€â¼¤é›†ç¾¤èŠ‚ç‚¹æ•°</span></span><br><span class="line"><span class="attr">node.max_local_storage_nodes:</span> <span class="number">3</span></span><br><span class="line"><span class="comment">#â½¹å…³åœ°å€</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># ç«¯â¼</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9201</span></span><br><span class="line"><span class="comment"># å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´é€šä¿¡ç«¯â¼</span></span><br><span class="line"><span class="attr">transport.tcp.port:</span> <span class="number">9301</span></span><br><span class="line"><span class="comment"># es7.xä¹‹åæ–°å¢çš„é…ç½®ï¼Œå†™â¼Šå€™é€‰ä¸»èŠ‚ç‚¹çš„è®¾å¤‡åœ°å€ï¼Œåœ¨å¼€å¯æœåŠ¡åå¯ä»¥è¢«é€‰ä¸ºä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [<span class="string">&quot;es_node0:9300&quot;</span>,<span class="string">&quot;es_node1:9301&quot;</span>,<span class="string">&quot;es_node2:9302&quot;</span>]</span><br><span class="line"><span class="comment"># es7.xä¹‹åæ–°å¢çš„é…ç½®ï¼Œåˆå§‹åŒ–é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾masterï¼Œæ­¤å¤„çš„nodeåç§°ä¸ºå„èŠ‚ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node0&quot;</span>, <span class="string">&quot;node1&quot;</span>, <span class="string">&quot;node2&quot;</span>]</span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">http.cors.allow-credentials:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="2ã€å¯åŠ¨å’Œå®‰è£…ikåˆ†è¯å™¨"><a href="#2ã€å¯åŠ¨å’Œå®‰è£…ikåˆ†è¯å™¨" class="headerlink" title="2ã€å¯åŠ¨å’Œå®‰è£…ikåˆ†è¯å™¨"></a>2ã€å¯åŠ¨å’Œå®‰è£…ikåˆ†è¯å™¨</h3><ul><li>å¯åŠ¨</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure><p>æ•™ä½ ä»¬ä¸€ä¸ªéªšæ“ä½œï¼šæˆ‘ä»¬è¿™é‡Œç›´æ¥æ˜¯ä½¿ç”¨<code>up</code>å¯åŠ¨å¹¶æ²¡æœ‰å¸¦ä¸Š<code>-d</code>å‚æ•°åå°å¯åŠ¨ï¼Œè¿™æ ·å°±ä¸ç”¨æ‰§è¡ŒæŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤å°±å¯ä»¥ç¬¬ä¸€æ—¶é—´ç›´æ¥çœ‹è§å¯åŠ¨æ—¥å¿—ã€‚ä»€ä¹ˆï¼Ÿ ä½ é—®æˆ‘è¿™æ ·å¯åŠ¨ä¹‹åæ€ä¹ˆåå°è¿è¡Œï¼Ÿ <strong>ç›´æ¥å…³æ‰å½“å‰è¿™ä¸ªç»ˆç«¯å³å¯</strong>ï¼Œè¿™ä¸ªæ˜¯æˆ‘2019å¹´çš„æ—¶å€™å‘ç°çš„<code>docker-compose</code>ä¸å…¶ä»–æŒç»­è¿è¡Œè½¯ä»¶çš„å·®å¼‚ã€‚</p><ul><li>å®‰è£…ikåˆ†è¯å™¨(ä¸€å…±ä¸‰ä¸ªå®¹å™¨æ¯æ¬¡æ›¿æ¢æ‰å®¹å™¨åç§°&#x2F;å®¹å™¨ID æ‰§è¡Œä¸‰æ¬¡å³å¯)<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# docker exec -ti es_node0 ./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.16.2/elasticsearch-analysis-ik-7.16.2.zip</span><br><span class="line">root@ubuntu:~# docker restart es_node0</span><br></pre></td></tr></table></figure></li></ul><p>âœ‹ï¼šè¿™ä¸€æ­¥æ“ä½œå®é™…ä¸Šå¯ä»¥åœ¨Dockerfileä¸­æ“ä½œã€‚</p><h3 id="3ã€æŸ¥è¯¢é›†ç¾¤çŠ¶æ€"><a href="#3ã€æŸ¥è¯¢é›†ç¾¤çŠ¶æ€" class="headerlink" title="3ã€æŸ¥è¯¢é›†ç¾¤çŠ¶æ€"></a>3ã€æŸ¥è¯¢é›†ç¾¤çŠ¶æ€</h3><ul><li>æ¨èä½¿ç”¨Chromeçš„<a href="https://chrome.google.com/webstore/detail/elasticsearch-head/ffmkiejjmecolpfloofpjologoblkegm?utm_source=chrome-ntp-icon">ElasticSearch Head</a>æ’ä»¶ï¼Œæœ‰æ¡ä»¶çš„å¯ä»¥ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°ä¸‹è½½é¡µé¢è¿›è¡Œå®‰è£…ã€‚</li><li>æ²¡æœ‰ç½‘ç»œæ¡ä»¶çš„å¯ä»¥<a href="https://up.eber.vip/Think-Me/img/main/2022/01/ElasticSearch_Head_0.1.5.0.crx">ç‚¹å‡»æ­¤å¤„</a>ä¸‹è½½ç„¶åå†æ‰‹åŠ¨è¿›è¡Œç¦»çº¿å®‰è£…ã€ä¸€èˆ¬æ˜¯æ‰“å¼€æ’ä»¶ç®¡ç†çš„å¼€å‘è€…æ¨¡å¼ç„¶åç›´æ¥æŠŠcrxæ–‡ä»¶æ‹–è¿›å»ï¼Œå¦‚æœä¸è¡Œè¯·æœç´¢ä¸€ä¸‹æ•™ç¨‹ã€‘ã€‚</li></ul><p>æ’ä»¶æ‰“å¼€åå¡«å…¥é“¾æ¥åœ°å€å³å¯è¿æ¥ESå¹¶å±•ç¤ºå‡ºçŠ¶æ€ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="https://up.eber.vip/Think-Me/img/main/2022/01/20220110150847.png"></p><h3 id="3ã€å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#3ã€å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="3ã€å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>3ã€å¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><p>1ã€Error opening log file â€˜logs&#x2F;gc.logâ€™: Permission denied</p><p>å¯èƒ½ä¼šæŠ¥è¿™ç§æƒé™ä¸è¶³çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹æƒ³ç®€å•ç‚¹å°±ç›´æ¥<code>chmod -R 777 ./logs</code>å°†logsç›®å½•è®¾ç½®æˆæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™å³å¯ã€‚</p><p>2ã€max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</p><p>è¿™ä¸ªæ˜¯æç¤ºä½ çš„å†…æ ¸å‚æ•°vm.max_map_countè®¾ç½®çš„è¿‡ä½ï¼Œç›´æ¥æŒ‰ç…§æç¤ºä¿®æ”¹å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu:~# vi /etc/sysctl.conf</span><br><span class="line">vm.max_map_count = 655300 # æ–‡ä»¶æœ«å°¾æ·»åŠ è¯¥é¡¹ä¿å­˜å³å¯</span><br><span class="line"></span><br><span class="line">root@ubuntu:~# sysctl -p </span><br></pre></td></tr></table></figure><p>å†…æ ¸å‚æ•°ç”Ÿæ•ˆåé‡æ–°å¯åŠ¨docker-composeå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticsSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸¤æ­¥å®ç°åœ¨Ubuntu18,20ç­‰é«˜ç‰ˆæœ¬è®¾ç½®é™æ€IP</title>
      <link href="/post/2021/12/31/50729/"/>
      <url>/post/2021/12/31/50729/</url>
      
        <content type="html"><![CDATA[<p><strong>æ–°ç‰ˆæœ¬çš„Ubuntuå·²ç»æ”¾å¼ƒäº†åœ¨&#x2F;etc&#x2F;network&#x2F;interfacesé‡Œé¢é…ç½®IPï¼Œæ”¹ä¸ºåœ¨&#x2F;etc&#x2F;netplan&#x2F;00-installer-config.yamlçš„yamlæ–‡ä»¶ä¸­é…ç½®IPåœ°å€ã€‚</strong></p><h4 id="1-ä¿®æ”¹é…ç½®æ–‡ä»¶ã€ğŸ—ï¸æ³¨æ„ï¼šä¸åŒçš„äº‘æœåŠ¡å™¨å‚å•†è¿™ä¸ªyamlçš„æ–‡ä»¶åå­—å¯èƒ½ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„è‡ªå·±çš„æ–‡ä»¶åã€‘"><a href="#1-ä¿®æ”¹é…ç½®æ–‡ä»¶ã€ğŸ—ï¸æ³¨æ„ï¼šä¸åŒçš„äº‘æœåŠ¡å™¨å‚å•†è¿™ä¸ªyamlçš„æ–‡ä»¶åå­—å¯èƒ½ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„è‡ªå·±çš„æ–‡ä»¶åã€‘" class="headerlink" title="1. ä¿®æ”¹é…ç½®æ–‡ä»¶ã€ğŸ—ï¸æ³¨æ„ï¼šä¸åŒçš„äº‘æœåŠ¡å™¨å‚å•†è¿™ä¸ªyamlçš„æ–‡ä»¶åå­—å¯èƒ½ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„è‡ªå·±çš„æ–‡ä»¶åã€‘"></a>1. ä¿®æ”¹é…ç½®æ–‡ä»¶ã€ğŸ—ï¸æ³¨æ„ï¼šä¸åŒçš„äº‘æœåŠ¡å™¨å‚å•†è¿™ä¸ªyamlçš„æ–‡ä»¶åå­—å¯èƒ½ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„è‡ªå·±çš„æ–‡ä»¶åã€‘</h4><p>ä½¿ç”¨ç†Ÿæ‚‰çš„ç¼–è¾‘å™¨æ‰“å¼€ &#x2F;etc&#x2F;netplan&#x2F; ä¸‹é¢çš„yamlé…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„æ˜¯00-installer-config.yaml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi  /etc/netplan/00-installer-config.yaml </span><br></pre></td></tr></table></figure><p>æ ¹æ®è‡ªå·±çš„éœ€è¦é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># This is the network config written by &#x27;subiquity&#x27;</span><br><span class="line">network:</span><br><span class="line">  ethernets:</span><br><span class="line">    enp0s3: # ç½‘å¡çš„åç§°</span><br><span class="line">      dhcp4: true</span><br><span class="line">    enp0s8:</span><br><span class="line">      addresses: [10.0.0.101/20] # é…ç½®çš„é™æ€ipåœ°å€å’Œæ©ç  æ³¨æ„å•è¯æ˜¯addresses</span><br><span class="line">      dhcp4: false # å…³é—­dhcp4</span><br><span class="line">      optional: true</span><br><span class="line">      gateway4: 10.0.0.1 # ç½‘å…³åœ°å€</span><br><span class="line">  nameservers: # è®¾ç½®dns</span><br><span class="line">        addresses: [10.0.0.1,8.8.8.8]  # DNSæœåŠ¡å™¨åœ°å€ï¼Œå¤šä¸ªDNSæœåŠ¡å™¨åœ°å€éœ€è¦ç”¨è‹±æ–‡é€—å·åˆ†éš”å¼€</span><br><span class="line">  version: 2</span><br></pre></td></tr></table></figure><h4 id="2-ä½¿é…ç½®ç”Ÿæ•ˆ"><a href="#2-ä½¿é…ç½®ç”Ÿæ•ˆ" class="headerlink" title="2. ä½¿é…ç½®ç”Ÿæ•ˆ"></a>2. ä½¿é…ç½®ç”Ÿæ•ˆ</h4><p>æ‰§è¡Œnetplan applyä½¿é…ç½®ç”Ÿæ•ˆ</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•çš„èŠä¸€èŠRedis</title>
      <link href="/post/2021/12/29/21421/"/>
      <url>/post/2021/12/29/21421/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Redisé›ªå´©ã€ç©¿é€ã€å¹¶å‘ç­‰é—®é¢˜"><a href="#ä¸€ã€Redisé›ªå´©ã€ç©¿é€ã€å¹¶å‘ç­‰é—®é¢˜" class="headerlink" title="ä¸€ã€Redisé›ªå´©ã€ç©¿é€ã€å¹¶å‘ç­‰é—®é¢˜"></a>ä¸€ã€Redisé›ªå´©ã€ç©¿é€ã€å¹¶å‘ç­‰é—®é¢˜</h2><h3 id="1-1ã€ç¼“å­˜é›ªå´©"><a href="#1-1ã€ç¼“å­˜é›ªå´©" class="headerlink" title="1.1ã€ç¼“å­˜é›ªå´©"></a>1.1ã€<strong>ç¼“å­˜é›ªå´©</strong></h3><p>ç¼“å­˜é›ªå´©æŒ‡çš„æ˜¯ï¼šæ•°æ®æœªåŠ è½½åˆ°ç¼“å­˜ä¸­æˆ–ç¼“å­˜åŒä¸€æ—¶é—´å¤§è§„æ¨¡çš„å¤±æ•ˆï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ç©¿é€åˆ°æ•°æ®åº“ã€‚æœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“ä¸»æœºCPUå’Œå†…å­˜è´Ÿè½½è¿‡é«˜ç”šè‡³å®•æœºã€‚</p><p>ğŸŒ°<strong>ä¸¾ä¸€ä¸ªé›ªå´©çš„ç®€å•ä¾‹å­ï¼š</strong></p><p>1ã€redisé›†ç¾¤å¤§é¢ç§¯æ•…éšœæˆ–æ•°æ®æ²¡æœ‰é¢„è¯»åˆ°ç¼“å­˜ä¸­ã€‚</p><p>2ã€å½“å¤§é‡çš„è¯·æ±‚è¿›æ¥åæ²¡æœ‰å‘½ä¸­ç¼“å­˜å°†ç›´æ¥ç©¿é€åˆ°æ•°æ®åº“ï¼Œæ•°æ®åº“çš„å‹åŠ›æš´å¢ã€‚</p><p>3ã€å¦‚æœæŒç»­æœ‰è¯·æ±‚ç©¿é€ç¼“å­˜è¿›æ¥ï¼Œå¯èƒ½å¾ˆå¿«å°±ä¼šè¶…å‡ºæ•°æ®åº“å½“æ—¶çš„è®¾è®¡é˜ˆå€¼ï¼Œç›´è‡³å®•æœºã€‚</p><p>4ã€ç”±äºå¤§é‡çš„åº”ç”¨æœåŠ¡ä¾èµ–æ•°æ®åº“å’Œredisçš„æœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å¾ˆå¿«å°±ä¼šå˜æˆå„æœåŠ¡é›†ç¾¤çš„é›ªå´©ï¼Œæœ€åæ•´ä¸ªæœåŠ¡å½»åº•å´©æºƒã€‚</p><p>âš ï¸<strong>ç¼“å­˜é›ªå´©è§£å†³æ€è·¯ï¼š</strong></p><p>ğŸ“‰<em><strong>1ã€ç¼“å­˜çš„é«˜å¯ç”¨</strong></em></p><p>ç¼“å­˜å±‚è®¾è®¡æˆé«˜å¯ç”¨ï¼Œé˜²æ­¢ç¼“å­˜å¤§é¢ç§¯æ•…éšœã€‚å³ä½¿ä¸ªåˆ«èŠ‚ç‚¹ã€ä¸ªåˆ«æœºå™¨ã€ç”šè‡³æ˜¯æœºæˆ¿å®•æ‰ï¼Œä¾ç„¶å¯ä»¥æä¾›æœåŠ¡ï¼Œä¾‹å¦‚ Redis Sentinel å’Œ Redis Cluster éƒ½å®ç°äº†é«˜å¯ç”¨ã€‚ï¼ˆå®˜æ–¹æ¨èRedis Sentinelï¼‰</p><p>ğŸ“‰<em><strong>2ã€ç¼“å­˜é™çº§</strong></em></p><p>å¯ä»¥åˆ©ç”¨ehcacheç­‰æœ¬åœ°ç¼“å­˜ï¼Œä½†ä¸»è¦è¿˜æ˜¯å¯¹æºæœåŠ¡è®¿é—®è¿›è¡Œé™æµã€èµ„æºéš”ç¦»(ç†”æ–­)ã€é™çº§ç­‰ã€‚</p><p>å½“è®¿é—®é‡å‰§å¢ã€æœåŠ¡å‡ºç°é—®é¢˜ä»ç„¶éœ€è¦ä¿è¯æœåŠ¡è¿˜æ˜¯å¯ç”¨çš„ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸€äº›å…³é”®æ•°æ®è¿›è¡Œè‡ªåŠ¨é™çº§ï¼Œä¹Ÿå¯ä»¥é…ç½®å¼€å…³å®ç°äººå·¥é™çº§ï¼Œè¿™é‡Œä¼šæ¶‰åŠåˆ°è¿ç»´çš„é…åˆã€‚</p><p>é™çº§çš„æœ€ç»ˆç›®çš„æ˜¯ä¿è¯æ ¸å¿ƒæœåŠ¡å¯ç”¨ï¼Œå³ä½¿æ˜¯æœ‰æŸçš„ã€‚</p><p>æ¯”å¦‚æ¨èæœåŠ¡ä¸­ï¼Œå¾ˆå¤šéƒ½æ˜¯ä¸ªæ€§åŒ–çš„éœ€æ±‚ï¼Œå‡å¦‚ä¸ªæ€§åŒ–éœ€æ±‚ä¸èƒ½æä¾›æœåŠ¡äº†ï¼Œå¯ä»¥é™çº§è¡¥å……çƒ­ç‚¹æ•°æ®ï¼Œä¸è‡³äºé€ æˆå‰ç«¯é¡µé¢æ˜¯ä¸ªå¤§ç©ºç™½ã€‚</p><p>åœ¨è¿›è¡Œé™çº§ä¹‹å‰è¦å¯¹ç³»ç»Ÿè¿›è¡Œæ¢³ç†ï¼Œæ¯”å¦‚ï¼šå“ªäº›ä¸šåŠ¡æ˜¯æ ¸å¿ƒ(å¿…é¡»ä¿è¯)ï¼Œå“ªäº›ä¸šåŠ¡å¯ä»¥å®¹è®¸æš‚æ—¶ä¸æä¾›æœåŠ¡(åˆ©ç”¨é™æ€é¡µé¢æ›¿æ¢)ç­‰ï¼Œä»¥åŠé…åˆæœåŠ¡å™¨æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ¥åè®¾ç½®æ•´ä½“é¢„æ¡ˆï¼Œæ¯”å¦‚ï¼š</p><p>normalï¼šæ¯”å¦‚æœ‰äº›æœåŠ¡å¶å°”å› ä¸ºç½‘ç»œæŠ–åŠ¨æˆ–è€…æœåŠ¡æ­£åœ¨ä¸Šçº¿è€Œè¶…æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§ï¼›</p><p>warningï¼šæœ‰äº›æœåŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…æˆåŠŸç‡æœ‰æ³¢åŠ¨(å¦‚åœ¨95~100%ä¹‹é—´)ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§æˆ–äººå·¥é™çº§ï¼Œå¹¶å‘é€å‘Šè­¦ï¼›</p><p>errorï¼šæ¯”å¦‚å¯ç”¨ç‡ä½äº90%ï¼Œæˆ–è€…æ•°æ®åº“è¿æ¥æ± è¢«æ‰“çˆ†äº†ï¼Œæˆ–è€…è®¿é—®é‡çªç„¶çŒ›å¢åˆ°ç³»ç»Ÿèƒ½æ‰¿å—çš„æœ€å¤§é˜€å€¼ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®æƒ…å†µè‡ªåŠ¨é™çº§æˆ–è€…äººå·¥é™çº§ï¼›</p><p>emergencyï¼šæ¯”å¦‚å› ä¸ºç‰¹æ®ŠåŸå› æ•°æ®é”™è¯¯äº†ï¼Œæ­¤æ—¶éœ€è¦ç´§æ€¥äººå·¥é™çº§ã€‚</p><p>ğŸ“‰<em><strong>3ã€Rediså¤‡ä»½æ¢å¤å’Œç¼“å­˜é¢„çƒ­</strong></em></p><p>è¿™ä¸¤ç‚¹éƒ½æ˜¯è§£å†³åœ¨<strong>é¡¹ç›®ç¬¬ä¸€æ¬¡å¯åŠ¨</strong>æˆ–è€…<strong>ç¼“å­˜æ•…éšœåå†·å¯åŠ¨æ—¶</strong>ç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œè¿™æ—¶å¦‚æœæ˜¯é«˜å¹¶å‘åœºæ™¯ä¸‹å°±ä¼šå‡ºç°å¤§é‡çš„è¯·æ±‚ç©¿é€åˆ°åŸå§‹æ•°æ®åº“å¯èƒ½å¯¼è‡´æ•°æ®åº“å®•æœºã€‚</p><p>è¿™ç§æ¯”è¾ƒå°´å°¬çš„å¯åŠ¨å³å®•æœºè¿˜æ˜¯å¾ˆè‡´å‘½çš„ğŸ˜„ã€‚</p><p>æ‰€ä»¥åœ¨é¡¹ç›®å¯åŠ¨å‰éœ€è¦å°†redisçš„æ•°æ®å¤‡ä»½è¿›è¡Œæ¢å¤ï¼Œæ–°é¡¹ç›®æ²¡æœ‰å¤‡ä»½çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è„šæœ¬æˆ–è€…ç¨‹åºé€»è¾‘å…ˆæå‰å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚</p><p>è¿™ä¸ªæ˜¯æ¯”è¾ƒç®€å•åŸºç¡€çš„é¢„çƒ­æ–¹å¼ï¼Œå®é™…ç”Ÿäº§ä¸­å¯èƒ½éœ€è¦æ ¹æ®ä»¥å¾€çš„æ—¥å¿—è¿›è¡Œåˆ†ææŒ‰ç…§æ•°æ®çš„çƒ­åº¦å»è¿›è¡Œç¼“å­˜ã€‚</p><p>ğŸ“‰<em><strong>4ã€æå‰æ¼”ç»ƒï¼Œé˜²æ‚£äºæœªç„¶</strong></em></p><p>æœ€åï¼Œå»ºè®®è¿˜æ˜¯åœ¨é¡¹ç›®ä¸Šçº¿å‰ï¼Œæ¨¡æ‹Ÿæµ‹è¯•ç¼“å­˜å±‚å®•æ‰åï¼Œåº”ç”¨ä»¥åŠåç«¯çš„è´Ÿè½½æƒ…å†µä»¥åŠå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå¯¹é«˜å¯ç”¨æå‰æ¨¡æ‹Ÿæµ‹è¯•ï¼Œæå‰å‘ç°é—®é¢˜ã€‚</p><p>âš ï¸å…¶å®æœ€é‡è¦çš„å°±æ˜¯è¿™ä¸€æ­¥ï¼šé˜²æ‚£äºæœªç„¶ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œè¿™æ ·ä¸è‡³äºç”Ÿäº§ç¯å¢ƒä¸Šå‡ºç°é¢„æ–™ä¹‹å¤–çš„é—®é¢˜è€Œæ‰‹å¿™è„šä¹±ï¼</p><h3 id="1-2ã€ç¼“å­˜ç©¿é€"><a href="#1-2ã€ç¼“å­˜ç©¿é€" class="headerlink" title="1.2ã€ç¼“å­˜ç©¿é€"></a>1.2ã€<strong>ç¼“å­˜ç©¿é€</strong></h3><p>ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯ï¼šæŸ¥è¯¢çš„æ•°æ®æœ¬èº«åœ¨æ•°æ®åº“ä¸­å°±æ²¡æœ‰ï¼Œè‡ªç„¶åœ¨ç¼“å­˜ä¸­ä¹Ÿä¸ä¼šæœ‰ã€‚è¿™æ ·å°±å¯¼è‡´æŸ¥è¯¢çš„æ—¶å€™ï¼Œåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°ï¼Œæ¯æ¬¡éƒ½è¦å»æ•°æ®åº“å†æŸ¥è¯¢ä¸€éï¼Œç„¶åè¿”å›ç©ºï¼ˆç›¸å½“äºè¿›è¡Œäº†ä¸¤æ¬¡æ— ç”¨çš„æŸ¥è¯¢ï¼‰ã€‚è¿™æ ·è¯·æ±‚å°±ç»•è¿‡äº†ç¼“å­˜ç›´æ¥æŸ¥æ•°æ®åº“ï¼Œè¿™ä¹Ÿæ˜¯ç»å¸¸æçš„ç¼“å­˜å‘½ä¸­ç‡é—®é¢˜ã€‚</p><p>âš ï¸<strong>ç¼“å­˜ç©¿é€è§£å†³æ€è·¯ï¼š</strong></p><p>1ã€ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚</p><p>2ã€å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´æˆ–è€…å½“æœ‰å€¼çš„æ—¶å€™å°†ç¼“å­˜ä¸­çš„å€¼æ›¿æ¢æ‰å³å¯ã€‚é€šè¿‡è¿™ä¸ªç›´æ¥è®¾ç½®çš„é»˜è®¤å€¼æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åˆ°ç¼“å­˜ä¸­è·å–å°±æœ‰å€¼ï¼Œè€Œä¸ä¼šç»§ç»­è®¿é—®æ•°æ®åº“ï¼Œè¿™ç§æ–¹æ³•æœ€ç®€å•ç²—æš´ä¸”å®ç”¨ã€‚</p><h3 id="1-3ã€ç¼“å­˜å¹¶å‘"><a href="#1-3ã€ç¼“å­˜å¹¶å‘" class="headerlink" title="1.3ã€ç¼“å­˜å¹¶å‘"></a>1.3ã€<strong>ç¼“å­˜å¹¶å‘</strong></h3><p>è¿™é‡Œçš„å¹¶å‘æŒ‡çš„æ˜¯å¤šä¸ªredisçš„clientåŒæ—¶set keyå¼•èµ·çš„å¹¶å‘é—®é¢˜ã€‚å…¶å®redisè‡ªèº«å°±æ˜¯å•çº¿ç¨‹æ“ä½œï¼Œå¤šä¸ªclientå¹¶å‘æ“ä½œï¼ŒæŒ‰ç…§å…ˆåˆ°å…ˆæ‰§è¡Œçš„åŸåˆ™ï¼Œå…ˆåˆ°çš„å…ˆæ‰§è¡Œï¼Œå…¶ä½™çš„é˜»å¡ã€‚å½“ç„¶ï¼Œå¦å¤–çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠŠredis.setæ“ä½œæ”¾åœ¨é˜Ÿåˆ—ä¸­ä½¿å…¶ä¸²è¡ŒåŒ–ï¼Œå¿…é¡»çš„ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œã€‚</p><h2 id="äºŒã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹è¿˜å¾ˆå¿«"><a href="#äºŒã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹è¿˜å¾ˆå¿«" class="headerlink" title="äºŒã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹è¿˜å¾ˆå¿«"></a>äºŒã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹è¿˜å¾ˆå¿«</h2><h3 id="2-1ã€Rediså¾ˆå¿«çš„åŸå› "><a href="#2-1ã€Rediså¾ˆå¿«çš„åŸå› " class="headerlink" title="2.1ã€Rediså¾ˆå¿«çš„åŸå› "></a>2.1ã€Rediså¾ˆå¿«çš„åŸå› </h3><p>1.redisæ˜¯åŸºäºå†…å­˜çš„ï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦éå¸¸å¿«ï¼ˆæ™®é€šå•é€šé“DDR3 1600MHzå†…å­˜çš„ç†è®ºè¯»å†™é€Ÿåº¦åœ¨12.8GB&#x2F;s å®é™…è¯»å†™åœ¨5GB&#x2F;så·¦å³ï¼‰ï¼›</p><p>2.redisæ˜¯å•çº¿ç¨‹çš„ï¼Œçœå»äº†å¾ˆå¤šä¸Šä¸‹æ–‡åˆ‡æ¢çº¿ç¨‹çš„æ—¶é—´ï¼ˆçº¿ç¨‹åˆ‡æ¢ä¼šé¢‘ç¹çš„è®°å½•å¯„å­˜å™¨çš„å­˜å‚¨å’Œç¨‹åºè®¡æ•°å™¨å­˜å‚¨çš„æŒ‡ä»¤å†…å®¹ï¼‰ï¼›</p><p>3.redisä½¿ç”¨å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå¯ä»¥å¤„ç†å¹¶å‘çš„è¿æ¥ã€‚éé˜»å¡IO å†…éƒ¨å®ç°é‡‡ç”¨epollï¼Œé‡‡ç”¨äº†epoll+è‡ªå·±å®ç°çš„ç®€å•çš„äº‹ä»¶æ¡†æ¶ã€‚epollä¸­çš„è¯»ã€å†™ã€å…³é—­ã€è¿æ¥éƒ½è½¬åŒ–æˆäº†äº‹ä»¶ï¼Œç„¶ååˆ©ç”¨epollçš„å¤šè·¯å¤ç”¨ç‰¹æ€§ï¼Œç»ä¸åœ¨ioä¸Šæµªè´¹ä¸€ç‚¹æ—¶é—´ã€‚</p><p>ä¸‹é¢é‡ç‚¹ä»‹ç»å•çº¿ç¨‹è®¾è®¡å’ŒIOå¤šè·¯å¤ç”¨æ ¸å¿ƒè®¾è®¡å¿«çš„åŸå› ã€‚</p><h3 id="2-2ã€ä¸ºä»€ä¹ˆRedisæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"><a href="#2-2ã€ä¸ºä»€ä¹ˆRedisæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ" class="headerlink" title="2.2ã€ä¸ºä»€ä¹ˆRedisæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"></a>2.2ã€ä¸ºä»€ä¹ˆRedisæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</h3><p>å®˜æ–¹è¯´æ˜ä¹‹å‰ï¼Œæˆ‘å…ˆè¯´ä¸€ä¸‹é’ˆå¯¹ç°ä»£è®¡ç®—æœºçš„å·¥ä½œç‰¹ç‚¹ï¼Œå‰äººæ€»ç»“çš„ç¨‹åºè®¾è®¡æ€è·¯ï¼š</p><p><strong>é«˜å¹¶å‘ï¼Œä½è€—æ—¶çš„æƒ…å†µï¼Œå»ºè®®å°‘çº¿ç¨‹ã€‚<br>ä½å¹¶å‘ï¼Œé«˜è€—æ—¶çš„æƒ…å†µï¼šå»ºè®®å¤šçº¿ç¨‹ã€‚<br>é«˜å¹¶å‘é«˜è€—æ—¶ï¼Œè¦åˆ†æä»»åŠ¡ç±»å‹ã€å¢åŠ æ’é˜Ÿã€åŠ å¤§çº¿ç¨‹æ•°ã€‚</strong></p><p>1.å®˜æ–¹ç­”æ¡ˆ</p><p>å› ä¸ºRedisæ˜¯åŸºäºå†…å­˜çš„æ“ä½œï¼ŒCPUä¸æ˜¯Redisçš„ç“¶é¢ˆï¼ŒRedisçš„ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯æœºå™¨å†…å­˜çš„å¤§å°æˆ–è€…ç½‘ç»œå¸¦å®½ã€‚æ—¢ç„¶å•çº¿ç¨‹å®¹æ˜“å®ç°ï¼Œè€Œä¸”CPUä¸ä¼šæˆä¸ºç“¶é¢ˆï¼Œé‚£å°±é¡ºç†æˆç« åœ°é‡‡ç”¨å•çº¿ç¨‹çš„æ–¹æ¡ˆäº†ã€‚</p><p>2.æ€§èƒ½æŒ‡æ ‡</p><p>å…³äºredisçš„æ€§èƒ½ï¼Œå®˜æ–¹ç½‘ç«™ä¹Ÿæœ‰ï¼Œæ™®é€šç¬”è®°æœ¬è½»æ¾å¤„ç†æ¯ç§’å‡ åä¸‡çš„è¯·æ±‚ã€‚</p><p>3.è¯¦ç»†åŸå› </p><p>1)ä¸éœ€è¦å„ç§é”çš„æ€§èƒ½æ¶ˆè€—</p><p>Redisçš„æ•°æ®ç»“æ„å¹¶ä¸å…¨æ˜¯ç®€å•çš„Key-Valueï¼Œè¿˜æœ‰listï¼Œhashç­‰å¤æ‚çš„ç»“æ„ï¼Œè¿™äº›ç»“æ„æœ‰å¯èƒ½ä¼šè¿›è¡Œå¾ˆç»†ç²’åº¦çš„æ“ä½œï¼Œæ¯”å¦‚åœ¨å¾ˆé•¿çš„åˆ—è¡¨åé¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨hashå½“ä¸­æ·»åŠ æˆ–è€…åˆ é™¤</p><p>ä¸€ä¸ªå¯¹è±¡ã€‚è¿™äº›æ“ä½œå¯èƒ½å°±éœ€è¦åŠ éå¸¸å¤šçš„é”ï¼Œå¯¼è‡´çš„ç»“æœæ˜¯åŒæ­¥å¼€é”€å¤§å¤§å¢åŠ ã€‚</p><p>æ€»ä¹‹ï¼Œåœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå°±ä¸ç”¨å»è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”é‡Šæ”¾é”æ“ä½œï¼Œæ²¡æœ‰å› ä¸ºå¯èƒ½å‡ºç°æ­»é”è€Œå¯¼è‡´çš„æ€§èƒ½æ¶ˆè€—ã€‚</p><p>2)å•çº¿ç¨‹å¤šè¿›ç¨‹é›†ç¾¤æ–¹æ¡ˆ</p><p>å•çº¿ç¨‹çš„å¨åŠ›å®é™…ä¸Šéå¸¸å¼ºå¤§ï¼Œæ¯æ ¸å¿ƒæ•ˆç‡ä¹Ÿéå¸¸é«˜ï¼Œå¤šçº¿ç¨‹è‡ªç„¶æ˜¯å¯ä»¥æ¯”å•çº¿ç¨‹æœ‰æ›´é«˜çš„æ€§èƒ½ä¸Šé™ï¼Œä½†æ˜¯åœ¨ä»Šå¤©çš„è®¡ç®—ç¯å¢ƒä¸­ï¼Œå³ä½¿æ˜¯å•æœºå¤šçº¿ç¨‹çš„ä¸Šé™ä¹Ÿå¾€å¾€ä¸èƒ½æ»¡è¶³éœ€è¦äº†ï¼Œéœ€è¦è¿›ä¸€æ­¥æ‘¸ç´¢çš„æ˜¯å¤šæœåŠ¡å™¨é›†ç¾¤åŒ–çš„æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆä¸­å¤šçº¿ç¨‹çš„æŠ€æœ¯ç…§æ ·æ˜¯ç”¨ä¸ä¸Šçš„ã€‚</p><p>æ‰€ä»¥å•çº¿ç¨‹ã€å¤šè¿›ç¨‹çš„é›†ç¾¤ä¸å¤±ä¸ºä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>3)CPUæ¶ˆè€—</p><p>é‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…äº†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼Œä¹Ÿä¸å­˜åœ¨å¤šè¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹å¯¼è‡´çš„åˆ‡æ¢è€Œæ¶ˆè€— CPUã€‚</p><p>ä½†æ˜¯å¦‚æœCPUæˆä¸ºRedisç“¶é¢ˆï¼Œæˆ–è€…ä¸æƒ³è®©æœåŠ¡å™¨å…¶ä»–CUPæ ¸é—²ç½®ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿ</p><p>å¯ä»¥è€ƒè™‘å¤šèµ·å‡ ä¸ªRedisè¿›ç¨‹ï¼ŒRedisæ˜¯key-valueæ•°æ®åº“ï¼Œä¸æ˜¯å…³ç³»æ•°æ®åº“ï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰çº¦æŸã€‚åªè¦å®¢æˆ·ç«¯åˆ†æ¸…å“ªäº›keyæ”¾åœ¨å“ªä¸ªRedisè¿›ç¨‹ä¸Šå°±å¯ä»¥äº†ã€‚</p><p>Rediså•çº¿ç¨‹çš„ä¼˜åŠ£åŠ¿</p><p>å•è¿›ç¨‹å•çº¿ç¨‹ä¼˜åŠ¿ä»£ç æ›´æ¸…æ™°ï¼Œå¤„ç†é€»è¾‘æ›´ç®€å•ä¸ç”¨å»è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”é‡Šæ”¾é”æ“ä½œï¼Œæ²¡æœ‰å› ä¸ºå¯èƒ½å‡ºç°æ­»é”è€Œå¯¼è‡´çš„æ€§èƒ½æ¶ˆè€—ä¸å­˜åœ¨å¤šè¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹å¯¼è‡´çš„åˆ‡æ¢è€Œæ¶ˆè€—CPU</p><p>å•è¿›ç¨‹å•çº¿ç¨‹å¼Šç«¯æ— æ³•å‘æŒ¥å¤šæ ¸CPUæ€§èƒ½ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡åœ¨å•æœºå¼€å¤šä¸ªRediså®ä¾‹æ¥å®Œå–„ï¼›</p><p>IOå¤šè·¯å¤ç”¨æŠ€æœ¯</p><p>redis é‡‡ç”¨ç½‘ç»œIOå¤šè·¯å¤ç”¨æŠ€æœ¯æ¥ä¿è¯åœ¨å¤šè¿æ¥çš„æ—¶å€™ï¼Œ ç³»ç»Ÿçš„é«˜ååé‡ã€‚</p><p>å¤šè·¯-æŒ‡çš„æ˜¯å¤šä¸ªsocketè¿æ¥ï¼Œå¤ç”¨-æŒ‡çš„æ˜¯å¤ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚å¤šè·¯å¤ç”¨ä¸»è¦æœ‰ä¸‰ç§æŠ€æœ¯ï¼šselectï¼Œpollï¼Œepollã€‚epollæ˜¯æœ€æ–°çš„ä¹Ÿæ˜¯ç›®å‰æœ€å¥½çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆnginxä¹Ÿæ˜¯ç”¨çš„epollæœºåˆ¶å®ç°çš„å¤šè·¯å¤ç”¨ï¼‰ã€‚</p><p>è¿™é‡Œâ€œå¤šè·¯â€æŒ‡çš„æ˜¯å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œâ€œå¤ç”¨â€æŒ‡çš„æ˜¯å¤ç”¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚é‡‡ç”¨å¤šè·¯ I&#x2F;O å¤ç”¨æŠ€æœ¯å¯ä»¥è®©å•ä¸ªçº¿ç¨‹é«˜æ•ˆçš„å¤„ç†å¤šä¸ªè¿æ¥è¯·æ±‚(å°½é‡å‡å°‘ç½‘ç»œIOçš„æ—¶é—´æ¶ˆè€—)ï¼Œä¸”Redisåœ¨å†…å­˜ä¸­æ“ä½œæ•°æ®çš„é€Ÿåº¦éå¸¸å¿«(å†…å­˜å†…çš„æ“ä½œä¸ä¼šæˆä¸ºè¿™é‡Œçš„æ€§èƒ½ç“¶é¢ˆ)ï¼Œä¸»è¦ä»¥ä¸Šä¸¤ç‚¹é€ å°±äº†Rediså…·æœ‰å¾ˆé«˜çš„ååé‡ã€‚</p><h3 id="2-3ã€Redisé«˜å¹¶å‘å¿«çš„æ€»ç»“"><a href="#2-3ã€Redisé«˜å¹¶å‘å¿«çš„æ€»ç»“" class="headerlink" title="2.3ã€Redisé«˜å¹¶å‘å¿«çš„æ€»ç»“"></a>2.3ã€Redisé«˜å¹¶å‘å¿«çš„æ€»ç»“</h3><p>1. Redisæ˜¯çº¯å†…å­˜æ•°æ®åº“ï¼Œä¸€èˆ¬éƒ½æ˜¯ç®€å•çš„å­˜å–æ“ä½œï¼Œçº¿ç¨‹å ç”¨çš„æ—¶é—´å¾ˆå¤šï¼Œæ—¶é—´çš„èŠ±è´¹ä¸»è¦é›†ä¸­åœ¨IOä¸Šï¼Œæ‰€ä»¥è¯»å–é€Ÿåº¦å¿«ã€‚</p><p>2. å†è¯´ä¸€ä¸‹IOï¼ŒRedisä½¿ç”¨çš„æ˜¯éé˜»å¡IOï¼ŒIOå¤šè·¯å¤ç”¨ï¼Œä½¿ç”¨äº†å•çº¿ç¨‹æ¥è½®è¯¢æè¿°ç¬¦ï¼Œå°†æ•°æ®åº“çš„å¼€ã€å…³ã€è¯»ã€å†™éƒ½è½¬æ¢æˆäº†äº‹ä»¶ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ‡æ¢æ—¶ä¸Šä¸‹æ–‡çš„åˆ‡æ¢å’Œç«äº‰ã€‚</p><p>3. Redisé‡‡ç”¨äº†å•çº¿ç¨‹çš„æ¨¡å‹ï¼Œä¿è¯äº†æ¯ä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œä¹Ÿå‡å°‘äº†çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰ã€‚</p><p>4. å¦å¤–ï¼Œæ•°æ®ç»“æ„ä¹Ÿå¸®äº†ä¸å°‘å¿™ï¼ŒRediså…¨ç¨‹ä½¿ç”¨hashç»“æ„ï¼Œè¯»å–é€Ÿåº¦å¿«ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå¯¹æ•°æ®å­˜å‚¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¦‚å‹ç¼©è¡¨ï¼Œå¯¹çŸ­æ•°æ®è¿›è¡Œå‹ç¼©å­˜å‚¨ï¼Œå†å¦‚ï¼Œè·³è¡¨ï¼Œä½¿ç”¨æœ‰åºçš„æ•°æ®ç»“æ„åŠ å¿«è¯»å–çš„é€Ÿåº¦ã€‚</p><p>5. è¿˜æœ‰ä¸€ç‚¹ï¼ŒRedisé‡‡ç”¨è‡ªå·±å®ç°çš„äº‹ä»¶åˆ†ç¦»å™¨ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ï¼Œå†…éƒ¨é‡‡ç”¨éé˜»å¡çš„æ‰§è¡Œæ–¹å¼ï¼Œååèƒ½åŠ›æ¯”è¾ƒå¤§ã€‚</p><p>ğŸª¶ä¸Šæ–‡ä¸­çš„æ€è·¯ä¸ä»…ä»…é’ˆå¯¹redisã€mysqlçš„ç»„åˆï¼Œå…¶ä»–ç±»ä¼¼çš„ç¼“å­˜æˆ–è€…åœºæ™¯éƒ½å¯ä»¥å€Ÿé‰´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ä¸æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼˜åŒ–åœ¨4Gç½‘ç»œç¯å¢ƒå·®çš„åœ°åŒºä¸­é¡¹ç›®çš„å“åº”é€Ÿåº¦</title>
      <link href="/post/2021/12/14/28080/"/>
      <url>/post/2021/12/14/28080/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€èƒŒæ™¯ç®€è¿°"><a href="#1ã€èƒŒæ™¯ç®€è¿°" class="headerlink" title="1ã€èƒŒæ™¯ç®€è¿°"></a>1ã€èƒŒæ™¯ç®€è¿°</h2><p>æœ€è¿‘åšäº†ä¸€ä¸ªç½‘çº¢è¡—çš„å•†æˆ·æ”¶é“¶ç³»ç»Ÿï¼šåŒ…å«å°å•†é“ºåœºæ™¯ä¸‹ç”¨æˆ·å¾®ä¿¡æ‰«ç ç‚¹é¤H5ã€å°ç¨‹åºã€å•†å®¶PADç‚¹é¤ã€æ’å·ã€å«å·ã€æ—¶é—´é¢„æµ‹ç­‰ï¼Œå ‚é£Ÿå¤šäººæ‰«æ¡Œç ç‚¹é¤ã€å•†å®¶PADç‚¹é¤ç­‰ã€‚åœ¨å‰æœŸçš„ç°åœºæµ‹è¯•ä¸­å‘ç°è¯¥åœ°åŒºä¸­å›½ç§»åŠ¨ï¼Œä¸­å›½ç”µä¿¡4Gã€5Gç½‘ç»œå¸¦å®½ä½ï¼ŒæŠ–åŠ¨å¤§ã€‚å¶å°”ä¼šå‡ºç°ç”¨æˆ·ç«¯è½¯ä»¶å“åº”é€Ÿåº¦ææ…¢ã€‚</p><h2 id="2ã€å¤§è‡´ç»“æ„"><a href="#2ã€å¤§è‡´ç»“æ„" class="headerlink" title="2ã€å¤§è‡´ç»“æ„"></a>2ã€å¤§è‡´ç»“æ„</h2><p><img src="https://up.eber.vip/Think-Me/img/main/upload/202304112229307.png" alt="é¡¹ç›®ç»“æ„.png"></p><h2 id="3ã€å½“å‰ç­–ç•¥"><a href="#3ã€å½“å‰ç­–ç•¥" class="headerlink" title="3ã€å½“å‰ç­–ç•¥"></a>3ã€å½“å‰ç­–ç•¥</h2><p><strong>ç›®å‰å…¨ç«™æ¥å…¥HTTP&#x2F;2ï¼Œç›®å‰æœåŠ¡å™¨æ”¯æŒçš„æŠ€æœ¯å¦‚ä¸‹ï¼š</strong></p><h4 id="1-ã€å¤šè·¯å¤ç”¨ï¼šä»£æ›¿æ‰HTTP1-xçš„åºåˆ—å’Œé˜»å¡æœºåˆ¶ã€‚åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆã€‚å•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚"><a href="#1-ã€å¤šè·¯å¤ç”¨ï¼šä»£æ›¿æ‰HTTP1-xçš„åºåˆ—å’Œé˜»å¡æœºåˆ¶ã€‚åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆã€‚å•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚" class="headerlink" title="(1)ã€å¤šè·¯å¤ç”¨ï¼šä»£æ›¿æ‰HTTP1.xçš„åºåˆ—å’Œé˜»å¡æœºåˆ¶ã€‚åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆã€‚å•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚"></a>(1)ã€å¤šè·¯å¤ç”¨ï¼šä»£æ›¿æ‰HTTP1.xçš„åºåˆ—å’Œé˜»å¡æœºåˆ¶ã€‚åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆã€‚å•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚</h4><p><img src="https://up.eber.vip/Think-Me/img/main/upload/2663160471.png" alt="chromef12.png"></p><h4 id="2-ã€Server-Pushï¼šHTTP-x2F-2-è§„èŒƒä¸­å¼•å…¥çš„ä¸€ç§æ–°æŠ€æœ¯ï¼Œå³æœåŠ¡ç«¯åœ¨æ²¡æœ‰è¢«å®¢æˆ·ç«¯æ˜ç¡®çš„è¯¢é—®ä¸‹ï¼ŒæŠ¢å…ˆåœ°-â€œæ¨é€â€-ä¸€äº›ç½‘ç«™èµ„æºç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œè¯¥ç‰¹æ€§å¯ä»¥æå¤§çš„æ”¹å–„é¡µé¢è®¿é—®æ•ˆæœã€‚"><a href="#2-ã€Server-Pushï¼šHTTP-x2F-2-è§„èŒƒä¸­å¼•å…¥çš„ä¸€ç§æ–°æŠ€æœ¯ï¼Œå³æœåŠ¡ç«¯åœ¨æ²¡æœ‰è¢«å®¢æˆ·ç«¯æ˜ç¡®çš„è¯¢é—®ä¸‹ï¼ŒæŠ¢å…ˆåœ°-â€œæ¨é€â€-ä¸€äº›ç½‘ç«™èµ„æºç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œè¯¥ç‰¹æ€§å¯ä»¥æå¤§çš„æ”¹å–„é¡µé¢è®¿é—®æ•ˆæœã€‚" class="headerlink" title="(2)ã€Server Pushï¼šHTTP&#x2F;2 è§„èŒƒä¸­å¼•å…¥çš„ä¸€ç§æ–°æŠ€æœ¯ï¼Œå³æœåŠ¡ç«¯åœ¨æ²¡æœ‰è¢«å®¢æˆ·ç«¯æ˜ç¡®çš„è¯¢é—®ä¸‹ï¼ŒæŠ¢å…ˆåœ° â€œæ¨é€â€ ä¸€äº›ç½‘ç«™èµ„æºç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œè¯¥ç‰¹æ€§å¯ä»¥æå¤§çš„æ”¹å–„é¡µé¢è®¿é—®æ•ˆæœã€‚"></a>(2)ã€Server Pushï¼šHTTP&#x2F;2 è§„èŒƒä¸­å¼•å…¥çš„ä¸€ç§æ–°æŠ€æœ¯ï¼Œå³æœåŠ¡ç«¯åœ¨æ²¡æœ‰è¢«å®¢æˆ·ç«¯æ˜ç¡®çš„è¯¢é—®ä¸‹ï¼ŒæŠ¢å…ˆåœ° â€œæ¨é€â€ ä¸€äº›ç½‘ç«™èµ„æºç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œè¯¥ç‰¹æ€§å¯ä»¥æå¤§çš„æ”¹å–„é¡µé¢è®¿é—®æ•ˆæœã€‚</h4><h4 id="3-ã€å¤´éƒ¨å‹ç¼©ï¼šHTTP-x2F-2åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨â€œé¦–éƒ¨è¡¨â€æ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®ï¼å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ï¼Œä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”å‘é€ï¼›é¦–éƒ¨è¡¨åœ¨HTTP-x2F-2çš„è¿æ¥å­˜ç»­æœŸå†…å§‹ç»ˆå­˜åœ¨ï¼Œç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒæ¸è¿›åœ°æ›´æ–°-æ¯ä¸ªæ–°çš„é¦–éƒ¨é”®ï¼å€¼å¯¹è¦ä¹ˆè¢«è¿½åŠ åˆ°å½“å‰è¡¨çš„æœ«å°¾ï¼Œè¦ä¹ˆæ›¿æ¢è¡¨ä¸­ä¹‹å‰çš„å€¼ã€‚"><a href="#3-ã€å¤´éƒ¨å‹ç¼©ï¼šHTTP-x2F-2åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨â€œé¦–éƒ¨è¡¨â€æ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®ï¼å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ï¼Œä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”å‘é€ï¼›é¦–éƒ¨è¡¨åœ¨HTTP-x2F-2çš„è¿æ¥å­˜ç»­æœŸå†…å§‹ç»ˆå­˜åœ¨ï¼Œç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒæ¸è¿›åœ°æ›´æ–°-æ¯ä¸ªæ–°çš„é¦–éƒ¨é”®ï¼å€¼å¯¹è¦ä¹ˆè¢«è¿½åŠ åˆ°å½“å‰è¡¨çš„æœ«å°¾ï¼Œè¦ä¹ˆæ›¿æ¢è¡¨ä¸­ä¹‹å‰çš„å€¼ã€‚" class="headerlink" title="(3)ã€å¤´éƒ¨å‹ç¼©ï¼šHTTP&#x2F;2åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨â€œé¦–éƒ¨è¡¨â€æ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®ï¼å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ï¼Œä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”å‘é€ï¼›é¦–éƒ¨è¡¨åœ¨HTTP&#x2F;2çš„è¿æ¥å­˜ç»­æœŸå†…å§‹ç»ˆå­˜åœ¨ï¼Œç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒæ¸è¿›åœ°æ›´æ–°;æ¯ä¸ªæ–°çš„é¦–éƒ¨é”®ï¼å€¼å¯¹è¦ä¹ˆè¢«è¿½åŠ åˆ°å½“å‰è¡¨çš„æœ«å°¾ï¼Œè¦ä¹ˆæ›¿æ¢è¡¨ä¸­ä¹‹å‰çš„å€¼ã€‚"></a>(3)ã€å¤´éƒ¨å‹ç¼©ï¼šHTTP&#x2F;2åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨â€œé¦–éƒ¨è¡¨â€æ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®ï¼å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ï¼Œä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”å‘é€ï¼›é¦–éƒ¨è¡¨åœ¨HTTP&#x2F;2çš„è¿æ¥å­˜ç»­æœŸå†…å§‹ç»ˆå­˜åœ¨ï¼Œç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒæ¸è¿›åœ°æ›´æ–°;æ¯ä¸ªæ–°çš„é¦–éƒ¨é”®ï¼å€¼å¯¹è¦ä¹ˆè¢«è¿½åŠ åˆ°å½“å‰è¡¨çš„æœ«å°¾ï¼Œè¦ä¹ˆæ›¿æ¢è¡¨ä¸­ä¹‹å‰çš„å€¼ã€‚</h4><h4 id="3-ã€WebPï¼šGoogleæ¨å‡ºçš„ä¸€ç§åŒæ—¶æä¾›äº†æœ‰æŸå‹ç¼©ä¸æ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ã€‚èƒ½æœ€é«˜å°†å›¾ç‰‡å¤§å°ç¼©å‡90-å·¦å³ï¼Œéå¸¸é€‚åˆwebå›¾ç‰‡ä½¿ç”¨ã€‚"><a href="#3-ã€WebPï¼šGoogleæ¨å‡ºçš„ä¸€ç§åŒæ—¶æä¾›äº†æœ‰æŸå‹ç¼©ä¸æ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ã€‚èƒ½æœ€é«˜å°†å›¾ç‰‡å¤§å°ç¼©å‡90-å·¦å³ï¼Œéå¸¸é€‚åˆwebå›¾ç‰‡ä½¿ç”¨ã€‚" class="headerlink" title="(3)ã€WebPï¼šGoogleæ¨å‡ºçš„ä¸€ç§åŒæ—¶æä¾›äº†æœ‰æŸå‹ç¼©ä¸æ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ã€‚èƒ½æœ€é«˜å°†å›¾ç‰‡å¤§å°ç¼©å‡90%å·¦å³ï¼Œéå¸¸é€‚åˆwebå›¾ç‰‡ä½¿ç”¨ã€‚"></a>(3)ã€WebPï¼šGoogleæ¨å‡ºçš„ä¸€ç§åŒæ—¶æä¾›äº†æœ‰æŸå‹ç¼©ä¸æ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ã€‚èƒ½æœ€é«˜å°†å›¾ç‰‡å¤§å°ç¼©å‡90%å·¦å³ï¼Œéå¸¸é€‚åˆwebå›¾ç‰‡ä½¿ç”¨ã€‚</h4><h4 id="4-ã€OCSP-è£…è®¢ç¼“å­˜ï¼šæœåŠ¡å™¨åœ¨-TLS-æ¡æ‰‹æ—¶ä¼šå‘é€è¢«ç¼“å­˜çš„OCSPå“åº”ï¼Œä¾›ç”¨æˆ·éªŒè¯ï¼Œæ— éœ€ç”¨æˆ·å†å‘CAå‘é€æŸ¥è¯¢è¯·æ±‚ã€‚æå¤§åœ°æé«˜äº†-TLS-æ¡æ‰‹æ•ˆç‡ï¼ŒèŠ‚çœäº†ç”¨æˆ·éªŒè¯æ—¶é—´ã€‚"><a href="#4-ã€OCSP-è£…è®¢ç¼“å­˜ï¼šæœåŠ¡å™¨åœ¨-TLS-æ¡æ‰‹æ—¶ä¼šå‘é€è¢«ç¼“å­˜çš„OCSPå“åº”ï¼Œä¾›ç”¨æˆ·éªŒè¯ï¼Œæ— éœ€ç”¨æˆ·å†å‘CAå‘é€æŸ¥è¯¢è¯·æ±‚ã€‚æå¤§åœ°æé«˜äº†-TLS-æ¡æ‰‹æ•ˆç‡ï¼ŒèŠ‚çœäº†ç”¨æˆ·éªŒè¯æ—¶é—´ã€‚" class="headerlink" title="(4)ã€OCSP è£…è®¢ç¼“å­˜ï¼šæœåŠ¡å™¨åœ¨ TLS æ¡æ‰‹æ—¶ä¼šå‘é€è¢«ç¼“å­˜çš„OCSPå“åº”ï¼Œä¾›ç”¨æˆ·éªŒè¯ï¼Œæ— éœ€ç”¨æˆ·å†å‘CAå‘é€æŸ¥è¯¢è¯·æ±‚ã€‚æå¤§åœ°æé«˜äº† TLS æ¡æ‰‹æ•ˆç‡ï¼ŒèŠ‚çœäº†ç”¨æˆ·éªŒè¯æ—¶é—´ã€‚"></a>(4)ã€OCSP è£…è®¢ç¼“å­˜ï¼šæœåŠ¡å™¨åœ¨ TLS æ¡æ‰‹æ—¶ä¼šå‘é€è¢«ç¼“å­˜çš„OCSPå“åº”ï¼Œä¾›ç”¨æˆ·éªŒè¯ï¼Œæ— éœ€ç”¨æˆ·å†å‘CAå‘é€æŸ¥è¯¢è¯·æ±‚ã€‚æå¤§åœ°æé«˜äº† TLS æ¡æ‰‹æ•ˆç‡ï¼ŒèŠ‚çœäº†ç”¨æˆ·éªŒè¯æ—¶é—´ã€‚</h4><h4 id="5-ã€CDNï¼šé‡‡ç”¨ç¬¬ä¸‰æ–¹å‚å•†CDNæœåŠ¡æ¥å¤„ç†é™æ€èµ„æºå’Œé¡µé¢ç¼“å­˜ï¼Œèƒ½åœ¨ç”¨æˆ·è®¿é—®æ—¶é€šè¿‡æœ€è¿‘æœ€ä¼˜çš„èŠ‚ç‚¹å»è¿”å›ç¼“å­˜èµ„æºï¼Œå¤§å¤§çš„ä¼˜åŒ–äº†èµ„æºåœ¨ç½‘ç»œä¼ è¾“ä¸­çš„æ•ˆç‡ã€‚"><a href="#5-ã€CDNï¼šé‡‡ç”¨ç¬¬ä¸‰æ–¹å‚å•†CDNæœåŠ¡æ¥å¤„ç†é™æ€èµ„æºå’Œé¡µé¢ç¼“å­˜ï¼Œèƒ½åœ¨ç”¨æˆ·è®¿é—®æ—¶é€šè¿‡æœ€è¿‘æœ€ä¼˜çš„èŠ‚ç‚¹å»è¿”å›ç¼“å­˜èµ„æºï¼Œå¤§å¤§çš„ä¼˜åŒ–äº†èµ„æºåœ¨ç½‘ç»œä¼ è¾“ä¸­çš„æ•ˆç‡ã€‚" class="headerlink" title="(5)ã€CDNï¼šé‡‡ç”¨ç¬¬ä¸‰æ–¹å‚å•†CDNæœåŠ¡æ¥å¤„ç†é™æ€èµ„æºå’Œé¡µé¢ç¼“å­˜ï¼Œèƒ½åœ¨ç”¨æˆ·è®¿é—®æ—¶é€šè¿‡æœ€è¿‘æœ€ä¼˜çš„èŠ‚ç‚¹å»è¿”å›ç¼“å­˜èµ„æºï¼Œå¤§å¤§çš„ä¼˜åŒ–äº†èµ„æºåœ¨ç½‘ç»œä¼ è¾“ä¸­çš„æ•ˆç‡ã€‚"></a>(5)ã€CDNï¼šé‡‡ç”¨ç¬¬ä¸‰æ–¹å‚å•†CDNæœåŠ¡æ¥å¤„ç†é™æ€èµ„æºå’Œé¡µé¢ç¼“å­˜ï¼Œèƒ½åœ¨ç”¨æˆ·è®¿é—®æ—¶é€šè¿‡æœ€è¿‘æœ€ä¼˜çš„èŠ‚ç‚¹å»è¿”å›ç¼“å­˜èµ„æºï¼Œå¤§å¤§çš„ä¼˜åŒ–äº†èµ„æºåœ¨ç½‘ç»œä¼ è¾“ä¸­çš„æ•ˆç‡ã€‚</h4><h2 id="4ã€ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#4ã€ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="4ã€ä¼˜åŒ–æ–¹æ¡ˆ"></a>4ã€ä¼˜åŒ–æ–¹æ¡ˆ</h2><p>ç†è®ºä¸Šå¦‚ä¸Šæ“ä½œå³å¯æå¤§çš„å¢å¼ºç”¨æˆ·ä½“éªŒï¼Œä½†æ˜¯ä»…ä»…æ˜¯èƒ½æå‡æ­£å¸¸ç½‘ç»œçŠ¶æ€ä¸‹çš„ç”¨æˆ·ä½“éªŒã€‚è€Œé’ˆå¯¹é«˜å»¶è¿Ÿï¼ŒæŠ–åŠ¨å¤§çš„å¼±ç½‘ç»œç¯å¢ƒä»…ä»…åšåˆ°ä¸Šè¿°ç­–ç•¥è¿˜ä¸å¤Ÿã€‚</p><p><strong>é¦–å…ˆæƒ³åˆ°çš„æ˜¯TCPå’ŒUDPä¸¤ç§åè®®çš„ä¼˜ç¼ºç‚¹ï¼š</strong></p><p><strong>TCPï¼šå¯é ã€ç¨³å®šï¼Œä½†æ˜¯å»ºè¿éœ€è¦ç»è¿‡3æ¬¡æ¡æ‰‹ï¼Œç›¸å¯¹ç¹çã€æ•ˆç‡ä½ä¸”å ç”¨ç³»ç»Ÿèµ„æºé«˜ã€‚</strong></p><p><strong>UDPï¼šæ•ˆç‡é«˜ã€å¿«ã€è½»é‡ï¼Œå ç”¨ç³»ç»Ÿèµ„æºè¾ƒå°‘ï¼Œä½†æ˜¯å­˜åœ¨ä¸å¯é ã€æ— åºç­‰ç¼ºç‚¹ã€‚</strong></p><p>åŸºäºTCPå’ŒUDPçš„ä¼˜ç¼ºç‚¹ï¼Œ<strong>Google</strong>åˆ¶å®šäº†ä¸€ç§<strong>åŸºäºUDP</strong>çš„ä½æ—¶å»¶çš„äº’è”ç½‘ä¼ è¾“å±‚åè®®â€”â€“å³<strong>QUIC</strong>ï¼ˆQuick UDP Internet Connectionï¼‰</p><p>åœ¨çœ‹äº†å¤šä¸ªäº’è”ç½‘äº§å“çš„ï¼ˆå¾®åšã€ç½‘æ˜“äº‘ä¿¡ç­‰ï¼‰QUIC åŠ é€ŸæœåŠ¡æ¶æ„ä¸å®è·µæ–‡æ¡£åï¼Œå†³å®šå¯¹ç°æœ‰çš„æµ‹è¯•ç¯å¢ƒæœåŠ¡åšQUICæ”¹é€ å¹¶ç°åœºè¿›è¡Œæµ‹è¯•ã€‚</p><p>ç°æœ‰çš„å¼€æºå®ç°ï¼š<br>1ã€quicheï¼šè¿™ä¸ªæ˜¯ç”¨ Rust åšçš„åº“ï¼Œé€šè¿‡nginxè°ƒç”¨ã€‚ã€ä¸æ˜¯Googleçš„quicheåº“ã€‘<br>2ã€ATSï¼šApache Traffic Server<br>3ã€golangï¼šCaddyï¼›<br>4ã€python+Cï¼Œaioquic<br>5ã€å¾®è½¯msquic</p><p>è€ƒè™‘åˆ°é€šç”¨æ€§å’Œæ€§èƒ½ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†åŸºäºgoçš„Caddy serverè¿›è¡Œæµ‹è¯•ã€‚</p><p>å› ä¸ºcaddyçš„v1ç‰ˆæœ¬å’Œv2ç‰ˆæœ¬çš„é…ç½®æ˜¯ä¸ç›¸é€šçš„ï¼Œæ‰€ä»¥å¾€ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å·²ç»è¿‡æ—¶çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹å®˜ç½‘æ€ä¹ˆè¯´ï¼š</p><p><strong>For example, to configure different options for the servers on port :80 and :443, you would specify two servers blocks:</strong>[<a href="https://caddyserver.com/docs/caddyfile/options#server-options">åŸæ–‡é“¾æ¥</a>]</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">servers :443 &#123;</span><br><span class="line">protocol &#123;</span><br><span class="line">experimental_http3</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">servers :80 &#123;</span><br><span class="line">protocol &#123;</span><br><span class="line">allow_h2c</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°servers :443ä»£ç å—å°±æ˜¯å®ç°HTTP&#x2F;3ï¼ˆHTTP Over QUICï¼‰çš„é…ç½®æ–¹å¼ï¼Œç¤ºä¾‹ä¸­ä¹Ÿæåˆ°äº†ä»¥æ˜æ–‡æ–¹å¼ä¼ è¾“HTTP&#x2F;2ï¼ˆå³H2C â€“â€Cleartext HTTP&#x2F;2â€ or â€œH2 over TCPâ€ï¼‰çš„å¼€å¯æ–¹å¼ã€‚</p><p>å®˜ç½‘å¯¹è¿™ä¸¤ä¸ªä»£ç å—ä¹Ÿæ˜¯æœ‰è¯¦ç»†è¯´æ˜çš„ï¼š</p><p>allow_h2cï¼šenables H2C (â€œCleartext HTTP&#x2F;2â€ or â€œH2 over TCPâ€) support, which will serve HTTP&#x2F;2 over plaintext TCP connections if a client support it. Because this is not implemented by the Go standard library, using H2C is incompatible with most of the other options for this server. Do not enable this only to achieve maximum client compatibility. In practice, very few clients implement H2C, and even fewer require it. This setting applies only to unencrypted HTTP listeners. âš ï¸ Experimental feature; subject to change or removal.<strong>ï¼ˆå¤§æ¦‚æ„æ€å°±æ˜¯H2Cå®é™…ä¸Šä¸ä¼šæœ‰äººå»ç”¨ï¼Œæ­¤åŠŸèƒ½åªæ˜¯ä¸ªå®éªŒæ€§çš„åŠŸèƒ½ï¼Œæœªæ¥å¯èƒ½ä¼šæ›´æ”¹æˆ–è€…åˆ é™¤ã€‚ï¼‰</strong></p><p>experimental_http3ï¼šenables experimental draft HTTP&#x2F;3 support. Note that HTTP&#x2F;3 is not a finished spec and client support is extremely limited. This option will go away in the future. This option is not subject to compatibility promises.<strong>ï¼ˆå¤§æ¦‚æ„æ€æ˜¯HTTP&#x2F;3ä¸æ˜¯å®Œæ•´çš„è§„èŒƒï¼Œå®¢æˆ·ç«¯æ”¯æŒä¹Ÿæœ‰é™ã€‚æ­¤é€‰é¡¹æœªæ¥ä¼šæ¶ˆå¤±ã€‚ä¹Ÿä¸å—åˆ°å…¼å®¹æ€§æ‰¿è¯ºçš„çº¦æŸã€‚ï¼‰</strong></p><p>æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­åªéœ€è¦åœ¨serverså—ä¸‹åˆ›å»ºprotocolå—ï¼Œç„¶åæŒ‡å®šexperimental_http3å³å¯ã€‚<br>å³ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">servers :443 &#123;</span><br><span class="line">protocol &#123;</span><br><span class="line">experimental_http3</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„âš ï¸ caddyçš„é…ç½®æ–‡ä»¶æ˜¯æŒ‰è¡ŒåŒºåˆ†çš„ï¼Œæ˜¯ä¸å¸¦å¥å°¾åˆ†å·çš„  ï¼›</p><p>åœ¨å®ç°HTTP&#x2F;3ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨å¤šç§è®¾å¤‡å’Œè¿è¥å•†å¡è¿›è¡Œäº†å¤šæ¬¡ç°åœºæµ‹è¯•ã€‚åŸæœ¬åœ¨ç°åœºé‡åˆ°å¼±ç½‘æƒ…å†µä¸‹éœ€è¦7så·¦å³æ‰èƒ½Finishçš„é¡µé¢ç°åœ¨ä»…ä»…éœ€è¦2sã€‚æå¤§çš„æå‡äº†åŠ è½½é€Ÿåº¦ï¼</p><p>å¾—åˆ°æµ‹è¯•ç»“è®ºåï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯çº¿ä¸Šç”Ÿäº§ç¯å¢ƒçš„æ”¹é€ ã€‚è¿™æ—¶ä¸€ä¸ªæ–°çš„é—®é¢˜æ‘†åœ¨æˆ‘ä»¬é¢å‰ï¼š<strong>è…¾è®¯äº‘CDNä¸æ”¯æŒHTTP&#x2F;3ã€‚</strong></p><p>è¿™é‡Œæˆ‘ä»¬è¿›è¡Œäº†è®¨è®ºå¾—å‡ºä¸¤ç§æ–¹æ¡ˆï¼š<br>1ã€è‡ªå»ºä¸€ä¸ªå°å‹çš„CDNç½‘ç»œä¾›è¿™ä¸ªæœåŠ¡ä½¿ç”¨ã€‚<br>2ã€ä½¿ç”¨æ”¯æŒHTTP&#x2F;3çš„CDNå‚å®¶ã€‚</p><p>ç¬¬ä¸€ä¸ªæˆæœ¬å°±æ¯”è¾ƒé«˜äº†ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬å°±é€‰æ‹©äº†ç¬¬äºŒä¸ªæ–¹æ¡ˆï¼ŒæŠŠè¿™ä¸ªæœåŠ¡æ¥å…¥åˆ°äº†æ”¯æŒHTTP&#x2F;3åè®®çš„CDNå‚å®¶ã€‚è¿™é‡Œå°±ä¸åšæ¨èäº†ï¼Œå¤§å®¶è¦å–„ç”¨æœç´¢å¼•æ“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP3 </tag>
            
            <tag> QUIC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxçš„åŠ¨é™æ€gzipå‹ç¼©é…ç½®åŠå‚æ•°è¯¦è§£</title>
      <link href="/post/2021/12/05/49759/"/>
      <url>/post/2021/12/05/49759/</url>
      
        <content type="html"><![CDATA[<h2 id="gzipçš„ä¸¤ç§å®ç°æ–¹å¼ã€‚"><a href="#gzipçš„ä¸¤ç§å®ç°æ–¹å¼ã€‚" class="headerlink" title="gzipçš„ä¸¤ç§å®ç°æ–¹å¼ã€‚"></a>gzipçš„ä¸¤ç§å®ç°æ–¹å¼ã€‚</h2><h3 id="1ã€åŠ¨æ€gzipå‹ç¼©çš„å®ç°ã€‚"><a href="#1ã€åŠ¨æ€gzipå‹ç¼©çš„å®ç°ã€‚" class="headerlink" title="1ã€åŠ¨æ€gzipå‹ç¼©çš„å®ç°ã€‚"></a>1ã€åŠ¨æ€gzipå‹ç¼©çš„å®ç°ã€‚</h3><p>å½“å‰ç«¯Vueä½¿ç”¨æ™®é€šçš„ç¼–è¯‘æ‰“åŒ…çš„æ–¹å¼æ„å»ºå‡ºindex.html,xxx.js,xxx.cssç­‰æ–‡ä»¶åï¼Œå¯ä»¥ç›´æ¥æ”¾åˆ°nginxçš„è™šæ‹Ÿä¸»æœºæ ¹ç›®å½•ä¸‹å³å¯é€šè¿‡ç»‘å®šçš„åŸŸåå»è®¿é—®ã€‚è¿™æ—¶å¦‚æœæƒ³å¼€å¯gzipå‹ç¼©åˆ™æŒ‰ç…§å¦‚ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gzip on; <span class="comment"># æ‰“å¼€gzip</span></span><br><span class="line">gzip_buffers 16 8k; <span class="comment"># ç¼“å†²åŒºæ•°é‡å’Œå¤§å° ï¼ˆæŒ‰ç…§å†…å­˜é¡µå¤§å°ä»¥8Kä¸ºå•ä½ç”³è¯·16å€çš„å†…å­˜ç©ºé—´ï¼‰</span></span><br><span class="line">gzip_comp_level 6; <span class="comment"># å‹ç¼©çº§åˆ«1-9çº§åˆ«è¶Šå¤§è¶Šåƒæ€§èƒ½ï¼Œå‹ç¼©æ¯”è¶Šé«˜ï¼Œè§†å®é™…é…ç½®è®¾ç½®</span></span><br><span class="line">gzip_http_version 1.1; <span class="comment"># ç”¨äºè¯†åˆ«httpåè®®çš„ç‰ˆæœ¬ï¼Œæ—©æœŸçš„æµè§ˆå™¨ä¸æ”¯æŒgzipå‹ç¼©ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°ä¹±ç ï¼Œæ‰€ä»¥ä¸ºäº†æ”¯æŒå‰æœŸç‰ˆæœ¬åŠ äº†æ­¤é€‰é¡¹ã€‚é»˜è®¤åœ¨http/1.0çš„åè®®ä¸‹ä¸å¼€å¯gzipå‹ç¼©ã€‚</span></span><br><span class="line">gzip_min_length 256; <span class="comment"># æœ€å°è§¦å‘å€¼,ä»¥Kä¸ºå•ä½,å½“å€¼ä¸º0æ—¶ï¼Œæ‰€æœ‰é¡µé¢éƒ½è¿›è¡Œå‹ç¼©ã€‚</span></span><br><span class="line">gzip_proxied any; <span class="comment"># Nginxåšä¸ºåå‘ä»£ç†çš„æ—¶å€™å¯ç”¨ï¼šoff â€“ å…³é—­æ‰€æœ‰çš„ä»£ç†ç»“æœæ•°æ®å‹ç¼©ï¼›expired â€“ å¦‚æœheaderä¸­åŒ…å«â€Expiresâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›no-cache â€“ å¦‚æœheaderä¸­åŒ…å«â€Cache-Control:no-cacheâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›no-store â€“ å¦‚æœheaderä¸­åŒ…å«â€Cache-Control:no-storeâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›private â€“ å¦‚æœheaderä¸­åŒ…å«â€Cache-Control:privateâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›no_last_modified â€“ å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderä¸­åŒ…å«â€Last_Modifiedâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›no_etag â€“ å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderä¸­åŒ…å«â€œETagâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›auth â€“ å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderä¸­åŒ…å«â€œAuthorizationâ€å¤´ä¿¡æ¯ï¼Œå¯ç”¨å‹ç¼©ï¼›any â€“ æ— æ¡ä»¶å‹ç¼©æ‰€æœ‰ç»“æœæ•°æ®</span></span><br><span class="line">gzip_vary on; <span class="comment"># å¢åŠ å“åº”å¤´â€Vary: Accept-Encodingâ€</span></span><br><span class="line">gzip_types</span><br><span class="line">  text/xml application/xml application/atom+xml application/rss+xml application/xhtml+xml image/svg+xml</span><br><span class="line">  text/javascript application/javascript application/x-javascript</span><br><span class="line">  text/x-json application/json application/x-web-app-manifest+json</span><br><span class="line">  text/css text/plain text/x-component</span><br><span class="line">  font/opentype application/x-font-ttf application/vnd.ms-fontobject</span><br><span class="line">  image/x-icon; <span class="comment"># è®¾ç½®éœ€è¦å‹ç¼©çš„MIMEç±»å‹,å¦‚æœä¸åœ¨è®¾ç½®ç±»å‹èŒƒå›´å†…çš„è¯·æ±‚ä¸è¿›è¡Œå‹ç¼©ã€‚æ¨èç›´æ¥ä½¿ç”¨æˆ‘è¿™é‡Œå®šä¹‰çš„è¿™äº›ç±»å‹ã€‚</span></span><br><span class="line">gzip_disable <span class="string">&quot;MSIE [1-6]\.(?!.*SV1)&quot;</span>; <span class="comment"># é€šè¿‡è¡¨è¾¾å¼ï¼Œè¡¨æ˜å“ªäº›UAå¤´ä¸ä½¿ç”¨gzipå‹ç¼©</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆä¹‹åï¼Œç›´æ¥æ‰§è¡Œ<code>nginx -s reload</code> å³å¯ç”Ÿæ•ˆã€‚<br><img src="https://up.eber.vip/Think-Me/img/main/upload/1346039141.webp" alt="00f455cf0cd54bd384211ff658d22fbb.png"><br>æµè§ˆå™¨æ§åˆ¶å°æŠŠContent-Encodingæ˜¾ç¤ºæ‰“å¼€å³å¯æŸ¥çœ‹åˆ°æœ‰gzipå‹ç¼©åœ¨ç”Ÿæ•ˆã€‚</p><hr><h3 id="2ã€é™æ€gzipå‹ç¼©çš„å®ç°"><a href="#2ã€é™æ€gzipå‹ç¼©çš„å®ç°" class="headerlink" title="2ã€é™æ€gzipå‹ç¼©çš„å®ç°"></a>2ã€é™æ€gzipå‹ç¼©çš„å®ç°</h3><p>æ–¹æ³•1ä¸­çš„åŠ¨æ€å‹ç¼©æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼šå®¢æˆ·ç«¯æ¯æ¬¡è¿‡æ¥è¯·æ±‚æ—¶æœåŠ¡ç«¯éƒ½éœ€è¦è¿›è¡Œå‹ç¼©ï¼Œè€Œæ¯æ¬¡éƒ½æ˜¯æ¥å¯¹è¿™äº›é™æ€èµ„æºè¿›è¡Œå‹ç¼©ï¼Œå°±æœ‰ç‚¹èµ„æºæµªè´¹çš„æ„Ÿè§‰ã€‚æˆ‘ä»¬è‡ªç„¶è€Œç„¶çš„å°±ä¼šæƒ³åˆ°èƒ½ä¸èƒ½æŠŠè¿™äº›é™æ€èµ„æºæå‰å‹ç¼©æˆgzåŒ…ï¼Œè¿™æ ·å°±ä¸éœ€è¦æœåŠ¡ç«¯å»é‡å¤åšç€ç›¸åŒçš„å‹ç¼©æŒ‡ä»¤ã€‚<br>å½“ç„¶äº†ï¼Œè¿™ä¸ªéœ€è¦å‰ç«¯äººå‘˜çš„é…åˆã€‚</p><p>é¦–å…ˆéœ€è¦åœ¨å‰ç«¯å®‰è£…å‹ç¼©æ’ä»¶ï¼šcompression-webpack-pluginç„¶ååœ¨vue.config.jsä¸­å¢åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new CompressionPlugin(&#123;</span><br><span class="line">        test: /\.(js|css)(\?.*)?$/i, // å“ªäº›æ–‡ä»¶è¦å‹ç¼©</span><br><span class="line">        filename: &#x27;[path][base].gz[query]&#x27;, // å‹ç¼©åçš„æ–‡ä»¶å</span><br><span class="line">        algorithm: &#x27;gzip&#x27;, // ä½¿ç”¨gzipå‹ç¼©</span><br><span class="line">        threshold: 10240, //è¶…è¿‡10Kçš„æ–‡ä»¶æ‰ä¼šå‹ç¼©</span><br><span class="line">        minRatio: 0.8, // å‹ç¼©ç‡ å–å€¼è¦&lt;1.0</span><br><span class="line">        deleteOriginalAssets: true // åˆ é™¤æœªå‹ç¼©çš„æ–‡ä»¶ï¼Œè°¨æ…è®¾ç½®ï¼Œå¦‚æœå¸Œæœ›æä¾›égzipçš„èµ„æºï¼Œå¯ä¸è®¾ç½®æˆ–è€…è®¾ç½®ä¸ºfalse</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…å®Œä¹‹ååŒæ ·çš„æ­¥éª¤ä¸Šä¼ åˆ°nginxçš„è™šæ‹Ÿä¸»æœºæ ¹ç›®å½•ï¼Œç„¶ånginxéœ€è¦ä¸€ä¸ªæœ‰http_gzip_static_moduleæ¨¡å—ã€psï¼šè¿™é‡Œæ¨èä½¿ç”¨æ˜¥å“¥çš„openrestyï¼Œè™½ç„¶æˆ‘ä»¬ä¸æ˜¯å·¨äººï¼Œä½†æ˜¯æˆ‘ä»¬è¦å­¦ä¼šç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‘æœ‰äº†æ¨¡å—ä¹‹åéœ€è¦è®¾ç½®gzip_static on;æ‰å¯ä»¥æ­£å¸¸è§£æé™æ€gzèµ„æºã€‚<br>æ³¨ï¼šgzip_static on;å¯ä»¥è®¾ç½®åˆ°httpã€serveræˆ–è€…locationä¸­ã€‚</p><hr><h3 id="3ã€åå‘ä»£ç†åˆ°gzé™æ€å‹ç¼©èµ„æºçš„å¤„ç†"><a href="#3ã€åå‘ä»£ç†åˆ°gzé™æ€å‹ç¼©èµ„æºçš„å¤„ç†" class="headerlink" title="3ã€åå‘ä»£ç†åˆ°gzé™æ€å‹ç¼©èµ„æºçš„å¤„ç†"></a>3ã€åå‘ä»£ç†åˆ°gzé™æ€å‹ç¼©èµ„æºçš„å¤„ç†</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬çš„å‰ç«¯èµ„æºå¹¶ä¸æ˜¯ç›´æ¥åœ¨æœ€å¤–å±‚çš„webæœåŠ¡å™¨ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æœ€å¤–å±‚çš„webæœåŠ¡å™¨åä»£åˆ°å†…ç½‘çš„æŸä¸ªæœåŠ¡ä¸Šã€‚ä¾‹å¦‚ä¸‹é¢è¿™ç§ç®€å•çš„åä»£ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line">Client((Client))</span><br><span class="line">NGINX[ç½‘å…³NGINX]</span><br><span class="line">backed[åº”ç”¨NGINX/TOMCATç­‰]</span><br><span class="line">Client--&gt;|è®¿é—®|NGINX </span><br><span class="line">NGINX--&gt;|åä»£|backed</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å¦‚æœæ²¡æœ‰åšé¢å¤–å¤„ç†çš„è¯gzipå‹ç¼©çš„èµ„æºè¯·æ±‚å°†ä¼š404ï¼Œæˆ‘ä»¬éœ€è¦åšä»¥ä¸‹å¤„ç†å³å¯è§£å†³è¯¥é—®é¢˜ã€‚</p><p>åˆ†æï¼šå› ä¸ºé™æ€å‹ç¼©åå®é™…çš„èµ„æºä¸ºgzåŒ…è€Œéjsç­‰åŸæ–‡ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è¯·æ±‚xxx.jså°†ä¼šæŠ¥404ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„åº”è¯¥æ˜¯é‡å†™è¯·æ±‚ä¸ºgzã€‚</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> /<span class="variable">$1</span>.gz <span class="literal">break</span>; <span class="comment"># ä½¿ç”¨rewriteå°†è¯·æ±‚é‡å†™ä¸º.gzçš„è¯·æ±‚</span></span><br></pre></td></tr></table></figure><p>å†åˆ†æï¼šå¦‚ä¸Šæ“ä½œåï¼Œç¡®å®æ˜¯èƒ½åœ¨ã€åº”ç”¨NGINX&#x2F;TOMCATç­‰ã€‘å®šä½åˆ°gzæ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•è§£æè¯¥èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å£°æ˜ä¸€ä¸‹èµ„æºçš„Content-Encodingï¼Œè¿™æ ·å†…å±‚çš„webæœåŠ¡å™¨å°±èƒ½æ­£ç¡®çš„è§£æåˆ°è¯¥èµ„æºã€‚</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">add_header</span> Content-Encoding gzip;</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹jså’Œcssåä»£é™æ€å‹ç¼©èµ„æºçš„å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> <span class="regexp">~ .*\.(js|css)?$</span> &#123;</span><br><span class="line">  <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> /<span class="variable">$1</span>.gz <span class="literal">break</span>;</span><br><span class="line">  <span class="attribute">add_header</span> Content-Encoding gzip;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.0.10.35:9001;</span><br><span class="line">  <span class="attribute">include</span> proxy.conf; <span class="comment"># è¿™ä¸ªæ˜¯æˆ‘å®šä¹‰çš„å…¬å…±proxy headerå¤„ç†</span></span><br><span class="line">  <span class="attribute">expires</span> <span class="number">7d</span>;</span><br><span class="line">  <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> gzip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç£ç›˜æ–‡ä»¶ç³»ç»Ÿ---inode</title>
      <link href="/post/2021/11/20/57183/"/>
      <url>/post/2021/11/20/57183/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€ç†è§£inodeï¼Œé¦–å…ˆè¦äº†è§£æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸Šçš„å‚¨å­˜è§„åˆ™ã€‚"><a href="#1ã€ç†è§£inodeï¼Œé¦–å…ˆè¦äº†è§£æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸Šçš„å‚¨å­˜è§„åˆ™ã€‚" class="headerlink" title="1ã€ç†è§£inodeï¼Œé¦–å…ˆè¦äº†è§£æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸Šçš„å‚¨å­˜è§„åˆ™ã€‚"></a>1ã€ç†è§£inodeï¼Œé¦–å…ˆè¦äº†è§£æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸Šçš„å‚¨å­˜è§„åˆ™ã€‚</h3><p>æ–‡ä»¶å‚¨å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œç¡¬ç›˜çš„æœ€å°å­˜å‚¨å•ä½å«åšâ€æ‰‡åŒºâ€ï¼ˆSectorï¼‰ã€‚æ¯ä¸ªæ‰‡åŒºå‚¨å­˜512å­—èŠ‚ï¼ˆç›¸å½“äº0.5KBï¼‰ã€‚</p><p>æ“ä½œç³»ç»Ÿè¯»å–ç¡¬ç›˜çš„æ—¶å€™ï¼Œä¸ä¼šä¸€ä¸ªä¸ªæ‰‡åŒºåœ°è¯»å–ï¼Œè¿™æ ·æ•ˆç‡å¤ªä½ï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§è¿ç»­è¯»å–å¤šä¸ªæ‰‡åŒºï¼Œå³ä¸€æ¬¡æ€§è¯»å–ä¸€ä¸ªâ€å—â€ï¼ˆblockï¼‰ã€‚è¿™ç§ç”±å¤šä¸ªæ‰‡åŒºç»„æˆçš„â€å—â€ï¼Œæ˜¯æ–‡ä»¶å­˜å–çš„æœ€å°å•ä½ã€‚â€å—â€çš„å¤§å°ï¼Œæœ€å¸¸è§çš„æ˜¯4KBï¼Œå³è¿ç»­å…«ä¸ª sectorç»„æˆä¸€ä¸ª blockã€‚</p><p>æ–‡ä»¶æ•°æ®éƒ½å‚¨å­˜åœ¨â€å—â€ä¸­ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªåœ°æ–¹å‚¨å­˜æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶çš„åˆ›å»ºè€…ã€æ–‡ä»¶çš„åˆ›å»ºæ—¥æœŸã€æ–‡ä»¶çš„å¤§å°ç­‰ç­‰ã€‚è¿™ç§å‚¨å­˜æ–‡ä»¶å…ƒä¿¡æ¯çš„åŒºåŸŸå°±å«åšinodeï¼Œä¸­æ–‡è¯‘åä¸ºâ€ç´¢å¼•èŠ‚ç‚¹â€ã€‚</p><h3 id="2ã€äº†è§£inodeçš„å†…å®¹"><a href="#2ã€äº†è§£inodeçš„å†…å®¹" class="headerlink" title="2ã€äº†è§£inodeçš„å†…å®¹"></a>2ã€äº†è§£inodeçš„å†…å®¹</h3><p>inodeåŒ…å«æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼Œå…·ä½“æ¥è¯´æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><p>* æ–‡ä»¶çš„å­—èŠ‚æ•°</p><p>* æ–‡ä»¶æ‹¥æœ‰è€…çš„User ID</p><p>* æ–‡ä»¶çš„Group ID</p><p>* æ–‡ä»¶çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™</p><p>* æ–‡ä»¶çš„æ—¶é—´æˆ³ï¼Œå…±æœ‰ä¸‰ä¸ªï¼šctimeæŒ‡inodeåˆ›å»ºæ—¶é—´ï¼ŒmtimeæŒ‡æ–‡ä»¶å†…å®¹ä¸Šä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼ŒatimeæŒ‡æ–‡ä»¶æœ€åä¸€æ¬¡è®¿é—®çš„æ—¶é—´ã€‚</p><p>* é“¾æ¥æ•°ï¼Œå³æœ‰å¤šå°‘æ–‡ä»¶åæŒ‡å‘è¿™ä¸ªinode</p><p>* æ–‡ä»¶æ•°æ®blockçš„ä½ç½®</p><p>å¯ä»¥ç”¨statå‘½ä»¤ï¼ŒæŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„inodeä¿¡æ¯ï¼š</p><p>stat example.txt</p><p>æ€»ä¹‹ï¼Œé™¤äº†æ–‡ä»¶åä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼Œéƒ½å­˜åœ¨inodeä¹‹ä¸­ã€‚è‡³äºä¸ºä»€ä¹ˆæ²¡æœ‰æ–‡ä»¶åï¼Œä¸‹æ–‡ä¼šæœ‰è¯¦ç»†è§£é‡Šã€‚</p><h3 id="3ã€å¸¸è§„æ–‡ä»¶ç³»ç»Ÿä¸­inodeçš„å¤§å°"><a href="#3ã€å¸¸è§„æ–‡ä»¶ç³»ç»Ÿä¸­inodeçš„å¤§å°" class="headerlink" title="3ã€å¸¸è§„æ–‡ä»¶ç³»ç»Ÿä¸­inodeçš„å¤§å°"></a>3ã€å¸¸è§„æ–‡ä»¶ç³»ç»Ÿä¸­inodeçš„å¤§å°</h3><p>inodeä¹Ÿä¼šæ¶ˆè€—ç¡¬ç›˜ç©ºé—´ï¼Œæ‰€ä»¥ç¡¬ç›˜æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿè‡ªåŠ¨å°†ç¡¬ç›˜åˆ†æˆä¸¤ä¸ªåŒºåŸŸã€‚ä¸€ä¸ªæ˜¯æ•°æ®åŒºï¼Œå­˜æ”¾æ–‡ä»¶æ•°æ®ï¼›å¦ä¸€ä¸ªæ˜¯inodeåŒºï¼ˆinode tableï¼‰ï¼Œå­˜æ”¾inodeæ‰€åŒ…å«çš„ä¿¡æ¯ã€‚</p><p>æ¯ä¸ªinodeèŠ‚ç‚¹çš„å¤§å°ï¼Œä¸€èˆ¬æ˜¯128å­—èŠ‚æˆ–256å­—èŠ‚ã€‚inodeèŠ‚ç‚¹çš„æ€»æ•°ï¼Œåœ¨æ ¼å¼åŒ–æ—¶å°±ç»™å®šï¼Œä¸€èˆ¬æ˜¯æ¯1KBæˆ–æ¯2KBå°±è®¾ç½®ä¸€ä¸ªinodeã€‚å‡å®šåœ¨ä¸€å—1GBçš„ç¡¬ç›˜ä¸­ï¼Œæ¯ä¸ªinodeèŠ‚ç‚¹çš„å¤§å°ä¸º128å­—èŠ‚ï¼Œæ¯1KBå°±è®¾ç½®ä¸€ä¸ªinodeï¼Œé‚£ä¹ˆå°±æœ‰1048576ä¸ªinodeï¼Œinode tableçš„å¤§å°å°±ä¼šè¾¾åˆ°128MBï¼Œå æ•´å—ç¡¬ç›˜çš„12.8%ã€‚</p><p>æŸ¥çœ‹æ¯ä¸ªç¡¬ç›˜åˆ†åŒºçš„inodeæ€»æ•°å’Œå·²ç»ä½¿ç”¨çš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨dfå‘½ä»¤ã€‚</p><p>df -i</p><p>æŸ¥çœ‹æ¯ä¸ªinodeèŠ‚ç‚¹çš„å¤§å°ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><p>sudo dumpe2fs -h &#x2F;dev&#x2F;hda | grep â€œInode sizeâ€</p><p>ç”±äºæ¯ä¸ªæ–‡ä»¶éƒ½å¿…é¡»æœ‰ä¸€ä¸ªinodeï¼Œå› æ­¤æœ‰å¯èƒ½å‘ç”Ÿinodeå·²ç»ç”¨å…‰ï¼Œä½†æ˜¯ç¡¬ç›˜è¿˜æœªå­˜æ»¡çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œå°±æ— æ³•åœ¨ç¡¬ç›˜ä¸Šåˆ›å»ºæ–°æ–‡ä»¶ã€‚</p><h3 id="4ã€inodeå·ç "><a href="#4ã€inodeå·ç " class="headerlink" title="4ã€inodeå·ç "></a>4ã€inodeå·ç </h3><p>æ¯ä¸ªinodeéƒ½æœ‰ä¸€ä¸ªå·ç ï¼Œæ“ä½œç³»ç»Ÿç”¨inodeå·ç æ¥è¯†åˆ«ä¸åŒçš„æ–‡ä»¶ã€‚</p><p>è¿™é‡Œå€¼å¾—é‡å¤ä¸€éï¼ŒUnix&#x2F;Linuxç³»ç»Ÿå†…éƒ¨ä¸ä½¿ç”¨æ–‡ä»¶åï¼Œè€Œä½¿ç”¨inodeå·ç æ¥è¯†åˆ«æ–‡ä»¶ã€‚å¯¹äºç³»ç»Ÿæ¥è¯´ï¼Œæ–‡ä»¶ååªæ˜¯inodeå·ç ä¾¿äºè¯†åˆ«çš„åˆ«ç§°æˆ–è€…ç»°å·ã€‚è¡¨é¢ä¸Šï¼Œç”¨æˆ·é€šè¿‡æ–‡ä»¶åï¼Œæ‰“å¼€æ–‡ä»¶ã€‚å®é™…ä¸Šï¼Œç³»ç»Ÿå†…éƒ¨è¿™ä¸ªè¿‡ç¨‹åˆ†æˆä¸‰æ­¥ï¼šé¦–å…ˆï¼Œç³»ç»Ÿæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶åå¯¹åº”çš„inodeå·ç ï¼›å…¶æ¬¡ï¼Œé€šè¿‡inodeå·ç ï¼Œè·å–inodeä¿¡æ¯ï¼›æœ€åï¼Œæ ¹æ®inodeä¿¡æ¯ï¼Œæ‰¾åˆ°æ–‡ä»¶æ•°æ®æ‰€åœ¨çš„blockï¼Œè¯»å‡ºæ•°æ®ã€‚</p><p>ä½¿ç”¨ls -iå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶åå¯¹åº”çš„inodeå·ç ï¼š</p><p>ls -i example.txt</p><h3 id="5ã€ç›®å½•æ–‡ä»¶"><a href="#5ã€ç›®å½•æ–‡ä»¶" class="headerlink" title="5ã€ç›®å½•æ–‡ä»¶"></a>5ã€ç›®å½•æ–‡ä»¶</h3><p>Unix&#x2F;Linuxç³»ç»Ÿä¸­ï¼Œç›®å½•ï¼ˆdirectoryï¼‰ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ã€‚æ‰“å¼€ç›®å½•ï¼Œå®é™…ä¸Šå°±æ˜¯æ‰“å¼€ç›®å½•æ–‡ä»¶ã€‚</p><p>ç›®å½•æ–‡ä»¶çš„ç»“æ„éå¸¸ç®€å•ï¼Œå°±æ˜¯ä¸€ç³»åˆ—ç›®å½•é¡¹ï¼ˆdirentï¼‰çš„åˆ—è¡¨ã€‚æ¯ä¸ªç›®å½•é¡¹ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ‰€åŒ…å«æ–‡ä»¶çš„æ–‡ä»¶åï¼Œä»¥åŠè¯¥æ–‡ä»¶åå¯¹åº”çš„inodeå·ç ã€‚</p><p>lså‘½ä»¤åªåˆ—å‡ºç›®å½•æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡ä»¶åï¼š</p><p>ls &#x2F;etc</p><p>ls -iå‘½ä»¤åˆ—å‡ºæ•´ä¸ªç›®å½•æ–‡ä»¶ï¼Œå³æ–‡ä»¶åå’Œinodeå·ç ï¼š</p><p>ls -i &#x2F;etc</p><p>å¦‚æœè¦æŸ¥çœ‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå°±å¿…é¡»æ ¹æ®inodeå·ç ï¼Œè®¿é—®inodeèŠ‚ç‚¹ï¼Œè¯»å–ä¿¡æ¯ã€‚ls -lå‘½ä»¤åˆ—å‡ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>ls -l &#x2F;etc</p><h3 id="6ã€ç¡¬é“¾æ¥"><a href="#6ã€ç¡¬é“¾æ¥" class="headerlink" title="6ã€ç¡¬é“¾æ¥"></a>6ã€ç¡¬é“¾æ¥</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶åå’Œinodeå·ç æ˜¯â€ä¸€ä¸€å¯¹åº”â€å…³ç³»ï¼Œæ¯ä¸ªinodeå·ç å¯¹åº”ä¸€ä¸ªæ–‡ä»¶åã€‚ä½†æ˜¯ï¼ŒUnix&#x2F;Linuxç³»ç»Ÿå…è®¸ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªinodeå·ç ã€‚è¿™æ„å‘³ç€ï¼Œå¯ä»¥ç”¨ä¸åŒçš„æ–‡ä»¶åè®¿é—®åŒæ ·çš„å†…å®¹ï¼›å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œä¼šå½±å“åˆ°æ‰€æœ‰æ–‡ä»¶åï¼›ä½†æ˜¯ï¼Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶åï¼Œä¸å½±å“å¦ä¸€ä¸ªæ–‡ä»¶åçš„è®¿é—®ã€‚è¿™ç§æƒ…å†µå°±è¢«ç§°ä¸ºâ€ç¡¬é“¾æ¥â€ï¼ˆhard linkï¼‰ã€‚</p><p>lnå‘½ä»¤å¯ä»¥åˆ›å»ºç¡¬é“¾æ¥ï¼š</p><p>ln æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</p><p>è¿è¡Œä¸Šé¢è¿™æ¡å‘½ä»¤ä»¥åï¼Œæºæ–‡ä»¶ä¸ç›®æ ‡æ–‡ä»¶çš„inodeå·ç ç›¸åŒï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªinodeã€‚inodeä¿¡æ¯ä¸­æœ‰ä¸€é¡¹å«åšâ€é“¾æ¥æ•°â€ï¼Œè®°å½•æŒ‡å‘è¯¥inodeçš„æ–‡ä»¶åæ€»æ•°ï¼Œè¿™æ—¶å°±ä¼šå¢åŠ 1ã€‚åè¿‡æ¥ï¼Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶åï¼Œå°±ä¼šä½¿å¾—inodeèŠ‚ç‚¹ä¸­çš„â€é“¾æ¥æ•°â€å‡1ã€‚å½“è¿™ä¸ªå€¼å‡åˆ°0ï¼Œè¡¨æ˜æ²¡æœ‰æ–‡ä»¶åæŒ‡å‘è¿™ä¸ªinodeï¼Œç³»ç»Ÿå°±ä¼šå›æ”¶è¿™ä¸ªinodeå·ç ï¼Œä»¥åŠå…¶æ‰€å¯¹åº”blockåŒºåŸŸã€‚</p><p>è¿™é‡Œé¡ºä¾¿è¯´ä¸€ä¸‹ç›®å½•æ–‡ä»¶çš„â€é“¾æ¥æ•°â€ã€‚åˆ›å»ºç›®å½•æ—¶ï¼Œé»˜è®¤ä¼šç”Ÿæˆä¸¤ä¸ªç›®å½•é¡¹ï¼šâ€.â€å’Œâ€..â€ã€‚å‰è€…çš„inodeå·ç å°±æ˜¯å½“å‰ç›®å½•çš„inodeå·ç ï¼Œç­‰åŒäºå½“å‰ç›®å½•çš„â€ç¡¬é“¾æ¥â€ï¼›åè€…çš„inodeå·ç å°±æ˜¯å½“å‰ç›®å½•çš„çˆ¶ç›®å½•çš„inodeå·ç ï¼Œç­‰åŒäºçˆ¶ç›®å½•çš„â€ç¡¬é“¾æ¥â€ã€‚æ‰€ä»¥ï¼Œä»»ä½•ä¸€ä¸ªç›®å½•çš„â€ç¡¬é“¾æ¥â€æ€»æ•°ï¼Œæ€»æ˜¯ç­‰äº2åŠ ä¸Šå®ƒçš„å­ç›®å½•æ€»æ•°ï¼ˆå«éšè—ç›®å½•ï¼‰,è¿™é‡Œçš„2æ˜¯çˆ¶ç›®å½•å¯¹å…¶çš„â€œç¡¬é“¾æ¥â€å’Œå½“å‰ç›®å½•ä¸‹çš„â€.ç¡¬é“¾æ¥â€œã€‚</p><h3 id="7ã€è½¯é“¾æ¥"><a href="#7ã€è½¯é“¾æ¥" class="headerlink" title="7ã€è½¯é“¾æ¥"></a>7ã€è½¯é“¾æ¥</h3><p>é™¤äº†ç¡¬é“¾æ¥ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚æ–‡ä»¶Aå’Œæ–‡ä»¶Bçš„inodeå·ç è™½ç„¶ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ–‡ä»¶Açš„å†…å®¹æ˜¯æ–‡ä»¶Bçš„è·¯å¾„ã€‚è¯»å–æ–‡ä»¶Aæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†è®¿é—®è€…å¯¼å‘æ–‡ä»¶Bã€‚å› æ­¤ï¼Œæ— è®ºæ‰“å¼€å“ªä¸€ä¸ªæ–‡ä»¶ï¼Œæœ€ç»ˆè¯»å–çš„éƒ½æ˜¯æ–‡ä»¶Bã€‚è¿™æ—¶ï¼Œæ–‡ä»¶Aå°±ç§°ä¸ºæ–‡ä»¶Bçš„â€è½¯é“¾æ¥â€ï¼ˆsoft linkï¼‰æˆ–è€…â€ç¬¦å·é“¾æ¥ï¼ˆsymbolic linkï¼‰ã€‚</p><p>è¿™æ„å‘³ç€ï¼Œæ–‡ä»¶Aä¾èµ–äºæ–‡ä»¶Bè€Œå­˜åœ¨ï¼Œå¦‚æœåˆ é™¤äº†æ–‡ä»¶Bï¼Œæ‰“å¼€æ–‡ä»¶Aå°±ä¼šæŠ¥é”™ï¼šâ€No such file or directoryâ€ã€‚è¿™æ˜¯è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥æœ€å¤§çš„ä¸åŒï¼šæ–‡ä»¶AæŒ‡å‘æ–‡ä»¶Bçš„æ–‡ä»¶åï¼Œè€Œä¸æ˜¯æ–‡ä»¶Bçš„inodeå·ç ï¼Œæ–‡ä»¶Bçš„inodeâ€é“¾æ¥æ•°â€ä¸ä¼šå› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p><p>ln -så‘½ä»¤å¯ä»¥åˆ›å»ºè½¯é“¾æ¥ã€‚</p><p>ln -s æºæ–‡æ–‡ä»¶æˆ–ç›®å½• ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•</p><h3 id="8ã€inodeçš„ç‰¹æ®Šä½œç”¨"><a href="#8ã€inodeçš„ç‰¹æ®Šä½œç”¨" class="headerlink" title="8ã€inodeçš„ç‰¹æ®Šä½œç”¨"></a>8ã€inodeçš„ç‰¹æ®Šä½œç”¨</h3><p>ç”±äºinodeå·ç ä¸æ–‡ä»¶ååˆ†ç¦»ï¼Œè¿™ç§æœºåˆ¶å¯¼è‡´äº†ä¸€äº›Unix&#x2F;Linuxç³»ç»Ÿç‰¹æœ‰çš„ç°è±¡ã€‚</p><p>1. æœ‰æ—¶ï¼Œæ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œæ— æ³•æ­£å¸¸åˆ é™¤ã€‚è¿™æ—¶ï¼Œç›´æ¥åˆ é™¤inodeèŠ‚ç‚¹ï¼Œå°±èƒ½èµ·åˆ°åˆ é™¤æ–‡ä»¶çš„ä½œç”¨ã€‚</p><p>2. ç§»åŠ¨æ–‡ä»¶æˆ–é‡å‘½åæ–‡ä»¶ï¼Œåªæ˜¯æ”¹å˜æ–‡ä»¶åï¼Œä¸å½±å“inodeå·ç ã€‚</p><p>3. æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä»¥åï¼Œç³»ç»Ÿå°±ä»¥inodeå·ç æ¥è¯†åˆ«è¿™ä¸ªæ–‡ä»¶ï¼Œä¸å†è€ƒè™‘æ–‡ä»¶åã€‚å› æ­¤ï¼Œé€šå¸¸æ¥è¯´ï¼Œç³»ç»Ÿæ— æ³•ä»inodeå·ç å¾—çŸ¥æ–‡ä»¶åã€‚</p><p>ç¬¬3ç‚¹ä½¿å¾—è½¯ä»¶æ›´æ–°å˜å¾—ç®€å•ï¼Œå¯ä»¥åœ¨ä¸å…³é—­è½¯ä»¶çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ–°ï¼Œä¸éœ€è¦é‡å¯ã€‚å› ä¸ºç³»ç»Ÿé€šè¿‡inodeå·ç ï¼Œè¯†åˆ«è¿è¡Œä¸­çš„æ–‡ä»¶ï¼Œä¸é€šè¿‡æ–‡ä»¶åã€‚æ›´æ–°çš„æ—¶å€™ï¼Œæ–°ç‰ˆæ–‡ä»¶ä»¥åŒæ ·çš„æ–‡ä»¶åï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„inodeï¼Œä¸ä¼šå½±å“åˆ°è¿è¡Œä¸­çš„æ–‡ä»¶ã€‚ç­‰åˆ°ä¸‹ä¸€æ¬¡è¿è¡Œè¿™ä¸ªè½¯ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶åå°±è‡ªåŠ¨æŒ‡å‘æ–°ç‰ˆæ–‡ä»¶ï¼Œæ—§ç‰ˆæ–‡ä»¶çš„inodeåˆ™è¢«å›æ”¶ã€‚</p><h3 id="9-å®é™…é—®é¢˜"><a href="#9-å®é™…é—®é¢˜" class="headerlink" title="9 å®é™…é—®é¢˜"></a>9 å®é™…é—®é¢˜</h3><p>åœ¨ä¸€å°é…ç½®è¾ƒä½çš„LinuxæœåŠ¡å™¨ï¼ˆå†…å­˜ã€ç¡¬ç›˜æ¯”è¾ƒå°ï¼‰çš„&#x2F;dataåˆ†åŒºå†…åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿæç¤ºç£ç›˜ç©ºé—´ä¸è¶³ï¼Œç”¨df -hå‘½ä»¤æŸ¥çœ‹äº†ä¸€ä¸‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œå‘ç°&#x2F;dataåˆ†åŒºåªä½¿ç”¨äº†66%ï¼Œè¿˜æœ‰12Gçš„å‰©ä½™ç©ºé—´ï¼ŒæŒ‰ç†è¯´ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚Â åæ¥ç”¨df -iæŸ¥çœ‹äº†ä¸€ä¸‹&#x2F;dataåˆ†åŒºçš„ç´¢å¼•èŠ‚ç‚¹(inode)ï¼Œå‘ç°å·²ç»ç”¨æ»¡(IUsed&#x3D;100%)ï¼Œå¯¼è‡´ç³»ç»Ÿæ— æ³•åˆ›å»ºæ–°ç›®å½•å’Œæ–‡ä»¶ã€‚Â </p><p>æŸ¥æ‰¾åŸå› ï¼š</p><p>&#x2F;data&#x2F;cacheç›®å½•ä¸­å­˜åœ¨æ•°é‡éå¸¸å¤šçš„å°å­—èŠ‚ç¼“å­˜æ–‡ä»¶ï¼Œå ç”¨çš„Blockä¸å¤šï¼Œä½†æ˜¯å ç”¨äº†å¤§é‡çš„inodeã€‚Â </p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1.åˆ é™¤&#x2F;data&#x2F;cacheç›®å½•ä¸­çš„éƒ¨åˆ†æ–‡ä»¶ï¼Œé‡Šæ”¾å‡º&#x2F;dataåˆ†åŒºçš„ä¸€éƒ¨åˆ†inodeã€‚</p><p>2.ä½¿ç”¨è½¯è¿æ¥å°†ç©ºé—²åˆ†åŒº&#x2F;optä¸­çš„newcacheç›®å½•è¿æ¥åˆ°&#x2F;data&#x2F;cacheï¼Œä½¿ç”¨&#x2F;optåˆ†åŒºçš„inodeæ¥ç¼“è§£&#x2F;dataåˆ†åŒºinodeä¸è¶³çš„é—®é¢˜: <code>ln -s /opt/newcache /data/cache</code></p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> PVE </tag>
            
            <tag> inode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenLiteSpeedçš„å¸¸ç”¨é‡å†™è§„åˆ™å’Œå¤´éƒ¨æ“ä½œ</title>
      <link href="/post/2021/11/15/13822/"/>
      <url>/post/2021/11/15/13822/</url>
      
        <content type="html"><![CDATA[<p><img src="https://up.eber.vip/Think-Me/img/main/upload/openlitespeed.png" alt="openlitespeed.png"></p><h2 id="1ã€http-301-to-https-htaccessè§„åˆ™ã€-to-wwwè§†å…·ä½“æƒ…å†µå¢å‡ã€‘"><a href="#1ã€http-301-to-https-htaccessè§„åˆ™ã€-to-wwwè§†å…·ä½“æƒ…å†µå¢å‡ã€‘" class="headerlink" title="1ã€http 301 to https .htaccessè§„åˆ™ã€@ to wwwè§†å…·ä½“æƒ…å†µå¢å‡ã€‘"></a>1ã€http 301 to https .htaccessè§„åˆ™ã€@ to wwwè§†å…·ä½“æƒ…å†µå¢å‡ã€‘</h2><h3 id="1-1ã€è™šæ‹Ÿä¸»æœºâ€”é‡å†™â€”é‡å†™è§„åˆ™"><a href="#1-1ã€è™šæ‹Ÿä¸»æœºâ€”é‡å†™â€”é‡å†™è§„åˆ™" class="headerlink" title="1.1ã€è™šæ‹Ÿä¸»æœºâ€”é‡å†™â€”é‡å†™è§„åˆ™"></a>1.1ã€è™šæ‹Ÿä¸»æœºâ€”é‡å†™â€”é‡å†™è§„åˆ™</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">RewriteCond %&#123;HTTPS&#125; off [OR]</span><br><span class="line">RewriteCond %&#123;HTTP_HOST&#125; !^www.</span><br><span class="line">RewriteRule ^(.*)$ https://www.%&#123;SERVER_NAME&#125;/$1 [L,R=301]</span><br></pre></td></tr></table></figure><h3 id="1-2ã€http-to-https"><a href="#1-2ã€http-to-https" class="headerlink" title="1.2ã€http to https"></a>1.2ã€http to https</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">RewriteEngine On</span><br><span class="line">RewriteCond %&#123;SERVER_PORT&#125; 80</span><br><span class="line">RewriteRule ^(.*)$ https://%&#123;SERVER_NAME&#125;/$1 [R,L]</span><br></pre></td></tr></table></figure><h2 id="2ã€å¯ç”¨HSTS"><a href="#2ã€å¯ç”¨HSTS" class="headerlink" title="2ã€å¯ç”¨HSTS"></a>2ã€å¯ç”¨HSTS</h2><p>è™šæ‹Ÿä¸»æœºâ€”èµ„æºé›†â€”staticâ€”å¤´éƒ¨æ“ä½œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Strict-Transport-Security: max-age=31536000; includeSubDomains; preload</span><br><span class="line">X-Content-Type-Options nosniff</span><br><span class="line">X-XSS-Protection 1;mode=block</span><br><span class="line">X-Frame-Options SAMEORIGIN</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenLiteSpeed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxé…ç½®SSLåŒå‘è®¤è¯ã€å®¢æˆ·ç«¯è®¤è¯ã€‘</title>
      <link href="/post/2021/11/15/55508/"/>
      <url>/post/2021/11/15/55508/</url>
      
        <content type="html"><![CDATA[<h2 id="SSLåŒå‘è®¤è¯"><a href="#SSLåŒå‘è®¤è¯" class="headerlink" title="SSLåŒå‘è®¤è¯"></a>SSLåŒå‘è®¤è¯</h2><p>ç»å¤§å¤šæ•°SSLåº”ç”¨éƒ½ä»¥å•å‘è®¤è¯ä¸ºä¸»ï¼Œå³å®¢æˆ·ç«¯åªè¦ä¿¡ä»»æœåŠ¡ç«¯ï¼Œå°±å¯ä»¥ä½¿ç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†åå‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡ç«¯çš„ç§é’¥è§£å¯†ä¹‹åè·å¾—è¯·æ±‚æ•°æ®ã€‚</p><p>å¦‚æœè¿™ä¸ªè¿‡ç¨‹åè¿‡æ¥ï¼Œè®©æœåŠ¡ç«¯ä¿¡ä»»å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨å®¢æˆ·ç«¯çš„å…¬é’¥åŠ å¯†ä¹‹åå°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå…¶å®ä¹Ÿæ˜¯å¯ä»¥åšåˆ°çš„ï¼ŒåŸç†å’Œå®ç°è·Ÿå•å‘è®¤è¯éƒ½å·®ä¸å¤šã€‚</p><p>æœåŠ¡ç«¯ä¿¡ä»»å®¢æˆ·ç«¯çš„æ“ä½œå¾€å¾€ä¹Ÿä¼šä¼´éšç€å®¢æˆ·ç«¯è®¤è¯æœåŠ¡ç«¯çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è®©æœåŠ¡ç«¯ä¿¡ä»»å®¢æˆ·ç«¯çš„SSLè®¤è¯æ–¹å¼å¾€å¾€ä¹Ÿè¢«ç§°ä¸ºSSLåŒå‘è®¤è¯ï¼Œå¹¶ä¸”è¦é…ç½®SSLåŒå‘è®¤è¯å¿…é¡»å…ˆå¼€å¯æœåŠ¡ç«¯SSLï¼Œå…ˆé…ç½®å®¢æˆ·ç«¯ä¿¡ä»»æœåŠ¡ç«¯ã€‚</p><h2 id="Nginxçš„SSLåŒå‘è®¤è¯é…ç½®"><a href="#Nginxçš„SSLåŒå‘è®¤è¯é…ç½®" class="headerlink" title="Nginxçš„SSLåŒå‘è®¤è¯é…ç½®"></a>Nginxçš„SSLåŒå‘è®¤è¯é…ç½®</h2><h2 id="ç¬¬ä¸€æ­¥-å¼€å¯httpsè®¿é—®ã€æœåŠ¡ç«¯è¯ä¹¦ä¸ä¸€å®šå¿…é¡»æ˜¯å’Œå®¢æˆ·ç«¯æ˜¯åŒä¸€CAç­¾å‘çš„è¯ä¹¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨CAæœºæ„çš„æ­£è§„å¯ä¿¡è¯ä¹¦ã€‘"><a href="#ç¬¬ä¸€æ­¥-å¼€å¯httpsè®¿é—®ã€æœåŠ¡ç«¯è¯ä¹¦ä¸ä¸€å®šå¿…é¡»æ˜¯å’Œå®¢æˆ·ç«¯æ˜¯åŒä¸€CAç­¾å‘çš„è¯ä¹¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨CAæœºæ„çš„æ­£è§„å¯ä¿¡è¯ä¹¦ã€‘" class="headerlink" title="ç¬¬ä¸€æ­¥ å¼€å¯httpsè®¿é—®ã€æœåŠ¡ç«¯è¯ä¹¦ä¸ä¸€å®šå¿…é¡»æ˜¯å’Œå®¢æˆ·ç«¯æ˜¯åŒä¸€CAç­¾å‘çš„è¯ä¹¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨CAæœºæ„çš„æ­£è§„å¯ä¿¡è¯ä¹¦ã€‘"></a>ç¬¬ä¸€æ­¥ å¼€å¯httpsè®¿é—®ã€æœåŠ¡ç«¯è¯ä¹¦ä¸ä¸€å®šå¿…é¡»æ˜¯å’Œå®¢æˆ·ç«¯æ˜¯åŒä¸€CAç­¾å‘çš„è¯ä¹¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨CAæœºæ„çš„æ­£è§„å¯ä¿¡è¯ä¹¦ã€‘</h2><p>æ ¹æ®ç†è®ºçŸ¥è¯†ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå¼€å¯Nginxçš„SSLé…ç½®ï¼Œå³å¯ç”¨httpsã€‚è¿™ä¸ªè¿‡ç¨‹è¾ƒä¸ºç®€å•ï¼Œç›®å‰æ¯”è¾ƒå¥½ç”¨çš„å°±æ˜¯äºšæ´²è¯šä¿¡è¿™ç§å…è´¹ä¸€å¹´çš„è¯ä¹¦æ–¹æ¡ˆã€‚ç”³è¯·å…è´¹è¯ä¹¦çš„è¿‡ç¨‹ç•¥è¿‡ï¼Œç›´æ¥è´´å¯ç”¨httpsçš„é…ç½®:ã€letâ€™s encryptè¿™ä¸ªå…è´¹è¯ä¹¦æ–¹æ¡ˆä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè‹¹æœè®¾å¤‡ä¼šå¼ºåˆ¶è¿›è¡ŒOCSPæ ¡éªŒä½†æ˜¯letâ€™s encryptçš„OCSPæœåŠ¡åœ¨å›½å†…è®¿é—®å¾ˆæ…¢æˆ–è€…æ˜¯å®Œå…¨ä¸èƒ½è®¿é—®ï¼Œæ‰€ä»¥ä¼šé€ æˆè‹¹æœè®¾å¤‡æ— æ³•æ‰“å¼€æˆ‘ä»¬çš„ç½‘ç«™æˆ–è€…æ˜¯å“åº”æ…¢ã€‚ã€‘</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  server_name example.com;</span><br><span class="line">  ssl_certificate /usr/local/openresty/nginx/conf/ssl/example.com_chain.crt;</span><br><span class="line">  ssl_certificate_key /usr/local/openresty/nginx/conf/ssl/example.com_key.key;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_session_cache builtin:1000 shared:SSL:10m;</span><br><span class="line">  ssl_buffer_size 1400;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  access_log /data/wwwlogs/example.com_nginx.log combined;</span><br><span class="line">  if ($ssl_protocol = &quot;&quot;) &#123; return 301 https://$host$request_uri; &#125;</span><br><span class="line"></span><br><span class="line">  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ &#123;</span><br><span class="line">    proxy_pass http://10.0.5.1:5000;</span><br><span class="line">    include proxy.conf;</span><br><span class="line">    expires 30d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">    proxy_pass http://10.0.5.1:5000;</span><br><span class="line">    include proxy.conf;</span><br><span class="line">    expires 7d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ /(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md) &#123;</span><br><span class="line">    deny all;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://10.0.5.1:5000;</span><br><span class="line">    include proxy.conf;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«æ³¨æ„<code>if ($ssl_protocol = &quot;&quot;) &#123; return 301 https://$host$request_uri; &#125;</code>ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯SSLåŒå‘è®¤è¯ï¼Œä¸èµ°httpsæ— ä»»ä½•æ„ä¹‰ï¼Œæ‰€ä»¥å¿…é¡»å¼ºåˆ¶è·³è½¬httpsã€‚</p><h2 id="ç¬¬äºŒæ­¥-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å¹¶ç­¾è¯-è„šæœ¬"><a href="#ç¬¬äºŒæ­¥-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å¹¶ç­¾è¯-è„šæœ¬" class="headerlink" title="ç¬¬äºŒæ­¥ ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å¹¶ç­¾è¯(è„šæœ¬)"></a>ç¬¬äºŒæ­¥ ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å¹¶ç­¾è¯(è„šæœ¬)</h2><p>è¿™ä¸ªè¿‡ç¨‹è¯¦ç»†æè¿°çš„æ–‡ç« å¤ªå¤šäº†ï¼Œè¿™é‡Œå°±ä¸å•°å—¦ä»‹ç»opensslå’Œç­¾è¯è¿‡ç¨‹äº†ï¼Œæœ¬ç¯‡å†…å®¹æ˜¯å¿«é€Ÿç”ŸæˆåŒå‘è®¤è¯é…ç½®çš„è¯ä¹¦ï¼Œæ‰€ä»¥ç›´æ¥è´´è„šæœ¬å°±è¡Œäº†ï¼Œå‘½ä»¤éƒ½æ˜¯å‚è€ƒäº’è”ç½‘ä¸Šå„ç§opensslåŒå‘é…ç½®æ–‡æ¡£ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè¿›è¡Œäº†å‘½ä»¤ä¸Šçš„ç®€åŒ–ä¸éäº¤äº’å¼çš„æ”¯æŒã€‚</p><p>æ•´ä¸ªç›®å½•ç»“æ„å¦‚å›¾:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># tree /usr/local/openresty/nginx/conf/ssl/</span><br><span class="line">/usr/local/openresty/nginx/conf/ssl/</span><br><span class="line">â”œâ”€â”€ create_ca_cert.sh</span><br><span class="line">â”œâ”€â”€ create_client_cert.sh</span><br><span class="line">â”œâ”€â”€ revoke_cert.sh</span><br><span class="line"></span><br><span class="line">0 directories, 3 files </span><br></pre></td></tr></table></figure><p>è‡ªè¡Œåˆ›å»º<code>/etc/nginx/ssl_certs/</code>ï¼Œæ”¾å…¥ä¸‰ä¸ªè„šæœ¬ï¼Œåˆ†åˆ«ç”¨äºç”ŸæˆCAè¯ä¹¦ä»¥åŠCAç›®å½•(<code>create_ca_cert.sh</code>è„šæœ¬çš„ä½œç”¨ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡éœ€è¦è¿è¡Œ)ï¼Œåˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¹¶ç”¨CAè¯ä¹¦ç­¾è¯(<code>create_client_cert.sh</code>è„šæœ¬çš„ä½œç”¨ï¼Œå¿…é¡»å…ˆç”ŸæˆCAè¯ä¹¦)ï¼Œ<code>revoke_cert.sh</code>è„šæœ¬ç”¨äºåŠé”€è¯ä¹¦ï¼Œéœ€è¦æ”¶å›æƒé™çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚</p><p>æ¯ä¸ªè„šæœ¬å†…å®¹å¦‚ä¸‹:</p><ul><li><code>create_ca_cert.sh</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash -e</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºCAæ ¹è¯ä¹¦</span><br><span class="line"># éäº¤äº’å¼æ–¹å¼åˆ›å»ºä»¥ä¸‹å†…å®¹:</span><br><span class="line"># å›½å®¶å(2ä¸ªå­—æ¯çš„ä»£å·)</span><br><span class="line">C=CN</span><br><span class="line"># çœ</span><br><span class="line">ST=Shannxi</span><br><span class="line"># å¸‚</span><br><span class="line">L=Xian</span><br><span class="line"># å…¬å¸å</span><br><span class="line">O=My Company</span><br><span class="line"># ç»„ç»‡æˆ–éƒ¨é—¨å</span><br><span class="line">OU=æŠ€æœ¯éƒ¨</span><br><span class="line"># æœåŠ¡å™¨FQDNæˆ–é¢å‘è€…å</span><br><span class="line">CN=www.example.com</span><br><span class="line"># é‚®ç®±åœ°å€</span><br><span class="line">emailAddress=admin@example.com</span><br><span class="line"></span><br><span class="line">mkdir -p ./demoCA/&#123;private,newcerts&#125;</span><br><span class="line">touch ./demoCA/index.txt</span><br><span class="line">[ ! -f ./demoCA/seria ] &amp;&amp; echo 01 &gt; ./demoCA/serial</span><br><span class="line">[ ! -f ./demoCA/crlnumber ] &amp;&amp; echo 01 &gt; ./demoCA/crlnumber</span><br><span class="line">[ ! -f ./demoCA/cacert.pem ] &amp;&amp; openssl req -utf8 -new -x509 -days 36500 -newkey rsa:2048 -nodes -keyout ./demoCA/private/cakey.pem -out ./demoCA/cacert.pem -subj &quot;/C=$&#123;C&#125;/ST=$&#123;ST&#125;/L=$&#123;L&#125;/O=$&#123;O&#125;/OU=$&#123;OU&#125;/CN=$&#123;CN&#125;/emailAddress=$&#123;emailAddress&#125;&quot;</span><br><span class="line">[ ! -f ./demoCA/private/ca.crl ] &amp;&amp; openssl ca -crldays 36500 -gencrl -out &quot;./demoCA/private/ca.crl&quot; </span><br></pre></td></tr></table></figure><ul><li><code>create_client_cert.sh</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash -e</span><br><span class="line"></span><br><span class="line">show_help() &#123;</span><br><span class="line">    echo &quot;$0 [-h|-?|--help] [--ou ou] [--cn cn] [--email email]&quot;</span><br><span class="line">    echo &quot;-h|-?|--help    æ˜¾ç¤ºå¸®åŠ©&quot;</span><br><span class="line">    echo &quot;--ou            è®¾ç½®ç»„ç»‡æˆ–éƒ¨é—¨åï¼Œå¦‚: æŠ€æœ¯éƒ¨&quot;</span><br><span class="line">    echo &quot;--cn            è®¾ç½®FQDNæˆ–æ‰€æœ‰è€…åï¼Œå¦‚: å†¯å®‡&quot;</span><br><span class="line">    echo &quot;--email         è®¾ç½®FQDNæˆ–æ‰€æœ‰è€…é‚®ä»¶ï¼Œå¦‚: fengyu@example.com&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">while [[ $# -gt 0 ]]</span><br><span class="line">do</span><br><span class="line">    case $1 in</span><br><span class="line">        -h|-\?|--help)</span><br><span class="line">            show_help</span><br><span class="line">            exit 0</span><br><span class="line">            ;;</span><br><span class="line">        --ou)</span><br><span class="line">            OU=&quot;$&#123;2&#125;&quot;</span><br><span class="line">            shift</span><br><span class="line">            ;;        </span><br><span class="line">        --cn)</span><br><span class="line">            CN=&quot;$&#123;2&#125;&quot;            </span><br><span class="line">            shift</span><br><span class="line">            ;;</span><br><span class="line">        --email)</span><br><span class="line">            emailAddress=&quot;$&#123;2&#125;&quot;            </span><br><span class="line">            shift</span><br><span class="line">            ;;</span><br><span class="line">        --)</span><br><span class="line">            shift</span><br><span class="line">            break</span><br><span class="line">        ;;</span><br><span class="line">        *)</span><br><span class="line">            echo -e &quot;Error: $0 invalid option &#x27;$1&#x27;\nTry &#x27;$0 --help&#x27; for more information.\n&quot; &gt;&amp;2</span><br><span class="line">            exit 1</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">shift</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦</span><br><span class="line"># éäº¤äº’å¼æ–¹å¼åˆ›å»ºä»¥ä¸‹å†…å®¹:</span><br><span class="line"># å›½å®¶å(2ä¸ªå­—æ¯çš„ä»£å·)</span><br><span class="line">C=CN</span><br><span class="line"># çœ</span><br><span class="line">ST=Shannxi</span><br><span class="line"># å¸‚</span><br><span class="line">L=Xian</span><br><span class="line"># å…¬å¸å</span><br><span class="line">O=My Company</span><br><span class="line"># ç»„ç»‡æˆ–éƒ¨é—¨å</span><br><span class="line">OU=$&#123;OU:-æµ‹è¯•éƒ¨é—¨&#125;</span><br><span class="line"># æœåŠ¡å™¨FQDNæˆ–æˆäºˆè€…å</span><br><span class="line">CN=$&#123;CN:-demo&#125;</span><br><span class="line"># é‚®ç®±åœ°å€</span><br><span class="line">emailAddress=$&#123;emailAddress:-demo@example.com&#125;</span><br><span class="line"></span><br><span class="line">mkdir -p &quot;$&#123;CN&#125;&quot;</span><br><span class="line"></span><br><span class="line">[ ! -f &quot;$&#123;CN&#125;/$&#123;CN&#125;.key&quot; ] &amp;&amp; openssl req -utf8 -nodes -newkey rsa:2048 -keyout &quot;$&#123;CN&#125;/$&#123;CN&#125;.key&quot; -new -days 36500 -out &quot;$&#123;CN&#125;/$&#123;CN&#125;.csr&quot; -subj &quot;/C=$&#123;C&#125;/ST=$&#123;ST&#125;/L=$&#123;L&#125;/O=$&#123;O&#125;/OU=$&#123;OU&#125;/CN=$&#123;CN&#125;/emailAddress=$&#123;emailAddress&#125;&quot;</span><br><span class="line">[ ! -f &quot;$&#123;CN&#125;/$&#123;CN&#125;.crt&quot; ] &amp;&amp; openssl ca -utf8 -batch -days 36500 -in &quot;$&#123;CN&#125;/$&#123;CN&#125;.csr&quot; -out &quot;$&#123;CN&#125;/$&#123;CN&#125;.crt&quot;</span><br><span class="line">[ ! -f &quot;$&#123;CN&#125;/$&#123;CN&#125;.p12&quot; ] &amp;&amp; openssl pkcs12 -export -clcerts -CApath ./demoCA/ -inkey &quot;$&#123;CN&#125;/$&#123;CN&#125;.key&quot; -in &quot;$&#123;CN&#125;/$&#123;CN&#125;.crt&quot; -certfile &quot;./demoCA/cacert.pem&quot; -passout pass: -out &quot;$&#123;CN&#125;/$&#123;CN&#125;.p12&quot; </span><br></pre></td></tr></table></figure><ul><li><code>revoke_cert.sh</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash -e</span><br><span class="line"></span><br><span class="line"># åŠé”€ä¸€ä¸ªç­¾è¯è¿‡çš„è¯ä¹¦</span><br><span class="line"></span><br><span class="line">openssl ca -revoke &quot;$&#123;1&#125;/$&#123;1&#125;.crt&quot;</span><br><span class="line">openssl ca -gencrl -out &quot;./demoCA/private/ca.crl&quot; </span><br></pre></td></tr></table></figure><p>ç®€å•åˆ†æä¸€æ³¢è„šæœ¬ï¼Œé¦–å…ˆæ˜¯åˆ›å»ºCAï¼Œå¯¹äºUbuntuç³»ç»Ÿæ¥è¯´ï¼Œ<code>/etc/ssl/openssl.cnf</code>é…ç½®ä¸­é»˜è®¤çš„CAè·¯å¾„å°±æ˜¯<code>./demoCA</code>ï¼Œä¸ºäº†ä¸æ”¹åŠ¨é»˜è®¤é…ç½®ï¼Œç›´æ¥æŒ‰ç…§é»˜è®¤é…ç½®çš„å†…å®¹åˆ›å»ºè¿™äº›ç›®å½•å’Œæ–‡ä»¶å³å¯ã€‚è¿˜æœ‰å°±æ˜¯opensslå­å‘½ä»¤éå¸¸å¤šï¼Œä½†æ˜¯ä¹Ÿå’Œgitä¸€æ ·ï¼Œå¯ä»¥åˆå¹¶å‘½ä»¤ï¼Œæ¯”å¦‚ç”¨ä¸€æ¡å‘½ä»¤åŒæ—¶ç”Ÿæˆç§é’¥å’Œç­¾è¯è¯·æ±‚<code>openssl req -nodes -newkey rsa:2048 -keyout client.key -new -out client.csr</code>ï¼Œåœ¨<code>req</code>çš„åŒæ—¶å°±åšäº†<code>genrsa</code>ã€‚ç”±äºåˆ›å»ºCAè„šæœ¬åªæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œéœ€è¦ï¼Œå› æ­¤æŠŠè¯ä¹¦é…ç½®ç›´æ¥å†™æ­»åœ¨è„šæœ¬ä¸­å°±å®Œäº‹äº†ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦ï¼Œä¸ºäº†ç®€åŒ–ç”¨æˆ·çš„ä½¿ç”¨ï¼Œåœ¨æœåŠ¡ç«¯å¸®åŠ©ç”¨æˆ·ç”Ÿæˆè¯ä¹¦å¹¶ç­¾è¯ï¼ŒæŠŠç­¾è¯è¿‡çš„è¯ä¹¦ä¸‹å‘ç»™ç”¨æˆ·å°±å¯ä»¥äº†ã€‚ç”±äºç”¨æˆ·å¯èƒ½æ˜¯ä¸åŒéƒ¨é—¨ï¼Œä¸åŒå§“åï¼Œä¸åŒé‚®ä»¶åœ°å€ï¼Œå› æ­¤å°†è¿™ä¸‰ä¸ªå‚æ•°å¤–éƒ¨åŒ–ï¼Œåšä¸€ä¸‹å‚æ•°è§£æï¼ŒåŠ ä¸Šå‹å¥½çš„å‘½ä»¤è¡Œæç¤ºé˜²æ­¢é—å¿˜ã€‚è¿™ä¸ªè„šæœ¬ç‰¹åˆ«æ³¨æ„æœ€åä¸€è¡Œï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>PKCS12</code>æ ¼å¼çš„è¯ä¹¦ã€‚opensslé»˜è®¤äº§ç”Ÿçš„è¯ä¹¦æ ¼å¼éƒ½æ˜¯<code>PEM</code>çš„ï¼Œä¼šå°†å…¬é’¥å’Œç§é’¥åˆ†å¼€ï¼Œä½†æ˜¯æµè§ˆå™¨å¯¼å…¥çš„æ—¶å€™éœ€è¦å°†è¿™äº›å†…å®¹åˆå¹¶èµ·æ¥å½¢æˆ<code>è¯ä¹¦é“¾</code>ï¼Œæ‰€ä»¥éœ€è¦å°†ç­¾è¯è¿‡çš„è¯ä¹¦å’Œç§é’¥æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª<code>PKCS12</code>æ ¼å¼çš„è¯ä¹¦ï¼Œç›´æ¥å°†è¿™ä¸ª<code>.p12</code>æ ¼å¼çš„è¯ä¹¦äº¤ç»™ç”¨æˆ·å°±å¯ä»¥äº†ã€‚</p><p>æœ€åæ˜¯åŠé”€è¯ä¹¦äº†ï¼Œå½“å¸Œæœ›æ”¶å›æŸä¸ªç”¨æˆ·çš„è®¿é—®æƒé™æ—¶ï¼Œç›´æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬è·Ÿä¸Šç›®å½•åå°±å¯ä»¥äº†ã€‚</p><p>æ¥ä¸‹æ¥è¿è¡Œåˆ›å»ºCAçš„è„šæœ¬:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./create_ca_cert.sh</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">.......................+++</span><br><span class="line">........................................................................................................+++</span><br><span class="line">writing new private key to &#x27;./demoCA/private/cakey.pem&#x27;</span><br><span class="line">-----</span><br><span class="line">Using configuration from /usr/ssl/openssl.cnf </span><br></pre></td></tr></table></figure><p>æ­¤æ—¶äº§ç”Ÿçš„<code>./demoCA</code>ç›®å½•ç»“æ„å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">demoCA/</span><br><span class="line">â”œâ”€â”€ cacert.pem</span><br><span class="line">â”œâ”€â”€ crlnumber</span><br><span class="line">â”œâ”€â”€ crlnumber.old</span><br><span class="line">â”œâ”€â”€ index.txt</span><br><span class="line">â”œâ”€â”€ newcerts</span><br><span class="line">â”œâ”€â”€ private</span><br><span class="line">â”‚   â”œâ”€â”€ ca.crl</span><br><span class="line">â”‚   â””â”€â”€ cakey.pem</span><br><span class="line">â””â”€â”€ serial</span><br><span class="line"></span><br><span class="line">2 directories, 7 files </span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥é…ç½®nginxäº†ï¼Œåœ¨ä¸Šé¢å•å‘sslçš„é…ç½®ä¸­ï¼Œè¿½åŠ ä»¥ä¸‹é…ç½®:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssl_client_certificate ssl_certs/demoCA/cacert.pem;</span><br><span class="line">ssl_crl ssl_certs/demoCA/private/ca.crl;</span><br><span class="line">ssl_verify_client on; </span><br></pre></td></tr></table></figure><p><code>ssl_client_certificate</code>å°±æ˜¯å®¢æˆ·ç«¯è¯ä¹¦çš„CAè¯ä¹¦äº†ï¼Œä»£è¡¨æ­¤CAç­¾å‘çš„è¯ä¹¦éƒ½æ˜¯å¯ä¿¡çš„ï¼Œ<code>ssl_verify_client on;</code>ä»£è¡¨å¼ºåˆ¶å¯ç”¨å®¢æˆ·ç«¯è®¤è¯ï¼Œéæ³•å®¢æˆ·ç«¯(æ— è¯ä¹¦ï¼Œè¯ä¹¦ä¸å¯ä¿¡)éƒ½ä¼šè¿”å›400é”™ã€‚</p><p>ç‰¹åˆ«æ³¨æ„<code>ssl_crl</code>è¿™ä¸ªé…ç½®ï¼Œä»£è¡¨Nginxä¼šè¯»å–ä¸€ä¸ªCRL(Certificate Revoke List)æ–‡ä»¶ï¼Œä¹‹å‰è¯´è¿‡ï¼Œå¯èƒ½ä¼šæœ‰æ”¶å›ç”¨æˆ·æƒé™çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æœ‰åŠé”€è¯ä¹¦çš„åŠŸèƒ½ï¼Œäº§ç”Ÿä¸€ä¸ªCRLæ–‡ä»¶è®©NginxçŸ¥é“å“ªäº›è¯ä¹¦è¢«åŠé”€äº†å³å¯ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>: Nginxé…ç½®éƒ½æ˜¯é™æ€çš„ï¼Œè¯»å–é…ç½®æ–‡ä»¶ä¹‹åéƒ½ä¼šåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå³ä½¿æ–‡ä»¶å†…å®¹å˜åŒ–ä¹Ÿä¸ä¼šé‡æ–°è¯»å–ã€‚å› æ­¤å½“CRLæ–‡ä»¶å‘ç”Ÿå˜æ›´ä¹‹åï¼ŒNginxå¹¶ä¸èƒ½æ„è¯†åˆ°æœ‰æ–°çš„è¯ä¹¦è¢«åŠé”€äº†ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨<code>reload</code>æŒ‡ä»¤è®©Nginxé‡æ–°è¯»å–é…ç½®æ–‡ä»¶: <code>service nginx reload</code>æˆ–<code>nginx -s reload</code></p></blockquote><p>æ­¤æ—¶é‡å¯NginxæœåŠ¡ï¼Œå°±å¯ä»¥å®ŒæˆSSLåŒå‘è®¤è¯é…ç½®äº†ã€‚</p><p>æˆ‘ä»¬ç­¾å‘ä¸€ä¸ªè¯ä¹¦çœ‹çœ‹:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> ./create_client_cert.sh --ou è´¢åŠ¡éƒ¨ --cn è´¢åŠ¡ç»ç† --email cy@example.com</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">................................+++</span><br><span class="line">.............................................................................+++</span><br><span class="line">writing new private key to &#x27;è´¢åŠ¡ç»ç†/è´¢åŠ¡ç»ç†.key&#x27;</span><br><span class="line">-----</span><br><span class="line">Using configuration from /usr/ssl/openssl.cnf</span><br><span class="line">Check that the request matches the signature</span><br><span class="line">Signature ok</span><br><span class="line">Certificate Details:</span><br><span class="line">        Serial Number: 1 (0x1)</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Jun 14 16:03:46 2018 GMT</span><br><span class="line">            Not After : May 21 16:03:46 2118 GMT</span><br><span class="line">        Subject:</span><br><span class="line">            countryName               = CN</span><br><span class="line">            stateOrProvinceName       = Shannxi</span><br><span class="line">            organizationName          = My Company</span><br><span class="line">            organizationalUnitName    = \U8D22\U52A1\U90E8</span><br><span class="line">            commonName                = \U8D22\U52A1\U7ECF\U7406</span><br><span class="line">            emailAddress              = cy@example.com</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            Netscape Comment:</span><br><span class="line">                OpenSSL Generated Certificate</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                B5:91:0B:1F:FC:25:3B:2A:F9:EF:39:39:51:E3:1F:64:78:8A:C3:75</span><br><span class="line">            X509v3 Authority Key Identifier:</span><br><span class="line">                keyid:86:55:76:15:A3:F5:58:CB:8F:39:A3:56:8E:FF:18:97:AE:27:60:0F</span><br><span class="line"></span><br><span class="line">Certificate is to be certified until May 21 16:03:46 2118 GMT (36500 days)</span><br><span class="line"></span><br><span class="line">Write out database with 1 new entries</span><br><span class="line">Data Base Updated</span><br><span class="line"></span><br><span class="line">tree è´¢åŠ¡ç»ç†/</span><br><span class="line">è´¢åŠ¡ç»ç†/</span><br><span class="line">â”œâ”€â”€ è´¢åŠ¡ç»ç†.crt</span><br><span class="line">â”œâ”€â”€ è´¢åŠ¡ç»ç†.csr</span><br><span class="line">â”œâ”€â”€ è´¢åŠ¡ç»ç†.key</span><br><span class="line">â””â”€â”€ è´¢åŠ¡ç»ç†.p12</span><br><span class="line"></span><br><span class="line">0 directories, 4 files </span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬ç”Ÿæˆäº†ç§é’¥æ–‡ä»¶<code>key</code>ï¼Œç­¾è¯è¯·æ±‚æ–‡ä»¶<code>csr</code>ï¼Œç»è¿‡CAç­¾è¯åçš„è¯ä¹¦æ–‡ä»¶<code>crt</code>(é‡Œé¢æ²¡æœ‰ç§é’¥)ï¼Œä»¥åŠå°†crtæ–‡ä»¶å’Œkeyè¿›è¡Œbundleä¹‹åçš„<code>PKCS12</code>æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶<code>p12</code>ï¼Œå°†<code>p12</code>æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼ŒåŒå‡»ä¸€è·¯Nextå¯¼å…¥è¯ä¹¦å³å¯ã€‚</p><blockquote><p><strong>æ³¨</strong>: ç”±äºCAçš„è¯ä¹¦æ–‡ä»¶ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ç­¾è¯æ–°çš„å®¢æˆ·ç«¯è¯ä¹¦ä¸éœ€è¦restartæˆ–reload nginx</p></blockquote><p>è¿™æ¬¡æ‰“å¼€æˆ‘ä»¬çš„ç½‘ç«™<code>https://www.example.com</code>ï¼Œæµè§ˆå™¨å°±ä¼šæç¤ºæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªå·²æœ‰çš„å®¢æˆ·ç«¯è¯ä¹¦è¿›è¡Œè®¤è¯äº†ï¼Œæ²¡é—®é¢˜å°±å¯ä»¥çœ‹åˆ°ç½‘ç«™å†…å®¹äº†</p><blockquote><p><strong>æ³¨</strong>: æ¯æ¬¡å¯¼å…¥æ–°çš„è¯ä¹¦ä¹‹åï¼Œå¿…é¡»é‡å¯æµè§ˆå™¨æ‰èƒ½æç¤ºä½¿ç”¨æ–°çš„è¯ä¹¦æ–‡ä»¶</p></blockquote><p>æŒ‰ç…§è¿™ç§æ–¹å¼ï¼Œæœ‰å¤šå°‘äººéœ€è¦æˆæƒï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªè„šæœ¬ç­¾å‘å¤šå°‘ä¸ªè¿™æ ·çš„è¯ä¹¦ï¼Œç”¨æˆ·å°†<code>p12</code>è¯ä¹¦å¯¼å…¥æœ¬åœ°å°±å¯ä»¥æ­£å¸¸è®¿é—®ç½‘ç«™äº†ã€‚</p><p>å½“æˆ‘ä»¬éœ€è¦æ”¶å›æŸäººçš„æƒé™çš„æ—¶å€™(æ¯”å¦‚ç¦»èŒäº†)ï¼Œæˆ‘ä»¬éœ€è¦åŠé”€ä»–çš„è¯ä¹¦:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> ./revoke_cert.sh è´¢åŠ¡ç»ç†</span><br><span class="line">Using configuration from /usr/ssl/openssl.cnf</span><br><span class="line">Revoking Certificate 01.</span><br><span class="line">Data Base Updated</span><br><span class="line">Using configuration from /usr/ssl/openssl.cnf</span><br><span class="line"></span><br><span class="line">service nginx reload </span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨åŠé”€ä»–çš„ç­¾è¯æ–‡ä»¶<code>crt</code>ï¼Œå¹¶ä¸”è‡ªåŠ¨æ›´æ–°<code>CRL</code>æ–‡ä»¶ã€‚ç‰¹åˆ«æ³¨æ„éœ€è¦reloadæˆ–restart nginxæ‰èƒ½è®©nginxé‡æ–°åŠ è½½CRLã€‚è¿™æ ·è¢«åŠé”€çš„è¯ä¹¦å°†æ— æ³•è®¿é—®ç½‘ç«™äº†ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>æœ¬æ–‡æˆ‘ä»¬é€šè¿‡Nginxé…ç½®SSLåŒå‘è®¤è¯å®ç°å¯¹å®¢æˆ·ç«¯çš„åŠ å¯†è®¤è¯ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç®€æ˜“çš„è„šæœ¬å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆå„ç§è¯ä¹¦ä¸ç­¾è¯ï¼Œå…é™¤è®°å¿†ç¹çopensslå‘½ä»¤è¡Œï¼Œç®€åŒ–ä½¿ç”¨ã€‚</p><p>å½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªæœ€å°å¯ç”¨é›†ï¼Œå½“è§„æ¨¡æ¯”è¾ƒå¤§çš„æ—¶å€™å¯èƒ½éœ€è¦åšå¾ˆå¤šæ”¹è¿›ï¼Œæ¯”å¦‚åŠ å…¥CAçš„web uiï¼Œç›´æ¥å¯ä»¥æ“ä½œç­¾è¯å’ŒåŠé”€è¯ä¹¦ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨é‡å¯nginxã€‚</p><p>å†æ¯”å¦‚CRLè¿™ç§é™æ€é…ç½®æ–‡ä»¶ä¸é€‚åˆä½ çš„åœºæ™¯ï¼Œå¸Œæœ›çš„åŠ¨æ€æ›´æ–°åŠé”€è¯ä¹¦åˆ—è¡¨ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘OCSPæ–¹æ¡ˆï¼Œè¿™ä¸ªNginxä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œé€šè¿‡ssl_stapling_responderé…ç½®æŒ‡å®šä¸€ä¸ªOCSPåœ°å€ï¼Œè¿™æ ·å°†ä¸éœ€è¦æ¯æ¬¡åŠé”€è¯ä¹¦çš„æ—¶å€™éƒ½å»é‡å¯nginxäº†ï¼Œopensslä¹Ÿæä¾›äº†ocspæœåŠ¡ç«¯çš„åŠŸèƒ½ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥æ‰¾ç›¸å…³èµ„æ–™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>acme.shå…¥é—¨æ•™ç¨‹</title>
      <link href="/post/2021/10/02/45569/"/>
      <url>/post/2021/10/02/45569/</url>
      
        <content type="html"><![CDATA[<h2 id="acme-shåŸŸåé‰´æƒæ–¹å¼"><a href="#acme-shåŸŸåé‰´æƒæ–¹å¼" class="headerlink" title="acme.shåŸŸåé‰´æƒæ–¹å¼"></a>acme.shåŸŸåé‰´æƒæ–¹å¼</h2><p>ç”±é¡¹ç›®çš„<a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E#2-%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6">wiki</a>å¯çŸ¥ï¼šacme.shå†…ç½®ä¸¤ç§é‰´æƒæ–¹å¼ï¼šhttp å’Œ dns éªŒè¯</p><ul><li>httpéªŒè¯(webrootæ¨¡å¼)ï¼šæœ‰äº›åœ°æ–¹ä¼šç§°ä¸ºâ€œæ–‡ä»¶éªŒè¯â€ï¼ŒéªŒè¯æ–¹å¼æ˜¯åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹æ”¾ç½®ä¸€ä¸ªæ–‡ä»¶, æ¥éªŒè¯ä½ çš„åŸŸåæ‰€æœ‰æƒã€‚</li><li>dnséªŒè¯(dnsapiæ¨¡å¼)ï¼šéªŒè¯æ–¹å¼æ˜¯å»ä½ åŸŸåè§£ææ¥å…¥å•†é‚£é‡Œæ·»åŠ ä¸€æ¡TXTçš„è®°å½•æŒ‡å‘æŒ‡å®šçš„å€¼ã€‚</li></ul><h2 id="ä¸¤ç§éªŒè¯çš„ä½¿ç”¨æ–¹å¼"><a href="#ä¸¤ç§éªŒè¯çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä¸¤ç§éªŒè¯çš„ä½¿ç”¨æ–¹å¼"></a>ä¸¤ç§éªŒè¯çš„ä½¿ç”¨æ–¹å¼</h2><ul><li><p>httpéªŒè¯ä¸€èˆ¬æ¯”è¾ƒä¾¿åˆ©ï¼Œä¸éœ€è¦ä½ å»acmeé‡Œé…ç½®ä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªå»è¿›è¡Œè¯ä¹¦ç”³è¯·é‰´æƒçš„ã€‚</p><p>âš ï¸ å¤§é™†çš„ç½‘ç»œç¯å¢ƒä¸‹å¾€å¾€ä¼šæŠ¥éªŒè¯é”™è¯¯è€Œæ— æ³•æˆåŠŸç”³è¯·è¯ä¹¦ã€‚å› ä¸ºacmeä¼šä½¿ç”¨cloudflareæˆ–googleçš„dnsæœåŠ¡å™¨å»éªŒè¯è§£ææ˜¯å¦ç”Ÿæ•ˆï¼Œè€Œgoogleå’Œcloudflareçš„dnsæœåŠ¡åœ¨å¤§é™†å¾€å¾€ä¸èƒ½è®¿é—®ä¼šé€ æˆç”³è¯·å¤±è´¥ã€‚ä½†æ˜¯è¿™ä¸ªåŠŸèƒ½åœ¨acmeçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸æ˜¯å¿…è¦çš„ï¼Œæ‰€ä»¥è¿™æ—¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¢åŠ ä¸€ä¸ªé…ç½®é¡¹æ¥è·³è¿‡public dns checkå³å¯ã€‚(å®˜æ–¹æ–‡æ¡£ä¸­è¯´çš„æ˜¯In dns modeä¼šæœ‰public dns checkï¼Œä½†æ˜¯æˆ‘å®é™…ä½¿ç”¨ä¸­httpéªŒè¯è¿‡ç¨‹ä¸­ä¹Ÿä¼šæœ‰public dns check)</p><p>ğŸŒ° å…·ä½“åšæ³•ä¸ºï¼šåœ¨<code>.acme.sh/account.conf</code>é…ç½®æ–‡ä»¶æœ«å°¾å¢åŠ <code>Le_DNSSleep=&#39;30&#39;</code>å®˜æ–¹çš„è¯´æ³•ä¸º <a href="https://github.com/acmesh-official/acme.sh/wiki/dnscheck"><code>Then acme.sh will wait for 300 seconds instead of checking through the public dns.</code></a> åœ¨æˆ‘å®é™…æµ‹è¯•ä¸­æ²¡å¿…è¦ä¸€å®šè®¾ç½®ä¸º300ã€‚</p><p><code>æ¨èä½¿ç”¨ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼ä½¿å…¨å±€ç”Ÿæ•ˆ</code></p></li><li><p>dnséªŒè¯ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œå®ƒéœ€è¦ä½ å»é…ç½®åŸŸåè§£ææœåŠ¡å•†çš„apiæ“ä½œçš„å¯†é’¥ã€‚ç›®å‰æ”¯æŒçš„å‚å•†æœ‰<code>cloudflare, dnspod, cloudxns, godaddy ä»¥åŠ ovh ç­‰æ•°åç§è§£æå•†</code>å…·ä½“æ”¯æŒçš„å‚å•†å’Œç”¨æ³•è¯·æŸ¥çœ‹ <a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi">wiki</a> ã€‚ï¼ˆç”³è¯·æ³›åŸŸåè¯ä¹¦æ—¶å¿…é¡»ä½¿ç”¨è¯¥æ–¹å¼ï¼‰</p><p>ğŸŒ° ä»–çš„åŸç†å…¶å®å°±æ˜¯æ‹¿åˆ°ä½ è§£ææœåŠ¡å•†çš„æ“ä½œå¯†é’¥å»è°ƒç”¨APIè‡ªåŠ¨æ·»åŠ TXTè§£æè®°å½•æ¥éªŒè¯åŸŸåçš„æ‰€å±æƒã€‚</p><p><code>æˆ‘çš„å»ºè®®æ˜¯ï¼šé™¤éä½ éœ€è¦ä½¿ç”¨æ³›åŸŸåè¯ä¹¦ï¼Œå¦åˆ™æ²¡å¿…è¦ä½¿ç”¨dnsæ–¹å¼ï¼Œé…ç½®å¤æ‚æ˜¯æ¬¡è¦çš„ï¼Œä¸»è¦è¿˜æ˜¯æ€•APIå¯†é’¥åœ¨ä¸ç»æ„é—´è¢«æ³„æ¼è€Œé€ æˆä¸å¿…è¦çš„éº»çƒ¦ã€‚ï¼ˆè¿™é‡Œä¸æ˜¯æŒ‡acmeæ³„éœ²å¯†é’¥ï¼Œä¸»è¦æ˜¯è¯´ä½ è‡ªå·±ä¸ç»æ„é—´çš„æ³„æ¼ï¼‰</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acme.sh </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Bootå•åŒ…å°é¡¹ç›®ç®¡ç†æ–¹æ¡ˆ</title>
      <link href="/post/2020/07/04/30705/"/>
      <url>/post/2020/07/04/30705/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€æ–‡ç« èƒŒæ™¯"><a href="#1ã€æ–‡ç« èƒŒæ™¯" class="headerlink" title="1ã€æ–‡ç« èƒŒæ™¯"></a>1ã€æ–‡ç« èƒŒæ™¯</h3><p>17å¹´å·¦å³åˆšå‚åŠ å·¥ä½œæ—¶çš„æ—¶å€™æ¥è§¦çš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ˜¯é‡‡ç”¨SSMå¼€å‘çš„ï¼Œé‚£ä¸ªæ—¶å€™å…¬å¸é¡¹ç›®ä¸€èˆ¬çš„éƒ¨ç½²æ–¹å¼ä¸ºæ‰“waråŒ…æ”¾åˆ°tomcatä¸Šï¼Œä½¿ç”¨tomcat binä¸‹çš„å„ç§è„šæœ¬å»ç®¡ç†tomcatæœåŠ¡ã€‚åæ¥ä¸»æµå¼€å‘æ¸æ¸çš„å¾€çš„springbooté æ‹¢ï¼Œä»ä¹‹å‰çš„æ‰“waråŒ…ä¸Šä¼ tomcatä¸­åˆ°æ‰“jaråŒ…ç›´æ¥è¿è¡Œã€‚è¿™ä¸­é—´æˆ‘ä¸€ç›´æ„Ÿè§‰å¾ˆä¸æ–¹ä¾¿ï¼Œä¸€ç›´åœ¨æ‰¾ä¸€ç§æ¯”è¾ƒæ–¹ä¾¿çš„å•åŒ…å°é¡¹ç›®ç®¡ç†æ–¹æ¡ˆã€‚</p><h3 id="2ã€jaråŒ…ç®¡ç†1-0"><a href="#2ã€jaråŒ…ç®¡ç†1-0" class="headerlink" title="2ã€jaråŒ…ç®¡ç†1.0"></a>2ã€jaråŒ…ç®¡ç†1.0</h3><p>åˆšæ¥è§¦springbootæ—¶ï¼Œç½‘ä¸Šçš„å„ç§åšæ–‡éƒ½æ˜¯æ•™ä½ ä½¿ç”¨nohupå»ç®¡ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">nohup</span> java -jar xxx.jar -jvm parameter &amp;</span><br></pre></td></tr></table></figure><p>nohupï¼šè‹±æ–‡å…¨ç§°no hang upï¼ˆä¸æŒ‚èµ·ï¼‰ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œã€‚ nohup å‘½ä»¤ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ˆéé‡å®šå‘æ—¶ï¼‰ï¼Œä¼šè¾“å‡ºä¸€ä¸ªåå«nohup.out çš„æ–‡ä»¶åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œå¦‚æœå½“å‰ç›®å½•çš„nohup.out æ–‡ä»¶ä¸å¯å†™ï¼Œè¾“å‡ºé‡å®šå‘åˆ°$HOME&#x2F;nohup.out æ–‡ä»¶ä¸­ã€‚</p><p>è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šä½ éœ€è¦è®°ä½æ¯ä¸ªjaråŒ…çš„æ”¾ç½®ä½ç½®ï¼Œæ¯æ¬¡æ“ä½œéƒ½è¦å…ˆè¿›åˆ°è¿™ä¸ªç›®å½•ã€‚å¹¶ä¸”éœ€è¦é¢å¤–çš„ä¿æŠ¤æªæ–½æ¥é¿å…æœåŠ¡æ­»æ‰ä¹‹åæ— æ³•è‡ªè¡Œæ¢å¤ã€‚</p><h3 id="3ã€jaråŒ…ç®¡ç†2-0"><a href="#3ã€jaråŒ…ç®¡ç†2-0" class="headerlink" title="3ã€jaråŒ…ç®¡ç†2.0"></a>3ã€jaråŒ…ç®¡ç†2.0</h3><p>springå®˜ç½‘æœ‰ä¸€ä¸ªæ–‡æ¡£å«åš <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing">Deploying Spring Boot Applications</a> è¿™é‡Œé¢çš„2.2.2. Installation as a systemd Serviceä¸­ä»‹ç»äº†å¦‚ä½•å°†jarä½œä¸ºç³»ç»ŸæœåŠ¡å»è¿è¡Œï¼Œä»–æä¾›çš„ä¾‹å­æ¯”è¾ƒç®€å•ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=myapp</span><br><span class="line">After=syslog.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=myapp</span><br><span class="line">ExecStart=/var/myapp/myapp.jar</span><br><span class="line">SuccessExitStatus=143</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">æ–‡æ¡£</a> æ ¹æ®éœ€è¦å»å¡«å……ä½ çš„.serviceæ–‡ä»¶ã€‚<br>serviceæ–‡ä»¶é…ç½®å®Œæˆä¹‹åéœ€è¦æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload <span class="comment">#åˆ·æ–°æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">systemctl start/stop/restart xxx.service <span class="comment">#å¯åŠ¨åœæ­¢é‡å¯æœåŠ¡</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„åŠŸèƒ½ï¼šæ¯”å¦‚æˆ‘ä»¬çš„jaræ”¾åœ¨&#x2F;usr&#x2F;local&#x2F;app&#x2F;xxx.jar<br>æˆ‘ä»¬åªè¦åœ¨æ­¤jaråŒ…åŒç›®å½•ä¸‹åˆ›å»ºxxx.confå³&#x2F;usr&#x2F;local&#x2F;app&#x2F;xxx.confï¼Œè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ä½œä¸ºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥exportä½ æƒ³è¦çš„ç¯å¢ƒå˜é‡ï¼Œé…åˆé¡¹ç›®ymlä¸­${ENV_KEY}ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> SERVER_ACTIVE=prod</span><br><span class="line"><span class="built_in">export</span> SERVER_PORT=8080</span><br><span class="line"><span class="built_in">export</span> DB_HOST=172.17.20.7</span><br><span class="line"><span class="built_in">export</span> DB_PORT=65432</span><br><span class="line"><span class="built_in">export</span> JAVA_OPTS=<span class="string">&quot;-Xmx5440M -Xms5440M -XX:MaxMetaspaceSize=512M -XX:MetaspaceSize=512M -XX:+UseG1GC -XX:MaxGCPauseMillis=100&quot;</span></span><br></pre></td></tr></table></figure><p>âš ï¸âš ï¸âš ï¸ pom.xmlæ–‡ä»¶ä¸­spring-boot-maven-pluginçš„<configuration>é…ç½®å—ä¸­éœ€è¦é…ç½®executableå¯æ‰§è¡Œä¸ºtrueã€‚æ•´ä½“ä¿®æ”¹åçš„æ•ˆæœç±»ä¼¼è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.5.8&lt;/version&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;executable&gt;<span class="literal">true</span>&lt;/executable&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><h3 id="4ã€ä¼˜åŒ–jaråŒ…å¤§å°"><a href="#4ã€ä¼˜åŒ–jaråŒ…å¤§å°" class="headerlink" title="4ã€ä¼˜åŒ–jaråŒ…å¤§å°"></a>4ã€ä¼˜åŒ–jaråŒ…å¤§å°</h3><p>åœ¨æ„å»ºå•jaråŒ…æ—¶ï¼Œå› ä¸ºæ‰€æœ‰çš„ä¾èµ–å’Œä»£ç éƒ½æ„å»ºåˆ°ä¸€ä¸ªjaråŒ…ä¸­å¯¼è‡´å®¹é‡è¿‡å¤§ï¼Œå¹¶ä¸”åœ¨é¡¹ç›®è¿­ä»£æ—¶ä¾èµ–ä¸€èˆ¬æ²¡æœ‰å¾ˆå¤§çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥å°±éœ€è¦é…ç½®mavenå°†ä¾èµ–å’Œä»£ç åˆ†å¼€æ„å»ºï¼Œè¿™æ ·æ¯æ¬¡æ„å»ºå‡ºçš„ä»£ç åŒ…åªæœ‰ä¸åˆ°1Mçš„å¤§å°ï¼Œèƒ½å¾ˆæ–¹ä¾¿çš„ä¸Šä¼ ã€‚ä¾èµ–æœ‰å¢åˆ çš„å¯ä»¥ç›´æ¥åœ¨ä¾èµ–æ–‡ä»¶å¤¹ä¸­æ“ä½œã€‚</p><h2 id="è¡¥å……ï¼š"><a href="#è¡¥å……ï¼š" class="headerlink" title="è¡¥å……ï¼š"></a>è¡¥å……ï¼š</h2><h3 id="pm2æˆ–åŒç±»å‹è¿›ç¨‹ç®¡ç†å·¥å…·-supervisorç­‰"><a href="#pm2æˆ–åŒç±»å‹è¿›ç¨‹ç®¡ç†å·¥å…·-supervisorç­‰" class="headerlink" title="pm2æˆ–åŒç±»å‹è¿›ç¨‹ç®¡ç†å·¥å…·(supervisorç­‰)"></a>pm2æˆ–åŒç±»å‹è¿›ç¨‹ç®¡ç†å·¥å…·(supervisorç­‰)</h3><p>pm2æ˜¯ä¸€ä¸ªnodejsçš„è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç®¡ç†nodejsè¿›ç¨‹ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç®¡ç†javaè¿›ç¨‹ã€‚pm2çš„å®‰è£…å’Œä½¿ç”¨å¯ä»¥å‚è€ƒ <a href="https://pm2.keymetrics.io/">pm2å®˜ç½‘</a> ã€‚pm2çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç®¡ç†å¤šä¸ªè¿›ç¨‹ï¼Œä¸‹é¢ç®€å•è®²ä¸€ä¸‹å®‰è£…å’Œä½¿ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…nvm ç”¨æ¥å®‰è£…å’Œç®¡ç†nodejs</span></span><br><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh | bash</span><br><span class="line"><span class="comment"># å®‰è£…nodejs</span></span><br><span class="line">nvm install node</span><br><span class="line"><span class="comment"># å…¨å±€å®‰è£…pm2</span></span><br><span class="line">npm install pm2 -g</span><br><span class="line"><span class="comment"># æ ¹æ®å›æ˜¾ä¿¡æ¯æ‰§è¡Œå‘½ä»¤åå¯ä»¥é…ç½®pm2è‡ªå¯åŠ¨</span></span><br><span class="line">pm2 startup</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œå¦‚æœæ˜¯å®ˆæŠ¤ä¸å¤ªå¤æ‚çš„å¯æ‰§è¡Œç¨‹åºå¯ä»¥ç›´æ¥ <code>pm2 start ./program --name name -- --arg arg</code>ï¼Œâ€“åé¢çš„å‚æ•°ä¼šä¼ é€’è¿›å»ã€‚</p><p>å¦‚æœæ˜¯javaè¿™ç§å¯åŠ¨æ¯”è¾ƒå¤æ‚çš„ç¨‹åºï¼Œå¯ä»¥å…ˆå†™ä¸ªjsæ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>pm2 start app.js</code> æ¥å¯åŠ¨ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å†™app.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;app&quot;</span>,</span><br><span class="line">    <span class="string">&quot;script&quot;</span>: <span class="string">&quot;/usr/bin/java&quot;</span>, <span class="comment"># javaå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="string">&quot;args&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;-jar&quot;</span>,</span><br><span class="line">        <span class="string">&quot;/usr/local/app.jar&quot;</span>, <span class="comment"># jaråŒ…è·¯å¾„</span></span><br><span class="line">        <span class="string">&quot;--spring.profiles.active=prod&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;exec_interpreter&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;exec_mode&quot;</span>: <span class="string">&quot;fork&quot;</span>,</span><br><span class="line">    <span class="string">&quot;error_file&quot;</span> : <span class="string">&quot;/var/logs/app-error.log&quot;</span>,</span><br><span class="line">    <span class="string">&quot;out_file&quot;</span>   : <span class="string">&quot;/var/logs/app.log&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 list <span class="comment"># æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€</span></span><br><span class="line">pm2 start app <span class="comment"># å¯åŠ¨appè¿›ç¨‹</span></span><br><span class="line">pm2 stop app <span class="comment"># åœæ­¢appè¿›ç¨‹</span></span><br><span class="line">pm2 restart app <span class="comment"># é‡å¯appè¿›ç¨‹</span></span><br><span class="line">pm2 delete app <span class="comment"># åˆ é™¤appè¿›ç¨‹</span></span><br><span class="line">pm2 monit <span class="comment"># æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿›ç¨‹çš„èµ„æºå ç”¨æƒ…å†µ</span></span><br><span class="line">pm2 <span class="built_in">log</span> <span class="comment"># æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿›ç¨‹çš„æ—¥å¿—</span></span><br></pre></td></tr></table></figure><p>pm2è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šè´Ÿè½½å‡è¡¡ã€æ—¥å¿—åˆ†å‰²ã€å¯è§†åŒ–ç›‘æ§ç­‰ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å»å®˜ç½‘å­¦ä¹ ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> pm2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°·æ­Œé»‘è¯­æ³•</title>
      <link href="/post/2020/04/22/26950/"/>
      <url>/post/2020/04/22/26950/</url>
      
        <content type="html"><![CDATA[<h2 id="è°·æ­Œé»‘è¯­æ³•"><a href="#è°·æ­Œé»‘è¯­æ³•" class="headerlink" title="è°·æ­Œé»‘è¯­æ³•"></a>è°·æ­Œé»‘è¯­æ³•</h2><p>ç®€ä»‹ï¼šåŸæœ¬æ˜¯googleçš„æœç´¢å¼•æ“ä¸­ä½¿ç”¨å¿«é€ŸæŸ¥è¯¢çš„è¯­æ³•ï¼Œåæ¥å‘å±•æˆè°·æ­Œé»‘å®¢ (Google hacking)ï¼Œä¹Ÿå«Google dorkingï¼Œæ˜¯ä¸€ç§åˆ©ç”¨è°·æ­Œæœç´¢å’Œå…¶ä»–è°·æ­Œåº”ç”¨ç¨‹åºæ¥å‘ç°ç½‘ç«™é…ç½®å’Œè®¡ç®—æœºä»£ç ä¸­çš„å®‰å…¨æ¼æ´çš„è®¡ç®—æœºé»‘å®¢æŠ€æœ¯ã€‚</p><h4 id="åŸºæœ¬è„‘å›¾"><a href="#åŸºæœ¬è„‘å›¾" class="headerlink" title="åŸºæœ¬è„‘å›¾"></a>åŸºæœ¬è„‘å›¾</h4><p><img src="https://up.eber.vip/Think-Me/img/main/upload/593188852.jpg" alt="Jietu20200422-192337@2x.jpg"></p><p>åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š<br>site:csdn.net filetype:doc  åœ¨æŒ‡å®šç½‘ç«™æœç´¢æŒ‡å®šåç¼€çš„æ–‡ä»¶<br>site:xx.com inurl:login  æ‰¾ç™»å½•å…¥å£<br>site:xx.com inurl:admin  å°è¯•æ‰¾ä¸€ä¸‹ç®¡ç†å‘˜ç™»å½•çš„å…¥å£</p><p>è¿˜æœ‰ä¸‹é¢ä¸€äº›å¦™ç”¨è‡ªå·±ç»†ç»†å“å“ˆ<br>site:wcipeg.com intitle:â€index ofâ€ etc<br>intitle:â€Index ofâ€ .sh_history<br>intitle:â€Index ofâ€ .bash_history<br>intitle:â€index ofâ€ passwd<br>intitle:â€index ofâ€ people.lst<br>intitle:â€index ofâ€ pwd.db<br>intitle:â€index ofâ€ etc&#x2F;shadow<br>intitle:â€index ofâ€ spwd<br>intitle:â€index ofâ€ master.passwd<br>intitle:â€index ofâ€ htpasswd<br>â€œ# -FrontPage-â€ inurl:service.pwd<br>ç­‰ç­‰ä¸€äº›ç›¸å…³çš„è¯­æ³•ï¼Œå¯ä»¥å»google.comä¸Šæœåˆ°ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚<br>è¿™é‡Œå†æ¨èä¸€ä¸ªç½‘ç«™ <a href="https://www.exploit-db.com/google-hacking-database">Google Hacking Database</a> ï¼ˆå¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰</p><h4 id="å¦‚ä½•é¢„é˜²"><a href="#å¦‚ä½•é¢„é˜²" class="headerlink" title="å¦‚ä½•é¢„é˜²"></a>å¦‚ä½•é¢„é˜²</h4><p>å¯¹äºæ™®é€šç«™é•¿è€Œè¨€æ›´æƒ³äº†è§£çš„æ˜¯å¦‚ä½•é¢„é˜²</p><ul><li><p><strong>â€”â€”<em>robots.txt</em>â€”â€”</strong><br>ç«™ç‚¹æ ¹ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªrobots.txtå†™è§„åˆ™ä»¥é¿å…æœç´¢å¼•æ“çš„çˆ¬è™«è·å–æŸäº›æ•æ„Ÿçš„ä¿¡æ¯ã€‚(è¿™æ ·å¯ä»¥é¿å…æ­£è§„çš„çˆ¬è™«å»æŠ“å–ï¼Œä½†æ˜¯æŸäº›çˆ¬è™«å¹¶ä¸æŒ‰ç…§è§„çŸ©åšäº‹ã€‚)</p></li><li><p><strong>â€”â€”<em>é€šè¿‡nginxé…ç½®é˜²æ­¢çˆ¬è™«</em>â€”â€”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if ($http_user_agent ~* &quot;qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot&quot;)</span><br><span class="line">&#123;</span><br><span class="line">return 403;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥é…ç½®è¦åŠ åœ¨&#x2F;å…¨å±€é€šè¿‡è§„åˆ™çš„ä¸Šé¢ï¼ˆnginxé…ç½®è§„åˆ™ï¼šèŒƒå›´å°çš„è§„åˆ™æ”¾åœ¨ä¸Šé¢ã€èŒƒå›´å¤§çš„æ”¾åœ¨ä¸‹é¢ï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è°·æ­Œé»‘è¯­æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå’Œdocker-composeçš„å®‰è£…</title>
      <link href="/post/2019/07/03/32355/"/>
      <url>/post/2019/07/03/32355/</url>
      
        <content type="html"><![CDATA[<h3 id="å…ˆä»‹ç»ä¸€ä¸‹dockeræ˜¯å•¥ï¼š"><a href="#å…ˆä»‹ç»ä¸€ä¸‹dockeræ˜¯å•¥ï¼š" class="headerlink" title="å…ˆä»‹ç»ä¸€ä¸‹dockeræ˜¯å•¥ï¼š"></a>å…ˆä»‹ç»ä¸€ä¸‹dockeræ˜¯å•¥ï¼š</h3><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨æˆ–Windows æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚  </p><h3 id="å†è¯´ä¸€ä¸‹docker-composeæ˜¯å•¥ï¼š"><a href="#å†è¯´ä¸€ä¸‹docker-composeæ˜¯å•¥ï¼š" class="headerlink" title="å†è¯´ä¸€ä¸‹docker composeæ˜¯å•¥ï¼š"></a>å†è¯´ä¸€ä¸‹docker composeæ˜¯å•¥ï¼š</h3><p>docker composeæ˜¯dockerä¸‰å‰‘å®¢ä¹‹ä¸€ï¼Œç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šä¸ªå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡docker composeï¼Œä½ å¯ä»¥ä½¿ç”¨YMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä»YMLæ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚Composeå¯¹åº”çš„å‘½ä»¤ä¸ºdocker-composeã€‚<br>ç®€å•ä¸€ç‚¹è¯´å°±æ˜¯æŠŠä¸€å †dockerç»„åˆç¼–æ’åˆ°ä¸€èµ·ä»¥å®ç°å¿«é€Ÿç®¡ç†ã€‚</p><h4 id="æœ¬æ–‡çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘é…ç½®swarmï¼Œæ‰€ä»¥ç”¨çš„ç‰ˆæœ¬éƒ½æ˜¯æ¯”è¾ƒæ–°çš„ã€‚å¦‚æœæ‚¨åªæ˜¯å•çº¯çš„ä½¿ç”¨dockeræˆ–è€…docker-composeåˆ™æ— éœ€ç‰¹åˆ«æ–°çš„ç‰ˆæœ¬"><a href="#æœ¬æ–‡çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘é…ç½®swarmï¼Œæ‰€ä»¥ç”¨çš„ç‰ˆæœ¬éƒ½æ˜¯æ¯”è¾ƒæ–°çš„ã€‚å¦‚æœæ‚¨åªæ˜¯å•çº¯çš„ä½¿ç”¨dockeræˆ–è€…docker-composeåˆ™æ— éœ€ç‰¹åˆ«æ–°çš„ç‰ˆæœ¬" class="headerlink" title="æœ¬æ–‡çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘é…ç½®swarmï¼Œæ‰€ä»¥ç”¨çš„ç‰ˆæœ¬éƒ½æ˜¯æ¯”è¾ƒæ–°çš„ã€‚å¦‚æœæ‚¨åªæ˜¯å•çº¯çš„ä½¿ç”¨dockeræˆ–è€…docker composeåˆ™æ— éœ€ç‰¹åˆ«æ–°çš„ç‰ˆæœ¬"></a><font color=red>æœ¬æ–‡çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘é…ç½®swarmï¼Œæ‰€ä»¥ç”¨çš„ç‰ˆæœ¬éƒ½æ˜¯æ¯”è¾ƒæ–°çš„ã€‚å¦‚æœæ‚¨åªæ˜¯å•çº¯çš„ä½¿ç”¨dockeræˆ–è€…docker composeåˆ™æ— éœ€ç‰¹åˆ«æ–°çš„ç‰ˆæœ¬</font></h4><h3 id="å¥½äº†ï¼Œå›å½’æ­£é¢˜"><a href="#å¥½äº†ï¼Œå›å½’æ­£é¢˜" class="headerlink" title="å¥½äº†ï¼Œå›å½’æ­£é¢˜"></a>å¥½äº†ï¼Œå›å½’æ­£é¢˜</h3><h4 id="1ã€å¦‚ä½•å®‰è£…docker"><a href="#1ã€å¦‚ä½•å®‰è£…docker" class="headerlink" title="1ã€å¦‚ä½•å®‰è£…docker"></a>1ã€å¦‚ä½•å®‰è£…docker</h4><p>å…ˆæŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ä»¥ç¡®å®šå…¼å®¹å“ªäº›dockerç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-1062.9.1.el7.x86_64</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™ä¸ªåœ°æ–¹æ˜¾ç¤ºå†…æ ¸ç‰ˆæœ¬ä¸º3.10.0åˆ™æœ€å¤§æ”¯æŒåˆ°docker-18.03.1.ceç‰ˆæœ¬<br>æˆ‘ä»¬æƒ³å®‰è£…æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ã€å› ä¸ºæ—§ç‰ˆæœ¬ä¸æ”¯æŒæœ‰äº›æ–°ç‰¹æ€§ã€‘ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦å‡çº§æœåŠ¡å™¨çš„å†…æ ¸ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></span><br><span class="line">[root@ecs ~]<span class="comment"># rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></span><br><span class="line">[root@ecs ~]<span class="comment"># yum --enablerepo=elrepo-kernel install  kernel-ml-devel kernel-ml -y</span></span><br><span class="line">[root@ecs ~]<span class="comment"># grub2-set-default 0</span></span><br><span class="line">[root@ecs ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨æ­£å¸¸é‡å¯ä¹‹åå¯ä»¥çœ‹ä½ å¿ƒæƒ…é€‰æ‹©æ˜¯å¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å»åˆ é™¤æ—§å†…æ ¸ã€å¯é€‰é¡¹ã€‘</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum remove kernel</span></span><br></pre></td></tr></table></figure><p>####ok,ç°åœ¨å¯ä»¥å¼€å§‹å®‰è£…dockeräº†<br>å…ˆçœ‹çœ‹æ˜¯å¦æœ‰æ—§ç‰ˆæœ¬çš„dockerï¼Œå¦‚æœæœ‰å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å»å¸è½½</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum remove docker docker-common docker-selinux docker-engine docer-io</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆæˆ‘ä»¬è¦æ›´æ–°ä¸€ä¸‹yumåŒ…<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum update -y</span></span><br></pre></td></tr></table></figure></li><li>å…¶æ¬¡è¦å®‰è£…è¦ä¾èµ–çš„è½¯ä»¶åŒ…ã€yum-util æä¾› yum-config-manager åŠŸèƒ½ï¼Œ å¦å¤–ä¸¤ä¸ªæ˜¯ devicemapper é©±åŠ¨ä¾èµ–ã€‘<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br></pre></td></tr></table></figure></li><li>ç„¶åè®¾ç½®yumæº<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></span><br></pre></td></tr></table></figure></li><li>å†æŸ¥çœ‹ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼Œé€‰æ‹©ä½ æƒ³è¦çš„ç‰ˆæœ¬å»å®‰è£…<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum list docker-ce --showduplicates | sort -r</span></span><br></pre></td></tr></table></figure></li><li>è¿™é‡Œæˆ‘éœ€è¦docker-18.06.3.ceç‰ˆæœ¬ï¼Œä½ ä»¬æŒ‰ç…§ä½ ä»¬çš„éœ€æ±‚å»é€‰æ‹©ç‰ˆæœ¬<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># yum install -y docker-ce-18.06.3.ce</span></span><br></pre></td></tr></table></figure></li><li>æœ€åå¯åŠ¨å¹¶åŠ å…¥å¼€æœºè‡ªå¯<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># systemctl start docker</span></span><br><span class="line">[root@ecs ~]<span class="comment"># systemctl enable docker</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2ã€å¦‚ä½•å®‰è£…docker-compose"><a href="#2ã€å¦‚ä½•å®‰è£…docker-compose" class="headerlink" title="2ã€å¦‚ä½•å®‰è£…docker compose"></a>2ã€å¦‚ä½•å®‰è£…docker compose</h4><p>é€šè¿‡è®¿é—® <a href="https://github.com/docker/compose/releases">https://github.com/docker/compose/releases</a> å¯ä»¥æŸ¥çœ‹ç°æœ‰çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œå»é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ã€‚<br>è¿™é‡Œç”±äºæˆ‘éœ€è¦æœ€æ–°çš„3.7çš„ç‰¹æ€§ï¼Œæ‰€ä»¥åˆšæ‰dockerå®‰è£…çš„ç‰ˆæœ¬æ˜¯18.06.3ï¼Œdocker-composeæˆ‘ä¹Ÿé€‰æ‹©æœ€æ–°çš„ã€1.24.1ç‰ˆæœ¬ã€‘å»å®‰è£…ä»¥æ”¯æŒæ–°ç‰¹æ€§ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ecs ~]<span class="comment"># curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></span><br><span class="line">[root@ecs ~]<span class="comment"># chmod +x /usr/local/bin/docker-compose</span></span><br><span class="line">[root@ecs ~]<span class="comment"># docker-compose --version</span></span><br><span class="line">docker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ˜¾ç¤ºdocker-composeçš„ç‰ˆæœ¬å³ä¸ºå®‰è£…æˆåŠŸã€‚</p><h5 id="æ³¨æ„ï¼š-dockerå’Œdocker-composeé…ç½®æ–‡ä»¶é‡Œé¢ç‰ˆæœ¬è¦æŒ‰ç…§ä¸‹é¢è¡¨æ ¼è¦æ±‚å¯¹åº”"><a href="#æ³¨æ„ï¼š-dockerå’Œdocker-composeé…ç½®æ–‡ä»¶é‡Œé¢ç‰ˆæœ¬è¦æŒ‰ç…§ä¸‹é¢è¡¨æ ¼è¦æ±‚å¯¹åº”" class="headerlink" title="æ³¨æ„ï¼š  dockerå’Œdocker composeé…ç½®æ–‡ä»¶é‡Œé¢ç‰ˆæœ¬è¦æŒ‰ç…§ä¸‹é¢è¡¨æ ¼è¦æ±‚å¯¹åº”"></a><font color=red>æ³¨æ„ï¼š</font>  dockerå’Œdocker composeé…ç½®æ–‡ä»¶é‡Œé¢ç‰ˆæœ¬è¦æŒ‰ç…§ä¸‹é¢è¡¨æ ¼è¦æ±‚å¯¹åº”</h5><p>å³docker-compose.ymlé…ç½®æ–‡ä»¶çš„ç¬¬ä¸€è¡Œçš„è¿™ä¸ªç‰ˆæœ¬å·</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">composeæ–‡ä»¶ç‰ˆæœ¬</th><th align="center">dockerç‰ˆæœ¬</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">1.9.0+</td></tr><tr><td align="left">2.0</td><td align="center">1.10.0+</td></tr><tr><td align="left">2.1</td><td align="center">1.12.0+</td></tr><tr><td align="left">2.2, 3.0, 3.1, 3.2</td><td align="center">1.13.0+</td></tr><tr><td align="left">2.3, 3.3, 3.4, 3.5</td><td align="center">17.06.0+</td></tr><tr><td align="left">2.4</td><td align="center">17.12.0+</td></tr><tr><td align="left">3.6</td><td align="center">18.02.0+</td></tr><tr><td align="left">3.7</td><td align="center">18.06.0+</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Bootä¸Dockeréƒ¨ç½²</title>
      <link href="/post/2019/05/02/1879/"/>
      <url>/post/2019/05/02/1879/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¬¬ä¸€ç§ï¼šç»“åˆç¼–è¾‘å™¨ä½¿ç”¨"><a href="#ç¬¬ä¸€ç§ï¼šç»“åˆç¼–è¾‘å™¨ä½¿ç”¨" class="headerlink" title="ç¬¬ä¸€ç§ï¼šç»“åˆç¼–è¾‘å™¨ä½¿ç”¨"></a>ç¬¬ä¸€ç§ï¼šç»“åˆç¼–è¾‘å™¨ä½¿ç”¨</h3><p><em><strong>1ã€å¼€å¯Dockerè¿œç¨‹è®¿é—®</strong></em><br>é¦–å…ˆéœ€è¦å¼€å¯dockerè¿œç¨‹è®¿é—®åŠŸèƒ½ï¼Œä»¥ä¾¿å¯ä»¥è¿›è¡Œè¿œç¨‹æ“ä½œã€‚<br>ä»¥centos7ä¸ºä¾‹ï¼šæ‰“å¼€&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.serviceæ–‡ä»¶ï¼Œä¿®æ”¹ExecStartè¿™è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd  -H tcp://0.0.0.0:2375  -H unix:///var/run/docker.sock</span><br></pre></td></tr></table></figure><p>é‡å¯åç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload    </span><br><span class="line">systemctl restart docker.service </span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl http://127.0.0.1:2375/info</span><br></pre></td></tr></table></figure><p><em><strong>2ã€æ–°å»ºmavenå·¥ç¨‹</strong></em><br>ä¸»è¦éƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.4.14&lt;/version&gt;</span><br><span class="line">    &lt;configuration&gt;</span><br><span class="line">        &lt;imageName&gt;$&#123;docker.image.prefix&#125;/$&#123;project.artifactId&#125;&lt;/imageName&gt;</span><br><span class="line">        &lt;dockerDirectory&gt;src/main/docker&lt;/dockerDirectory&gt;</span><br><span class="line">        &lt;dockerHost&gt;http://10.100.0.111:2375&lt;/dockerHost&gt;</span><br><span class="line">        &lt;resources&gt;</span><br><span class="line">            &lt;resource&gt;</span><br><span class="line">                &lt;targetPath&gt;/&lt;/targetPath&gt;</span><br><span class="line">                &lt;directory&gt;$&#123;project.build.directory&#125;&lt;/directory&gt;</span><br><span class="line">                &lt;include&gt;$&#123;project.build.finalName&#125;.jar&lt;/include&gt;</span><br><span class="line">            &lt;/resource&gt;</span><br><span class="line">        &lt;/resources&gt;</span><br><span class="line">    &lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>imageNameï¼šæŒ‡å®šäº†é•œåƒçš„åå­—<br>dockerDirectoryï¼šæŒ‡å®šDockerfileçš„ä½ç½®<br>dockerHostï¼šæŒ‡å®šDockerè¿œç¨‹APIåœ°å€<br>resourcesï¼šæŒ‡é‚£äº›éœ€è¦å’ŒDockerfileæ”¾åœ¨ä¸€èµ·ï¼Œåœ¨æ„å»ºé•œåƒæ—¶ä½¿ç”¨çš„æ–‡ä»¶ï¼Œä¸€èˆ¬åº”ç”¨jaråŒ…éœ€è¦çº³å…¥</p><p><em><strong>3ã€åˆ›å»ºDockerfile</strong></em><br>åœ¨src&#x2F;main&#x2F;dockerç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºDockerfileçš„æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š  ã€ä¸€å®šè¦æ³¨æ„è·¯å¾„ã€‘</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> java</span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /tmp</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> docker-springboot-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> bash -c <span class="string">&#x27;touch /app.jar&#x27;</span></span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_OPTS=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [ <span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java <span class="variable">$JAVA_OPTS</span> -Djava.security.egd=file:/dev/./urandom -jar /app.jar&quot;</span> ]</span></span><br></pre></td></tr></table></figure><p>FROM javaï¼šæŒ‡Docker Hubä¸Šå®˜æ–¹æä¾›çš„javaé•œåƒï¼Œæœ‰äº†è¿™ä¸ªåŸºç¡€é•œåƒåï¼ŒDockerfileå¯ä»¥é€šè¿‡FROMæŒ‡ä»¤ç›´æ¥è·å–å®ƒçš„çŠ¶æ€â€”â€”ä¹Ÿå°±æ˜¯åœ¨å®¹å™¨ä¸­javaæ˜¯å·²ç»å®‰è£…çš„ï¼Œæ¥ä¸‹æ¥é€šè¿‡è‡ªå®šä¹‰çš„å‘½ä»¤æ¥è¿è¡ŒSpring Bootåº”ç”¨ã€‚</p><p>VOLUME &#x2F;tmpï¼šåˆ›å»º&#x2F;tmpç›®å½•å¹¶æŒä¹…åŒ–åˆ°Dockeræ•°æ®æ–‡ä»¶å¤¹ï¼Œå› ä¸ºSpring Bootä½¿ç”¨çš„å†…åµŒTomcatå®¹å™¨é»˜è®¤ä½¿ç”¨&#x2F;tmpä½œä¸ºå·¥ä½œç›®å½•ã€‚</p><p>ADD docker-springboot-0.0.1-SNAPSHOT.jar app.jarï¼šå°†åº”ç”¨jaråŒ…å¤åˆ¶åˆ°&#x2F;app.jar</p><p>ENTRYPOINTï¼šè¡¨ç¤ºå®¹å™¨è¿è¡Œåé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤</p><p><em><strong>4ã€è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºDockeré•œåƒï¼š</strong></em><br>package docker:build</p><p><em><strong>5ã€Dockerå¯åŠ¨é•œåƒ</strong></em><br>CMDä¸­æ‰§è¡Œdocker imagesæŸ¥çœ‹é•œåƒæ˜¯å¦ä¸Šä¼ æˆåŠŸ<br>ä½¿ç”¨docker run -p 8888:8080 springboot&#x2F;docker-springbootå¯åŠ¨é•œåƒ<br>é€šè¿‡æµè§ˆå™¨èƒ½è®¿é—®å³ä¸ºæˆåŠŸ</p><p>###ç¬¬äºŒç§ï¼šå•ç‹¬ä½¿ç”¨<br>æœ‰äº›æ—¶å€™æˆ‘ä»¬åªæ˜¯ä¸´æ—¶æ„å»ºä¸€ä¸‹æ²¡å¿…è¦é‚£ä¹ˆéº»çƒ¦<br>ç›´æ¥åœ¨å«æœ‰Dockerfileçš„é¡¹ç›®mainç›®å½•ä¸‹ç›´æ¥è¿è¡Œ</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">mvn clean package docker:build</span><br></pre></td></tr></table></figure><p>å³å¯æ„å»ºå®Œæˆå¹¶è‡ªåŠ¨ä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ“å–å ç”¨CPUé«˜çš„JAVAçº¿ç¨‹ï¼Œè¿›è€Œæ‰¾å‡ºæœ‰é—®é¢˜çš„ä»£ç æ®µ</title>
      <link href="/post/2018/08/01/29233/"/>
      <url>/post/2018/08/01/29233/</url>
      
        <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šå½“ä½ çš„javaé¡¹ç›®æ€»æ˜¯å‡ºç°CPUå ç”¨å¾ˆé«˜çš„æƒ…å†µï¼ˆæœåŠ¡å™¨æ€§èƒ½æå¼±é™¤å¤–ï¼‰ï¼Œå¾ˆå¯èƒ½å› ä¸ºæŸæ®µä»£ç å‡ºç°æ­»é”ä¹‹ç±»çš„BUGè€Œå¯¼è‡´CPUå ç”¨é«˜ç”šè‡³æ•²å‘½ä»¤éƒ½å¡é¡¿ï¼åœ¨æ—¥å¿—æ— æ³•å…·ä½“æŒ‡å‘çš„æ—¶å€™ï¼Œä½ æ ¹æœ¬æ— æ³•ç¡®å®šå“ªä¸ªåœ°æ–¹å‡ºç°äº†BUGï¼Œä»è€Œä½ ä¹Ÿæ²¡æ³•å»è§£å†³ã€‚ä¸‹é¢ï¼Œå°±ä»‹ç»ä¸€ä¸ªæŠ“å–é«˜å ç”¨CPUçš„çº¿ç¨‹çš„ç®€å•æ–¹æ³•ï¼š</p><pre><code>1.è¿è¡Œtopå‘½ä»¤å–å¾—JAVAçº¿ç¨‹å·(PID)ï¼Œå‡å¦‚æ˜¯2068ï¼›2.è¿è¡Œjstack + pid å‘½ä»¤å¯¼å‡ºJAVAçº¿ç¨‹ä¿¡æ¯åˆ°resultæ–‡ä»¶ï¼Œå‘½ä»¤è¡Œä¸º3.jstack 2068&gt;result4.è¿è¡Œtop -p 2068 -H æŸ¥çœ‹CPUå ç”¨æ’åæƒ…å†µï¼Œå¹¶è®°å½•PIDï¼›5.è¿è¡Œ ./jtgrep +PID æ‰¾åˆ°çº¿ç¨‹å¤´æ–‡å­—(PIDä¸ºç¬¬3æ­¥è·å–) ï¼›6.ä½¿ç”¨vi/vimæ‰“å¼€resultï¼ŒæŸ¥è¯¢å¤´æ–‡å­—å°±èƒ½æ‰¾åˆ°ç›¸åº”çº¿ç¨‹ã€‚</code></pre><p>ä¸‹é¢ä¸ºjtgrepä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#bin/bash   </span></span><br><span class="line">nid =`python -c <span class="string">&quot;print hex(<span class="variable">$1</span>)&quot;</span>` grep -i <span class="variable">$nid</span> <span class="variable">$2</span></span><br></pre></td></tr></table></figure><p>å†™åœ¨åé¢ï¼šæ­¤æ–¹æ³•æ— é¡»å®‰è£…ä»»ä½•è½¯ä»¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ‰¾å‡ºå ç”¨CPUçš„JAVAçº¿ç¨‹ï¼Œæ˜¯å‘ç°åŒç±»é—®é¢˜çš„é¦–é€‰åŠæ³•ï¼Œä½†å¾ˆå¤šæ—¶å€™ä½ å¯èƒ½æ‰¾åˆ°çš„æ˜¯VM threadsçº¿ç¨‹æˆ–è€…GCçº¿ç¨‹ã€‚ã€‚ã€‚æ— æ³•çœŸæ­£æ‰¾åˆ°æ¯’ç˜¤ï¼Œé‚£å°±åªèƒ½å¦å¯»ä»–æ³•äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€”â€”è¿›é˜¶ç¯‡</title>
      <link href="/post/2018/07/29/60762/"/>
      <url>/post/2018/07/29/60762/</url>
      
        <content type="html"><![CDATA[<h3 id="ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€“è¿›é˜¶ç¯‡"><a href="#ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€“è¿›é˜¶ç¯‡" class="headerlink" title="ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€“è¿›é˜¶ç¯‡"></a>ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€“è¿›é˜¶ç¯‡</h3><h4 id="å¦‚ä¸‹ï¼š"><a href="#å¦‚ä¸‹ï¼š" class="headerlink" title="å¦‚ä¸‹ï¼š"></a>å¦‚ä¸‹ï¼š</h4><p><em><strong>1ã€å¯ç”¨rootç”¨æˆ·</strong></em></p><p>æŸäº›å…¬æœ‰äº‘æœåŠ¡å•†ä¸ä¼šç›´æ¥æä¾›ç»™ä½ rootè´¦æˆ·ï¼Œè€Œæ˜¯ç»™ä½ å¯†é’¥æˆ–è€…æ˜¯å…¶ä»–ç”¨æˆ·ï¼Œè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯rootè´¦æˆ·å¹¶è®¾ç½®å¯†ç ç™»å½•ã€‚</p><ul><li>å…ˆç”¨äº‘æœåŠ¡å•†æä¾›ç»™ä½ çš„å¯†é’¥æ–‡ä»¶æˆ–è€…æ˜¯å…¶ä»–ç”¨æˆ·ç™»å½•ä¸Šå»</li><li>ç„¶åæ‰§è¡Œsudo suè·å¾—rootæƒé™</li><li>æ‰§è¡Œvi &#x2F;etc&#x2F;ssh&#x2F;sshd_configæ‰¾åˆ°<strong>PermitRootLogin</strong>å’Œ<strong>PasswordAuthentication</strong>å¦‚æœè¿™ä¸¤é¡¹å‰é¢æœ‰æ³¨é‡Šåˆ™å»æ‰æ³¨é‡Šå¹¶å°†åé¢æ”¹ä¸º<strong>yes</strong></li><li>æ–‡ä»¶ä¿å­˜é€€å‡ºåæ‰§è¡Œ<strong>passwd root</strong>æŒ‰ç…§æç¤ºè¿›è¡Œrootè´¦æˆ·çš„å¯†ç è®¾ç½®(è¾“å…¥çš„å¯†ç ä¸ä¼šæ˜¾ç¤º)</li><li>æœ€åæ‰§è¡Œ<strong>systemctl restart sshd</strong>é‡å¯sshæœåŠ¡ï¼Œç„¶åå°±å¯ä»¥ç”¨rootç”¨æˆ·ç™»å½•äº†</li></ul><p><em><strong>2ã€äº†è§£Linuxçš„ç›®å½•ç»“æ„</strong></em></p><ul><li>&#x2F; ï¼šæ ¹ç›®å½•ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å’Œç›®å½•ä»æ ¹ç›®å½•å¼€å§‹ï¼Œåªæœ‰rootç”¨æˆ·å…·æœ‰è¯¥ç›®å½•ä¸‹çš„å†™æƒé™ã€‚</li><li>&#x2F;bin ï¼š ç”¨æˆ·äºŒè¿›åˆ¶æ–‡ä»¶åŒ…å«äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨çš„å¸¸è§Linuxå‘½ä»¤éƒ½ä½äºæ­¤ç›®å½•ä¸‹ã€‚ç³»ç»Ÿçš„æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„å‘½ä»¤éƒ½è®¾åœ¨è¿™é‡Œã€‚</li><li>&#x2F;boot ï¼šä¸»è¦æ”¾ç½®å¼€å…³æœºä¼šä½¿ç”¨çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬Linux å†…æ ¸æ–‡ä»¶ä»¥åŠå¼€å…³æœºèœå•ä¸å¼€æœºæ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ã€‚</li><li>&#x2F;dev ï¼šåœ¨Linux ç³»ç»Ÿä¸­æ‰€æœ‰çš„è®¾å¤‡ä¸æ¥å£è®¾å¤‡éƒ½æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸­ã€‚åªè¦è®¿é—®è¿™ä¸ªç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶å°±ç›¸å½“äºè®¿é—®æŸä¸ªè®¾å¤‡ã€‚</li><li>&#x2F;etc ï¼šæ‰€æœ‰ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚æ¯”å¦‚è®¾ç½®è¿è¡Œçº§åˆ«ã€‚</li><li>&#x2F;home ï¼šå­˜æ”¾æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linux ç³»ç»Ÿä¸­æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åä»¥è´¦å·ç”¨æˆ·åå‘½åã€‚</li><li>&#x2F;lib ï¼šç³»ç»Ÿå¼€æœºæ‰€éœ€è¦çš„æœ€åŸºæœ¬çš„åŠ¨æ€é“¾æ¥å…±äº«åº“ï¼ŒåŠŸèƒ½ç±»ä¼¼äºWindows ä¸­çš„DLL æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚</li><li>&#x2F;lost + found ï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬æ˜¯ç©ºçš„ï¼Œå½“ç”¨æˆ·éæ³•å…³æœºåä¼šä¿å­˜ä¸€äº›æ–‡ä»¶ã€‚</li><li>&#x2F;misc ï¼šæŒ‚è½½å¤–éƒ¨è®¾å¤‡</li><li>&#x2F;media ï¼šLinux ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚U ç›˜ã€å…‰é©±ç­‰ï¼Œå½“è¯†åˆ«åLinux ä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚</li><li>&#x2F;mnt ï¼šä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚åœ¨åœ¨è¯¥ç›®å½•ä¸­ã€‚</li><li>&#x2F;opt ï¼šç»™ä¸»æœºå®‰è£…é¢å¤–è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯ç©ºçš„ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†æ•°æ®åº“å®‰è£…åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚</li><li>&#x2F;proc ï¼šè¿™ä¸ªç›®å½•ä¸Šæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚</li><li>&#x2F;root ï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜çš„ä¸»ç›®å½•ã€‚</li><li>&#x2F;sbin ï¼šSuper Binçš„æ„æ€ï¼Œ ç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå°±åƒ&#x2F;binï¼Œ&#x2F;sbinåŒæ ·ä¹ŸåŒ…å«äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹çš„linuxå‘½ä»¤é€šå¸¸ç”±ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œç»´æŠ¤ã€‚</li><li>&#x2F;selinux ï¼šè¿™ä¸ªç›®å½•æ˜¯Redhet ä¸CentOS æ‰€ç‰¹æœ‰çš„ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œç±»ä¼¼äºé˜²ç«å¢™ã€‚</li><li>&#x2F;srv ï¼šservice çš„ç¼©å†™ï¼Œè¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚</li><li>&#x2F;sys ï¼šè¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6 å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿsysfsã€‚</li><li>&#x2F;tmp ï¼šè¯¥ç›®å½•ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶ã€‚</li><li>&#x2F;usr ï¼šå¾ˆé‡è¦çš„ä¸€ä¸ªç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚ç±»ä¼¼äºWindows ä¸­çš„program files ç›®å½•ã€‚</li><li>&#x2F;var ï¼šè¿™ä¸ªç›®å½•å­˜æ”¾ç€åœ¨ä¸æ–­è¢«æ‰©å……çš„æ–‡ä»¶ã€‚æˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸éœ€è¦è¢«ä¿®æ”¹çš„æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ä¸€äº›æ—¥å¿—æ–‡ä»¶ç­‰ã€‚</li></ul><p><em><strong>3ã€äº†è§£æ–‡ä»¶æƒé™</strong></em><br>ä½œä¸ºå°ç™½çš„ä½ å¾€å¾€ä¸ä¼šè‡ªå·±å»å†™shellè„šæœ¬ï¼Œç»å¸¸å»ç½‘ä¸Šæ‰¾åˆ«äººå†™å¥½çš„ç›¸åŒåŠŸèƒ½çš„è„šæœ¬ï¼Œè¿™æ—¶ä½ ä¸‹è½½ä¸‹æ¥å‡†å¤‡æ‰§è¡Œçš„æ—¶å€™å‘ç°æ— æ³•æ‰§è¡Œã€‚</p><ul><li>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæ”¹ä¸ºé‰´ä¸å…·å¤‡æ‰§è¡Œæƒé™æ‰€ä»¥æ— æ³•è¿è¡Œã€‚</li><li>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç®€å•çš„äº†è§£ä¸€ä¸‹æ–‡ä»¶çš„æƒé™<br>å¯èƒ½æƒé™å°±åƒä¸‹é¢è¿™æ ·ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-     rw-    r--    r--</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¦‚ä½•æ›´æ”¹æ–‡ä»¶çš„æƒé™å‘¢ï¼Ÿ<br>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦chmodå‘½ä»¤äº†<br>è¯­æ³•<br>chmod [-cfvR] [â€“help] [â€“version] mode fileâ€¦<br>å‚æ•°è¯´æ˜<br>mode : æƒé™è®¾å®šå­—ä¸²ï¼Œæ ¼å¼å¦‚ä¸‹ :</p><p>[ugoaâ€¦][[+-&#x3D;][rwxX]â€¦][,â€¦]<br>å…¶ä¸­ï¼š</p><p>u è¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼Œg è¡¨ç¤ºä¸è¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å±äºåŒä¸€ä¸ªç¾¤ä½“(group)è€…ï¼Œo è¡¨ç¤ºå…¶ä»–ä»¥å¤–çš„äººï¼Œa è¡¨ç¤ºè¿™ä¸‰è€…çš†æ˜¯ã€‚</p><ul><li>è¡¨ç¤ºå¢åŠ æƒé™ã€- è¡¨ç¤ºå–æ¶ˆæƒé™ã€&#x3D; è¡¨ç¤ºå”¯ä¸€è®¾å®šæƒé™ã€‚<br>r è¡¨ç¤ºå¯è¯»å–ï¼Œw è¡¨ç¤ºå¯å†™å…¥ï¼Œx è¡¨ç¤ºå¯æ‰§è¡Œï¼ŒX è¡¨ç¤ºåªæœ‰å½“è¯¥æ–‡ä»¶æ˜¯ä¸ªå­ç›®å½•æˆ–è€…è¯¥æ–‡ä»¶å·²ç»è¢«è®¾å®šè¿‡ä¸ºå¯æ‰§è¡Œã€‚<br>å…¶ä»–å‚æ•°è¯´æ˜ï¼š</li></ul><p>-c : è‹¥è¯¥æ–‡ä»¶æƒé™ç¡®å®å·²ç»æ›´æ”¹ï¼Œæ‰æ˜¾ç¤ºå…¶æ›´æ”¹åŠ¨ä½œ<br>-f : è‹¥è¯¥æ–‡ä»¶æƒé™æ— æ³•è¢«æ›´æ”¹ä¹Ÿä¸è¦æ˜¾ç¤ºé”™è¯¯è®¯æ¯<br>-v : æ˜¾ç¤ºæƒé™å˜æ›´çš„è¯¦ç»†èµ„æ–™<br>-R : å¯¹ç›®å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•è¿›è¡Œç›¸åŒçš„æƒé™å˜æ›´(å³ä»¥é€’å›çš„æ–¹å¼é€ä¸ªå˜æ›´)<br>â€“help : æ˜¾ç¤ºè¾…åŠ©è¯´æ˜<br>â€“version : æ˜¾ç¤ºç‰ˆæœ¬<br><strong>å®ä¾‹ï¼š</strong><br>å°†æ–‡ä»¶ file1.txt è®¾ä¸ºæ‰€æœ‰äººçš†å¯è¯»å– :<br>chmod ugo+r file1.txt</p><p>å°†æ–‡ä»¶ file1.txt è®¾ä¸ºæ‰€æœ‰äººçš†å¯è¯»å– :<br>chmod a+r file1.txt</p><p>å°†æ–‡ä»¶ file1.txt ä¸ file2.txt è®¾ä¸ºè¯¥æ–‡ä»¶æ‹¥æœ‰è€…ï¼Œä¸å…¶æ‰€å±åŒä¸€ä¸ªç¾¤ä½“è€…å¯å†™å…¥ï¼Œä½†å…¶ä»–ä»¥å¤–çš„äººåˆ™ä¸å¯å†™å…¥ :<br>chmod ug+w,o-w file1.txt file2.txt</p><p>å°† ex1.py è®¾å®šä¸ºåªæœ‰è¯¥æ–‡ä»¶æ‹¥æœ‰è€…å¯ä»¥æ‰§è¡Œ :<br>chmod u+x ex1.py</p><p>å°†ç›®å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš†è®¾ä¸ºä»»ä½•äººå¯è¯»å– :<br>chmod -R a+r *</p><p>æ­¤å¤–chmodä¹Ÿå¯ä»¥ç”¨æ•°å­—æ¥è¡¨ç¤ºæƒé™å¦‚ :<br>chmod 777 file</p><p>è¯­æ³•ä¸ºï¼š<br>chmod abc file<br>å…¶ä¸­a,b,cå„ä¸ºä¸€ä¸ªæ•°å­—ï¼Œåˆ†åˆ«è¡¨ç¤ºUserã€Groupã€åŠOtherçš„æƒé™ã€‚</p><p>r&#x3D;4ï¼Œw&#x3D;2ï¼Œx&#x3D;1<br>è‹¥è¦rwxå±æ€§åˆ™4+2+1&#x3D;7ï¼›<br>è‹¥è¦rw-å±æ€§åˆ™4+2&#x3D;6ï¼›<br>è‹¥è¦r-xå±æ€§åˆ™4+1&#x3D;5ã€‚<br>chmod a&#x3D;rwx fileå’Œchmod 777 fileæ•ˆæœç›¸åŒ<br>chmod ug&#x3D;rwx,o&#x3D;x fileå’Œchmod 771 fileæ•ˆæœç›¸åŒ<br>è‹¥ç”¨chmod 4755 filenameå¯ä½¿æ­¤ç¨‹åºå…·æœ‰rootçš„æƒé™</p><p><em><strong>å¥½äº†è¯´äº†é‚£ä¹ˆå¤šï¼Œç›´æ¥ä¸€ç‚¹å§ï¼ï¼ï¼</strong></em><br>æˆ‘ä»¬ç®€å•ä¸€ç‚¹æ¯”å¦‚æˆ‘ä»¬çš„æ“ä½œå¯¹è±¡ä¸º a.sh<br>æƒ³è¦èµ‹äºˆæ‰§è¡Œæƒé™ç›´æ¥å¯ä»¥ç”¨chmod +x a.shå³å¯<br>ç„¶åå°±å¯ä»¥å¿«ä¹çš„ç”¨.&#x2F;a.shè·‘è„šæœ¬äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Termius </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½ç©è½¬Linuxçš„å¿…å¤‡æŠ€èƒ½â€”â€”å…¥é—¨ç¯‡</title>
      <link href="/post/2018/07/18/64524/"/>
      <url>/post/2018/07/18/64524/</url>
      
        <content type="html"><![CDATA[<p>æœ¬äººä¸»ä¸šæ˜¯å¼€å‘ä¸šä½™æ—¶é—´å–œæ¬¢ç ”ç©¶è¿ç»´æ–¹é¢çš„ä¸œè¥¿ï¼Œå¯¹è¿™æ–¹é¢è¿˜ç®—å°æœ‰å¿ƒå¾—ï¼Œä¸ç®—å¤ªå°ç™½ã€‚</p><p>Linuxç³»ç»Ÿå¸¸ç”¨çš„ä¸¤ä¸ªç³»åˆ—åˆ†åˆ«æ˜¯RedHatç³»å’ŒDebianç³»ã€‚RedHatç³»ä¸­å¸¸ç”¨çš„ä¸€èˆ¬æ˜¯CentOSï¼Œè€ŒDebianç³»ä¸­å¸¸ç”¨çš„ä¸€èˆ¬æ˜¯Ubuntuã€‚</p><p>æˆ‘å…ˆåˆ—å‡ºå¦‚ä¸‹ä¸¤ç‚¹ï¼Œè¿™æ ·å…¥é—¨å°±åŸºæœ¬æ²¡é—®é¢˜äº†ã€‚</p><h4 id="å¦‚ä¸‹ï¼š"><a href="#å¦‚ä¸‹ï¼š" class="headerlink" title="å¦‚ä¸‹ï¼š"></a>å¦‚ä¸‹ï¼š</h4><p><em><strong>1ã€äº†è§£Linuxç³»ç»ŸåŸºç¡€å‘½ä»¤</strong></em></p><p>è¿™ä¸ªä¸ç”¨è¯´äº†ï¼Œæ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œå¸¸è§çš„å‘½ä»¤å’ŒçŸ¥è¯†ç‚¹è‚¯å®šæ˜¯è¦äº†è§£çš„ï¼Œæ²¡å¿…é¡»å•¥å‘½ä»¤éƒ½è®°ä½ï¼Œä½†åŸºæœ¬å¸¸è§çš„å‘½ä»¤æ€»å¾—ä¼šå§ã€‚<br>æ¨èä¸€æœ¬ç”µå­ä¹¦ï¼šThe Linux Command Line</p><p><em><strong>2ã€é€‰æ‹©ä¸€ä¸ªç§°æ‰‹çš„SSHå·¥å…·</strong></em></p><h2 id="å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼SSHå·¥å…·æœ‰å¾ˆå¤šã€‚æ¨èæˆ‘å¸¸ç”¨çš„ä¸¤ä¸ªwinå’Œmacå¹³å°é€šç”¨çš„ï¼š-â€”â€”â€”â€”-è¯¥è½¯ä»¶å¥½åƒæ˜¯å›½å†…ä¸ªäººå¼€å‘è€…å¼€å‘çš„ï¼Œæˆ‘å¹³æ—¶ç”¨æ¥è¿è¿æµ‹è¯•æœåŠ¡å™¨ï¼Œä¸æ•¢ç”¨æ¥è¿æ¥ç”Ÿäº§æœåŠ¡å™¨ã€‚æ¯•ç«Ÿè¿™ä¸ªæ˜¯å›½äº§é—­æºçš„å“ˆ-ä¸æ•¢çæï¼‰"><a href="#å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼SSHå·¥å…·æœ‰å¾ˆå¤šã€‚æ¨èæˆ‘å¸¸ç”¨çš„ä¸¤ä¸ªwinå’Œmacå¹³å°é€šç”¨çš„ï¼š-â€”â€”â€”â€”-è¯¥è½¯ä»¶å¥½åƒæ˜¯å›½å†…ä¸ªäººå¼€å‘è€…å¼€å‘çš„ï¼Œæˆ‘å¹³æ—¶ç”¨æ¥è¿è¿æµ‹è¯•æœåŠ¡å™¨ï¼Œä¸æ•¢ç”¨æ¥è¿æ¥ç”Ÿäº§æœåŠ¡å™¨ã€‚æ¯•ç«Ÿè¿™ä¸ªæ˜¯å›½äº§é—­æºçš„å“ˆ-ä¸æ•¢çæï¼‰" class="headerlink" title="å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼SSHå·¥å…·æœ‰å¾ˆå¤šã€‚æ¨èæˆ‘å¸¸ç”¨çš„ä¸¤ä¸ªwinå’Œmacå¹³å°é€šç”¨çš„ï¼š- â€”â€”â€”â€”  è¯¥è½¯ä»¶å¥½åƒæ˜¯å›½å†…ä¸ªäººå¼€å‘è€…å¼€å‘çš„ï¼Œæˆ‘å¹³æ—¶ç”¨æ¥è¿è¿æµ‹è¯•æœåŠ¡å™¨ï¼Œä¸æ•¢ç”¨æ¥è¿æ¥ç”Ÿäº§æœåŠ¡å™¨ã€‚æ¯•ç«Ÿè¿™ä¸ªæ˜¯å›½äº§é—­æºçš„å“ˆ ä¸æ•¢çæï¼‰"></a>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼SSHå·¥å…·æœ‰å¾ˆå¤šã€‚æ¨èæˆ‘å¸¸ç”¨çš„ä¸¤ä¸ªwinå’Œmacå¹³å°é€šç”¨çš„ï¼š<br>- <strong>â€”â€”<em><mark class="hl-label blue">finalshell</mark> </em>â€”â€”</strong><br>  è¯¥è½¯ä»¶å¥½åƒæ˜¯å›½å†…ä¸ªäººå¼€å‘è€…å¼€å‘çš„ï¼Œæˆ‘å¹³æ—¶ç”¨æ¥è¿è¿æµ‹è¯•æœåŠ¡å™¨ï¼Œä¸æ•¢ç”¨æ¥è¿æ¥ç”Ÿäº§æœåŠ¡å™¨ã€‚æ¯•ç«Ÿè¿™ä¸ªæ˜¯å›½äº§é—­æºçš„å“ˆ ä¸æ•¢çæï¼‰</h2><h2 id="Windowsç‰ˆä¸‹è½½åœ°å€"><a href="#Windowsç‰ˆä¸‹è½½åœ°å€" class="headerlink" title="  Windowsç‰ˆä¸‹è½½åœ°å€"></a>  <a href="http://www.hostbuf.com/downloads/finalshell_install.exe">Windowsç‰ˆä¸‹è½½åœ°å€</a></h2><p>  <a href="http://www.hostbuf.com/downloads/finalshell_install.pkg">macOSç‰ˆä¸‹è½½åœ°å€</a></p><ul><li><strong>â€”â€”<em><mark class="hl-label blue">Termius</mark> </em>â€”â€”</strong><br>å¯èƒ½å¤§éƒ¨åˆ†äººéƒ½å¬è¯´è¿‡MobaXtermå’ŒXShellï¼Œç§°å®ƒä»¬ä¸ºWindowså¹³å°æœ€å¥½ç”¨çš„ä¸¤ä¸ªç»ˆç«¯å·¥å…·ä¸ä¸ºè¿‡å§ã€ç‰¹åˆ«æ˜¯MobaXtermè´¼å¥½ç”¨ã€‘ã€‚ <strong>ä½†æ˜¯</strong> å”¯ä¸€ä¸è¶³çš„åœ°æ–¹å°±æ˜¯å®ƒåªæœ‰Windowsç‰ˆæœ¬ã€‚æ‰€ä»¥ä»Šå¤©è·Ÿå¤§å®¶ä»‹ç»ä¸€æ¬¾å…¨å¹³å°çš„è¿œç¨‹ç»ˆç«¯â€”â€”Termiusã€‚Termiusä¸ä»…æ¶µç›–äº†Windowsã€Linuxã€OSXï¼Œè¿˜å˜æ€å¾—æ”¯æŒAndroidå’ŒiOSï¼ˆä»¥ååœ¨åœ°é“ã€å…¬äº¤ä¸Šéƒ½å¯ä»¥éšæ—¶æ‹¿å‡ºæ‰‹æœºæ¥æ’æŸ¥çº¿ä¸Šé—®é¢˜å•¦ï¼Œè¿˜çœŸæ˜¯å¹¿å¤§ç å†œã€è¿ç»´çš„ç¦éŸ³å‘¢ï¼‰ã€‚<br>Termiuså®˜ç½‘ï¼š<br><a href="https://termius.com/">https://termius.com/</a><br><strong>æ³¨æ„</strong>ï¼šæ­¤è½¯ä»¶çš„äº‘åŒæ­¥ç­‰é«˜çº§åŠŸèƒ½ä¸ºä»˜è´¹åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡eduæ¸ é“å…è´¹ä½¿ç”¨ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Termius </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MYSQL5.7ç‰ˆæœ¬sql_mode=only_full_group_byé—®é¢˜</title>
      <link href="/post/2017/08/02/47261/"/>
      <url>/post/2017/08/02/47261/</url>
      
        <content type="html"><![CDATA[<h3 id="æœ€è¿‘æ¥äº†ä¸ªé¡¹ç›®ï¼Œå› ä¸ºé¡¹ç›®è¦ä¸ç¬¬ä¸‰æ–¹åä½œçš„åŸå› éœ€è¦ç”¨åˆ°mysql5-7-xç‰ˆæœ¬ã€‚ç„¶åå°±ç¢°åˆ°äº†è¿™ä¸ªæ–°è€ç‰ˆæœ¬çš„å·®å¼‚å¯¼è‡´çš„group-byé—®é¢˜ã€‚"><a href="#æœ€è¿‘æ¥äº†ä¸ªé¡¹ç›®ï¼Œå› ä¸ºé¡¹ç›®è¦ä¸ç¬¬ä¸‰æ–¹åä½œçš„åŸå› éœ€è¦ç”¨åˆ°mysql5-7-xç‰ˆæœ¬ã€‚ç„¶åå°±ç¢°åˆ°äº†è¿™ä¸ªæ–°è€ç‰ˆæœ¬çš„å·®å¼‚å¯¼è‡´çš„group-byé—®é¢˜ã€‚" class="headerlink" title="æœ€è¿‘æ¥äº†ä¸ªé¡¹ç›®ï¼Œå› ä¸ºé¡¹ç›®è¦ä¸ç¬¬ä¸‰æ–¹åä½œçš„åŸå› éœ€è¦ç”¨åˆ°mysql5.7.xç‰ˆæœ¬ã€‚ç„¶åå°±ç¢°åˆ°äº†è¿™ä¸ªæ–°è€ç‰ˆæœ¬çš„å·®å¼‚å¯¼è‡´çš„group byé—®é¢˜ã€‚"></a>æœ€è¿‘æ¥äº†ä¸ªé¡¹ç›®ï¼Œå› ä¸ºé¡¹ç›®è¦ä¸ç¬¬ä¸‰æ–¹åä½œçš„åŸå› éœ€è¦ç”¨åˆ°mysql5.7.xç‰ˆæœ¬ã€‚ç„¶åå°±ç¢°åˆ°äº†è¿™ä¸ªæ–°è€ç‰ˆæœ¬çš„å·®å¼‚å¯¼è‡´çš„group byé—®é¢˜ã€‚</h3><p>mysql5.7.xç‰ˆæœ¬é»˜è®¤æ˜¯å¼€å¯äº† only_full_group_by æ¨¡å¼çš„ï¼Œä½†å¼€å¯è¿™ä¸ªæ¨¡å¼åï¼ŒåŸå…ˆçš„ group by è¯­å¥å°±æŠ¥é”™ï¼Œç„¶ååˆæŠŠå®ƒç§»é™¤äº†ã€‚<br>ä¸€æ—¦å¼€å¯ only_full_group_byï¼Œæ„Ÿè§‰group byå°†å˜æˆå’Œdistinctä¸€æ ·ï¼Œåªèƒ½è·å–å—åˆ°å…¶å½±å“çš„å­—æ®µä¿¡æ¯ï¼Œæ— æ³•å’Œå…¶ä»–æœªå—å…¶å½±å“çš„å­—æ®µå…±å­˜ï¼Œè¿™æ ·group byçš„åŠŸèƒ½å°†å˜å¾—ååˆ†é¸¡è‚‹äº†ï¼</p><h3 id="å…·ä½“å‡ºé”™æç¤ºï¼š"><a href="#å…·ä½“å‡ºé”™æç¤ºï¼š" class="headerlink" title="å…·ä½“å‡ºé”™æç¤ºï¼š"></a>å…·ä½“å‡ºé”™æç¤ºï¼š</h3><p>[Err] 1055 - Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column â€˜information_schema.PROFILING.SEQâ€™ which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode&#x3D;only_full_group_by</p><h3 id="è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š"><a href="#è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š" class="headerlink" title="è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š"></a>è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š</h3><p><em><strong>1ã€åœ¨sqlæŸ¥è¯¢è¯­å¥ä¸­ä¸éœ€è¦group byçš„å­—æ®µä¸Šä½¿ç”¨any_value()å‡½æ•°</strong></em><br>ä»€ä¹ˆï¼Ÿæ”¹ä»£ç ï¼Ÿ æ”¹ä»£ç æ˜¯ä¸å¯èƒ½çš„è¿™è¾ˆå­éƒ½ä¸å¯èƒ½ï¼ï¼ï¼è¿™ç§å¯¹äºå·²ç»å¼€å‘å®Œæˆçš„é¡¹ç›®ä¸å¤ªåˆé€‚ï¼Œæ¯•ç«Ÿè¦æŠŠåŸæ¥çš„sqléƒ½ç»™ä¿®æ”¹ä¸€éï¼</p><p><em><strong>2ã€ä¿®æ”¹my.cnfï¼ˆwindowsä¸‹æ˜¯my.iniï¼‰é…ç½®æ–‡ä»¶ï¼Œåˆ æ‰only_full_group_byè¿™ä¸€é¡¹</strong></em><br>è‹¥æˆ‘ä»¬é¡¹ç›®çš„mysqlå®‰è£…åœ¨Debianä¸Šé¢ï¼Œæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶æ‰“å¼€ä¸€çœ‹ï¼Œé‡Œé¢å¹¶æ²¡æœ‰sql_modeè¿™ä¸€é…ç½®é¡¹ï¼Œæƒ³åˆ éƒ½æ²¡å¾—åˆ ã€‚<br><strong>é‚£è¯¥æ€ä¹ˆåŠå‘¢</strong><br>å½“ç„¶ï¼Œè¿˜æœ‰åˆ«çš„åŠæ³•ï¼Œæ‰“å¼€mysqlå‘½ä»¤è¡Œï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">select @@global.sql_mode;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¸€èˆ¬æ˜¯è¿™ä¸ªï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ONLY_FULL_GROUP_BYå»æ‰é‡æ–°è®¾ç½®å€¼å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> @@global.sql_mode =<span class="string">&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯æ”¹å˜äº†å…¨å±€sql_modeï¼Œåªå¯¹æ–°å»ºçš„æ•°æ®åº“æœ‰æ•ˆã€‚å¯¹äºå·²å­˜åœ¨çš„æ•°æ®åº“ï¼Œåˆ™éœ€è¦åœ¨å¯¹åº”çš„æ•°æ®ä¸‹æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> sql_mode =<span class="string">&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
